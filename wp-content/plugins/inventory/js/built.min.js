function hasOverflowScrolling() {
    var a = ["webkit", "moz", "o", "ms"],
        b = document.createElement("div"),
        c = !1;
    document.getElementsByTagName("body")[0].appendChild(b);
    for (var d = 0; d < a.length; d++) {
        var e = a[d];
        b.style[e + "OverflowScrolling"] = "touch"
    }
    b.style.overflowScrolling = "touch";
    var f = window.getComputedStyle(b);
    for (c = !!f.overflowScrolling, d = 0; d < a.length; d++)
        if (e = a[d], f[e + "OverflowScrolling"]) {
            c = !0;
            break
        }
    return b.parentNode.removeChild(b), c
}
jQuery.extend({
        highlight: function(a, b, c, d) {
            if (3 === a.nodeType) {
                var e = a.data.match(b);
                if (e) {
                    var f = document.createElement(c || "mark");
                    f.className = d || "highlight";
                    var g = a.splitText(e.index);
                    g.splitText(e[0].length);
                    var h = g.cloneNode(!0);
                    return f.appendChild(h), g.parentNode.replaceChild(f, g), 1
                }
            } else if (1 === a.nodeType && a.childNodes && !/(script|style)/i.test(a.tagName) && (a.tagName !== c.toUpperCase() || a.className !== d))
                for (var i = 0; i < a.childNodes.length; i++) i += jQuery.highlight(a.childNodes[i], b, c, d);
            return 0
        }
    }), jQuery.fn.unhighlight = function(a) {
        var b = {
            className: "highlight",
            element: "mark"
        };
        return jQuery.extend(b, a), this.find(b.element + "." + b.className).each(function() {
            var a = this.parentNode;
            a.replaceChild(this.firstChild, this), a.normalize()
        }).end()
    }, jQuery.fn.highlight = function(a, b) {
        var c = {
            className: "highlight",
            element: "mark",
            caseSensitive: !1,
            wordsOnly: !1
        };
        if (jQuery.extend(c, b), a.constructor === String && (a = [a]), a = jQuery.grep(a, function(a, b) {
                return "" != a
            }), a = jQuery.map(a, function(a, b) {
                return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
            }), 0 == a.length) return this;
        var d = c.caseSensitive ? "" : "i",
            e = "(" + a.join("|") + ")";
        c.wordsOnly && (e = "\\b" + e + "\\b");
        var f = new RegExp(e, d);
        return this.each(function() {
            jQuery.highlight(this, f, c.element, c.className)
        })
    },
    function(a) {
        a.fn.unveil = function(b, c) {
            function d() {
                var b = j.filter(function() {
                    var b = a(this);
                    if (!b.is(":hidden")) {
                        var c = f.scrollTop(),
                            d = c + f.height(),
                            e = b.offset().top;
                        return e + b.height() >= c - g && e <= d + g
                    }
                });
                e = b.trigger("unveil"), j = j.not(e)
            }
            var e, f = a(window),
                g = b || 0,
                h = window.devicePixelRatio > 1,
                i = h ? "data-src-retina" : "data-src",
                j = this;
            return this.one("unveil", function() {
                var a = this.getAttribute(i);
                (a = a || this.getAttribute("data-src")) && (this.setAttribute("src", a), "function" == typeof c && c.call(this))
            }), f.on("scroll.unveil resize.unveil lookup.unveil", d), d(), this
        }
    }(window.jQuery),
    function(a) {
        "function" == typeof define && define.amd ? define(["jquery"], a) : a(jQuery)
    }(function(a) {
        a.fn.addBack = a.fn.addBack || a.fn.andSelf, a.fn.extend({
            actual: function(b, c) {
                if (!this[b]) throw '$.actual => The jQuery method "' + b + '" you called does not exist';
                var d, e, f = {
                        absolute: !1,
                        clone: !1,
                        includeMargin: !1,
                        display: "block"
                    },
                    g = a.extend(f, c),
                    h = this.eq(0);
                if (!0 === g.clone) d = function() {
                    h = h.clone().attr("style", "position: absolute !important; top: -1000 !important; ").appendTo("body")
                }, e = function() {
                    h.remove()
                };
                else {
                    var i, j = [],
                        k = "";
                    d = function() {
                        i = h.parents().addBack().filter(":hidden"), k += "visibility: hidden !important; display: " + g.display + " !important; ", !0 === g.absolute && (k += "position: absolute !important; "), i.each(function() {
                            var b = a(this),
                                c = b.attr("style");
                            j.push(c), b.attr("style", c ? c + ";" + k : k)
                        })
                    }, e = function() {
                        i.each(function(b) {
                            var c = a(this),
                                d = j[b];
                            void 0 === d ? c.removeAttr("style") : c.attr("style", d)
                        })
                    }
                }
                d();
                var l = /(outer)/.test(b) ? h[b](g.includeMargin) : h[b]();
                return e(), l
            }
        })
    }),
    function(a, b) {
        "function" == typeof define && define.amd ? define(["jquery"], function(a) {
            return b(a)
        }) : "object" == typeof module && module.exports ? module.exports = b(require("jquery")) : b(a.jQuery)
    }(this, function(a) {
        ! function(a) {
            "use strict";

            function b(b) {
                var c = [{
                    re: /[\xC0-\xC6]/g,
                    ch: "A"
                }, {
                    re: /[\xE0-\xE6]/g,
                    ch: "a"
                }, {
                    re: /[\xC8-\xCB]/g,
                    ch: "E"
                }, {
                    re: /[\xE8-\xEB]/g,
                    ch: "e"
                }, {
                    re: /[\xCC-\xCF]/g,
                    ch: "I"
                }, {
                    re: /[\xEC-\xEF]/g,
                    ch: "i"
                }, {
                    re: /[\xD2-\xD6]/g,
                    ch: "O"
                }, {
                    re: /[\xF2-\xF6]/g,
                    ch: "o"
                }, {
                    re: /[\xD9-\xDC]/g,
                    ch: "U"
                }, {
                    re: /[\xF9-\xFC]/g,
                    ch: "u"
                }, {
                    re: /[\xC7-\xE7]/g,
                    ch: "c"
                }, {
                    re: /[\xD1]/g,
                    ch: "N"
                }, {
                    re: /[\xF1]/g,
                    ch: "n"
                }];
                return a.each(c, function() {
                    b = b ? b.replace(this.re, this.ch) : ""
                }), b
            }

            function c(b, c) {
                var d = arguments,
                    e = b,
                    f = c;
                [].shift.apply(d);
                var g, h = this.each(function() {
                    var b = a(this);
                    if (b.is("select")) {
                        var c = b.data("selectpicker"),
                            h = "object" == typeof e && e;
                        if (c) {
                            if (h)
                                for (var i in h) h.hasOwnProperty(i) && (c.options[i] = h[i])
                        } else {
                            var j = a.extend({}, k.DEFAULTS, a.fn.selectpicker.defaults || {}, b.data(), h);
                            j.template = a.extend({}, k.DEFAULTS.template, a.fn.selectpicker.defaults ? a.fn.selectpicker.defaults.template : {}, b.data().template, h.template), b.data("selectpicker", c = new k(this, j, f))
                        }
                        "string" == typeof e && (g = c[e] instanceof Function ? c[e].apply(c, d) : c.options[e])
                    }
                });
                return void 0 !== g ? g : h
            }
            String.prototype.includes || function() {
                var a = {}.toString,
                    b = function() {
                        try {
                            var a = {},
                                b = Object.defineProperty,
                                c = b(a, a, a) && b
                        } catch (a) {}
                        return c
                    }(),
                    c = "".indexOf,
                    d = function(b) {
                        if (null == this) throw new TypeError;
                        var d = String(this);
                        if (b && "[object RegExp]" == a.call(b)) throw new TypeError;
                        var e = d.length,
                            f = String(b),
                            g = f.length,
                            h = arguments.length > 1 ? arguments[1] : void 0,
                            i = h ? Number(h) : 0;
                        return i != i && (i = 0), !(g + Math.min(Math.max(i, 0), e) > e) && -1 != c.call(d, f, i)
                    };
                b ? b(String.prototype, "includes", {
                    value: d,
                    configurable: !0,
                    writable: !0
                }) : String.prototype.includes = d
            }(), String.prototype.startsWith || function() {
                var a = function() {
                        try {
                            var a = {},
                                b = Object.defineProperty,
                                c = b(a, a, a) && b
                        } catch (a) {}
                        return c
                    }(),
                    b = {}.toString,
                    c = function(a) {
                        if (null == this) throw new TypeError;
                        var c = String(this);
                        if (a && "[object RegExp]" == b.call(a)) throw new TypeError;
                        var d = c.length,
                            e = String(a),
                            f = e.length,
                            g = arguments.length > 1 ? arguments[1] : void 0,
                            h = g ? Number(g) : 0;
                        h != h && (h = 0);
                        var i = Math.min(Math.max(h, 0), d);
                        if (f + i > d) return !1;
                        for (var j = -1; ++j < f;)
                            if (c.charCodeAt(i + j) != e.charCodeAt(j)) return !1;
                        return !0
                    };
                a ? a(String.prototype, "startsWith", {
                    value: c,
                    configurable: !0,
                    writable: !0
                }) : String.prototype.startsWith = c
            }(), Object.keys || (Object.keys = function(a, b, c) {
                c = [];
                for (b in a) c.hasOwnProperty.call(a, b) && c.push(b);
                return c
            });
            var d = {
                useDefault: !1,
                _set: a.valHooks.select.set
            };
            a.valHooks.select.set = function(b, c) {
                return c && !d.useDefault && a(b).data("selected", !0), d._set.apply(this, arguments)
            };
            var e = null;
            a.fn.triggerNative = function(a) {
                var b, c = this[0];
                c.dispatchEvent ? ("function" == typeof Event ? b = new Event(a, {
                    bubbles: !0
                }) : (b = document.createEvent("Event"), b.initEvent(a, !0, !1)), c.dispatchEvent(b)) : c.fireEvent ? (b = document.createEventObject(), b.eventType = a, c.fireEvent("on" + a, b)) : this.trigger(a)
            }, a.expr.pseudos.icontains = function(b, c, d) {
                var e = a(b);
                return (e.data("tokens") || e.text()).toString().toUpperCase().includes(d[3].toUpperCase())
            }, a.expr.pseudos.ibegins = function(b, c, d) {
                var e = a(b);
                return (e.data("tokens") || e.text()).toString().toUpperCase().startsWith(d[3].toUpperCase())
            }, a.expr.pseudos.aicontains = function(b, c, d) {
                var e = a(b);
                return (e.data("tokens") || e.data("normalizedText") || e.text()).toString().toUpperCase().includes(d[3].toUpperCase())
            }, a.expr.pseudos.aibegins = function(b, c, d) {
                var e = a(b);
                return (e.data("tokens") || e.data("normalizedText") || e.text()).toString().toUpperCase().startsWith(d[3].toUpperCase())
            };
            var f = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#x27;",
                    "`": "&#x60;"
                },
                g = {
                    "&amp;": "&",
                    "&lt;": "<",
                    "&gt;": ">",
                    "&quot;": '"',
                    "&#x27;": "'",
                    "&#x60;": "`"
                },
                h = function(a) {
                    var b = function(b) {
                            return a[b]
                        },
                        c = "(?:" + Object.keys(a).join("|") + ")",
                        d = RegExp(c),
                        e = RegExp(c, "g");
                    return function(a) {
                        return a = null == a ? "" : "" + a, d.test(a) ? a.replace(e, b) : a
                    }
                },
                i = h(f),
                j = h(g),
                k = function(b, c, e) {
                    d.useDefault || (a.valHooks.select.set = d._set, d.useDefault = !0), e && (e.stopPropagation(), e.preventDefault()), this.$element = a(b), this.$newElement = null, this.$button = null, this.$menu = null, this.$lis = null, this.options = c, null === this.options.title && (this.options.title = this.$element.attr("title"));
                    var f = this.options.windowPadding;
                    "number" == typeof f && (this.options.windowPadding = [f, f, f, f]), this.val = k.prototype.val, this.render = k.prototype.render, this.refresh = k.prototype.refresh, this.setStyle = k.prototype.setStyle, this.selectAll = k.prototype.selectAll, this.deselectAll = k.prototype.deselectAll, this.destroy = k.prototype.destroy, this.remove = k.prototype.remove, this.show = k.prototype.show, this.hide = k.prototype.hide, this.init()
                };
            k.VERSION = "1.12.0", k.DEFAULTS = {
                noneSelectedText: "Nothing selected",
                noneResultsText: "No results matched {0}",
                countSelectedText: function(a, b) {
                    return 1 == a ? "{0} item selected" : "{0} items selected"
                },
                maxOptionsText: function(a, b) {
                    return [1 == a ? "Limit reached ({n} item max)" : "Limit reached ({n} items max)", 1 == b ? "Group limit reached ({n} item max)" : "Group limit reached ({n} items max)"]
                },
                selectAllText: "Select All",
                deselectAllText: "Deselect All",
                doneButton: !1,
                doneButtonText: "Close",
                multipleSeparator: ", ",
                styleBase: "btn selectpicker",
                style: "btn-default",
                size: "auto",
                title: null,
                selectedTextFormat: "values",
                width: !1,
                container: !1,
                hideDisabled: !1,
                showSubtext: !1,
                showIcon: !0,
                showContent: !0,
                dropupAuto: !0,
                header: !1,
                liveSearch: !1,
                liveSearchPlaceholder: null,
                liveSearchNormalize: !1,
                liveSearchStyle: "contains",
                actionsBox: !1,
                iconBase: "glyphicon",
                tickIcon: "glyphicon-ok",
                showTick: !1,
                template: {
                    caret: '<span class="caret"></span>'
                },
                maxOptions: !1,
                mobile: !1,
                selectOnTab: !1,
                dropdownAlignRight: !1,
                windowPadding: 0
            }, k.prototype = {
                constructor: k,
                init: function() {
                    var b = this,
                        c = this.$element.attr("id");
                    this.$element.addClass("bs-select-hidden"), this.liObj = {}, this.multiple = this.$element.prop("multiple"), this.autofocus = this.$element.prop("autofocus"), this.$newElement = this.createView(), this.$element.after(this.$newElement).appendTo(this.$newElement), this.$button = this.$newElement.children("button"), this.$menu = this.$newElement.children(".dropdown-menu"), this.$menuInner = this.$menu.children(".inner"), this.$searchbox = this.$menu.find("input"), this.$element.removeClass("bs-select-hidden"), !0 === this.options.dropdownAlignRight && this.$menu.addClass("dropdown-menu-right"), void 0 !== c && (this.$button.attr("data-id", c), a('label[for="' + c + '"]').click(function(a) {
                        a.preventDefault(), b.$button.focus()
                    })), this.checkDisabled(), this.clickListener(), this.options.liveSearch && this.liveSearchListener(), this.render(), this.setStyle(), this.setWidth(), this.options.container && this.selectPosition(), this.$menu.data("this", this), this.$newElement.data("this", this), this.options.mobile && this.mobile(), this.$newElement.on({
                        "hide.bs.dropdown": function(a) {
                            b.$menuInner.attr("aria-expanded", !1), b.$element.trigger("hide.bs.select", a)
                        },
                        "hidden.bs.dropdown": function(a) {
                            b.$element.trigger("hidden.bs.select", a)
                        },
                        "show.bs.dropdown": function(a) {
                            b.$menuInner.attr("aria-expanded", !0), b.$element.trigger("show.bs.select", a)
                        },
                        "shown.bs.dropdown": function(a) {
                            b.$element.trigger("shown.bs.select", a)
                        }
                    }), b.$element[0].hasAttribute("required") && this.$element.on("invalid", function() {
                        b.$button.addClass("bs-invalid").focus(), b.$element.on({
                            "focus.bs.select": function() {
                                b.$button.focus(), b.$element.off("focus.bs.select")
                            },
                            "shown.bs.select": function() {
                                b.$element.val(b.$element.val()).off("shown.bs.select")
                            },
                            "rendered.bs.select": function() {
                                this.validity.valid && b.$button.removeClass("bs-invalid"), b.$element.off("rendered.bs.select")
                            }
                        })
                    }), setTimeout(function() {
                        b.$element.trigger("loaded.bs.select")
                    })
                },
                createDropdown: function() {
                    var b = this.multiple || this.options.showTick ? " show-tick" : "",
                        c = this.$element.parent().hasClass("input-group") ? " input-group-btn" : "",
                        d = this.autofocus ? " autofocus" : "",
                        e = this.options.header ? '<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>' + this.options.header + "</div>" : "",
                        f = this.options.liveSearch ? '<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"' + (null === this.options.liveSearchPlaceholder ? "" : ' placeholder="' + i(this.options.liveSearchPlaceholder) + '"') + ' role="textbox" aria-label="Search"></div>' : "",
                        g = this.multiple && this.options.actionsBox ? '<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">' + this.options.selectAllText + '</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">' + this.options.deselectAllText + "</button></div></div>" : "",
                        h = this.multiple && this.options.doneButton ? '<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">' + this.options.doneButtonText + "</button></div></div>" : "",
                        j = '<div class="btn-group bootstrap-select' + b + c + '"><button type="button" class="' + this.options.styleBase + ' dropdown-toggle" data-toggle="dropdown"' + d + ' role="button"><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">' + this.options.template.caret + '</span></button><div class="dropdown-menu open" role="combobox">' + e + f + g + '<ul class="dropdown-menu inner" role="listbox" aria-expanded="false"></ul>' + h + "</div></div>";
                    return a(j)
                },
                createView: function() {
                    var a = this.createDropdown(),
                        b = this.createLi();
                    return a.find("ul")[0].innerHTML = b, a
                },
                reloadLi: function() {
                    var a = this.createLi();
                    this.$menuInner[0].innerHTML = a
                },
                createLi: function() {
                    var c = this,
                        d = [],
                        e = 0,
                        f = document.createElement("option"),
                        g = -1,
                        h = function(a, b, c, d) {
                            return "<li" + (void 0 !== c & "" !== c ? ' class="' + c + '"' : "") + (void 0 !== b & null !== b ? ' data-original-index="' + b + '"' : "") + (void 0 !== d & null !== d ? 'data-optgroup="' + d + '"' : "") + ">" + a + "</li>"
                        },
                        j = function(d, e, f, g) {
                            return '<a tabindex="0"' + (void 0 !== e ? ' class="' + e + '"' : "") + (f ? ' style="' + f + '"' : "") + (c.options.liveSearchNormalize ? ' data-normalized-text="' + b(i(a(d).html())) + '"' : "") + (void 0 !== g || null !== g ? ' data-tokens="' + g + '"' : "") + ' role="option">' + d + '<i class="' + c.options.iconBase + " " + c.options.tickIcon + ' check-mark"></i></a>'
                        };
                    if (this.options.title && !this.multiple && (g--, !this.$element.find(".bs-title-option").length)) {
                        var k = this.$element[0];
                        f.className = "bs-title-option", f.innerHTML = this.options.title, f.value = "", k.insertBefore(f, k.firstChild);
                        void 0 === a(k.options[k.selectedIndex]).attr("selected") && void 0 === this.$element.data("selected") && (f.selected = !0)
                    }
                    return this.$element.find("option").each(function(b) {
                        var f = a(this);
                        if (g++, !f.hasClass("bs-title-option")) {
                            var k = this.className || "",
                                l = this.style.cssText,
                                m = f.data("content") ? f.data("content") : f.html(),
                                n = f.data("tokens") ? f.data("tokens") : null,
                                o = void 0 !== f.data("subtext") ? '<small class="text-muted">' + f.data("subtext") + "</small>" : "",
                                p = void 0 !== f.data("icon") ? '<span class="' + c.options.iconBase + " " + f.data("icon") + '"></span> ' : "",
                                q = f.parent(),
                                r = "OPTGROUP" === q[0].tagName,
                                s = r && q[0].disabled,
                                t = this.disabled || s;
                            if ("" !== p && t && (p = "<span>" + p + "</span>"), c.options.hideDisabled && (t && !r || s)) return void g--;
                            if (f.data("content") || (m = p + '<span class="text">' + m + o + "</span>"), r && !0 !== f.data("divider")) {
                                if (c.options.hideDisabled && t) {
                                    if (void 0 === q.data("allOptionsDisabled")) {
                                        var u = q.children();
                                        q.data("allOptionsDisabled", u.filter(":disabled").length === u.length)
                                    }
                                    if (q.data("allOptionsDisabled")) return void g--
                                }
                                var v = " " + q[0].className || "";
                                if (0 === f.index()) {
                                    e += 1;
                                    var w = q[0].label,
                                        x = void 0 !== q.data("subtext") ? '<small class="text-muted">' + q.data("subtext") + "</small>" : "";
                                    w = (q.data("icon") ? '<span class="' + c.options.iconBase + " " + q.data("icon") + '"></span> ' : "") + '<span class="text">' + i(w) + x + "</span>", 0 !== b && d.length > 0 && (g++, d.push(h("", null, "divider", e + "div"))), g++, d.push(h(w, null, "dropdown-header" + v, e))
                                }
                                if (c.options.hideDisabled && t) return void g--;
                                d.push(h(j(m, "opt " + k + v, l, n), b, "", e))
                            } else if (!0 === f.data("divider")) d.push(h("", b, "divider"));
                            else if (!0 === f.data("hidden")) d.push(h(j(m, k, l, n), b, "hidden is-hidden"));
                            else {
                                var y = this.previousElementSibling && "OPTGROUP" === this.previousElementSibling.tagName;
                                if (!y && c.options.hideDisabled)
                                    for (var z = a(this).prevAll(), A = 0; A < z.length; A++)
                                        if ("OPTGROUP" === z[A].tagName) {
                                            for (var B = 0, C = 0; C < A; C++) {
                                                var D = z[C];
                                                (D.disabled || !0 === a(D).data("hidden")) && B++
                                            }
                                            B === A && (y = !0);
                                            break
                                        }
                                y && (g++, d.push(h("", null, "divider", e + "div"))), d.push(h(j(m, k, l, n), b))
                            }
                            c.liObj[b] = g
                        }
                    }), this.multiple || 0 !== this.$element.find("option:selected").length || this.options.title || this.$element.find("option").eq(0).prop("selected", !0).attr("selected", "selected"), d.join("")
                },
                findLis: function() {
                    return null == this.$lis && (this.$lis = this.$menu.find("li")), this.$lis
                },
                render: function(b) {
                    var c, d = this;
                    !1 !== b && this.$element.find("option").each(function(a) {
                        var b = d.findLis().eq(d.liObj[a]);
                        d.setDisabled(a, this.disabled || "OPTGROUP" === this.parentNode.tagName && this.parentNode.disabled, b), d.setSelected(a, this.selected, b)
                    }), this.togglePlaceholder(), this.tabIndex();
                    var e = this.$element.find("option").map(function() {
                            if (this.selected) {
                                if (d.options.hideDisabled && (this.disabled || "OPTGROUP" === this.parentNode.tagName && this.parentNode.disabled)) return;
                                var b, c = a(this),
                                    e = c.data("icon") && d.options.showIcon ? '<i class="' + d.options.iconBase + " " + c.data("icon") + '"></i> ' : "";
                                return b = d.options.showSubtext && c.data("subtext") && !d.multiple ? ' <small class="text-muted">' + c.data("subtext") + "</small>" : "", void 0 !== c.attr("title") ? c.attr("title") : c.data("content") && d.options.showContent ? c.data("content").toString() : e + c.html() + b
                            }
                        }).toArray(),
                        f = this.multiple ? e.join(this.options.multipleSeparator) : e[0];
                    if (this.multiple && this.options.selectedTextFormat.indexOf("count") > -1) {
                        var g = this.options.selectedTextFormat.split(">");
                        if (g.length > 1 && e.length > g[1] || 1 == g.length && e.length >= 2) {
                            c = this.options.hideDisabled ? ", [disabled]" : "";
                            var h = this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]' + c).length;
                            f = ("function" == typeof this.options.countSelectedText ? this.options.countSelectedText(e.length, h) : this.options.countSelectedText).replace("{0}", e.length.toString()).replace("{1}", h.toString())
                        }
                    }
                    void 0 == this.options.title && (this.options.title = this.$element.attr("title")), "static" == this.options.selectedTextFormat && (f = this.options.title), f || (f = void 0 !== this.options.title ? this.options.title : this.options.noneSelectedText), this.$button.attr("title", j(a.trim(f.replace(/<[^>]*>?/g, "")))), this.$button.children(".filter-option").html(f), this.$element.trigger("rendered.bs.select")
                },
                setStyle: function(a, b) {
                    this.$element.attr("class") && this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi, ""));
                    var c = a || this.options.style;
                    "add" == b ? this.$button.addClass(c) : "remove" == b ? this.$button.removeClass(c) : (this.$button.removeClass(this.options.style), this.$button.addClass(c))
                },
                liHeight: function(b) {
                    if (b || !1 !== this.options.size && !this.sizeInfo) {
                        var c = document.createElement("div"),
                            d = document.createElement("div"),
                            e = document.createElement("ul"),
                            f = document.createElement("li"),
                            g = document.createElement("li"),
                            h = document.createElement("a"),
                            i = document.createElement("span"),
                            j = this.options.header && this.$menu.find(".popover-title").length > 0 ? this.$menu.find(".popover-title")[0].cloneNode(!0) : null,
                            k = this.options.liveSearch ? document.createElement("div") : null,
                            l = this.options.actionsBox && this.multiple && this.$menu.find(".bs-actionsbox").length > 0 ? this.$menu.find(".bs-actionsbox")[0].cloneNode(!0) : null,
                            m = this.options.doneButton && this.multiple && this.$menu.find(".bs-donebutton").length > 0 ? this.$menu.find(".bs-donebutton")[0].cloneNode(!0) : null;
                        if (i.className = "text", c.className = this.$menu[0].parentNode.className + " open", d.className = "dropdown-menu open", e.className = "dropdown-menu inner", f.className = "divider", i.appendChild(document.createTextNode("Inner text")), h.appendChild(i), g.appendChild(h), e.appendChild(g), e.appendChild(f), j && d.appendChild(j), k) {
                            var n = document.createElement("span");
                            k.className = "bs-searchbox", n.className = "form-control", k.appendChild(n), d.appendChild(k)
                        }
                        l && d.appendChild(l), d.appendChild(e), m && d.appendChild(m), c.appendChild(d), document.body.appendChild(c);
                        var o = h.offsetHeight,
                            p = j ? j.offsetHeight : 0,
                            q = k ? k.offsetHeight : 0,
                            r = l ? l.offsetHeight : 0,
                            s = m ? m.offsetHeight : 0,
                            t = a(f).outerHeight(!0),
                            u = "function" == typeof getComputedStyle && getComputedStyle(d),
                            v = u ? null : a(d),
                            w = {
                                vert: parseInt(u ? u.paddingTop : v.css("paddingTop")) + parseInt(u ? u.paddingBottom : v.css("paddingBottom")) + parseInt(u ? u.borderTopWidth : v.css("borderTopWidth")) + parseInt(u ? u.borderBottomWidth : v.css("borderBottomWidth")),
                                horiz: parseInt(u ? u.paddingLeft : v.css("paddingLeft")) + parseInt(u ? u.paddingRight : v.css("paddingRight")) + parseInt(u ? u.borderLeftWidth : v.css("borderLeftWidth")) + parseInt(u ? u.borderRightWidth : v.css("borderRightWidth"))
                            },
                            x = {
                                vert: w.vert + parseInt(u ? u.marginTop : v.css("marginTop")) + parseInt(u ? u.marginBottom : v.css("marginBottom")) + 2,
                                horiz: w.horiz + parseInt(u ? u.marginLeft : v.css("marginLeft")) + parseInt(u ? u.marginRight : v.css("marginRight")) + 2
                            };
                        document.body.removeChild(c), this.sizeInfo = {
                            liHeight: o,
                            headerHeight: p,
                            searchHeight: q,
                            actionsHeight: r,
                            doneButtonHeight: s,
                            dividerHeight: t,
                            menuPadding: w,
                            menuExtras: x
                        }
                    }
                },
                setSize: function() {
                    if (this.findLis(), this.liHeight(), this.options.header && this.$menu.css("padding-top", 0), !1 !== this.options.size) {
                        var b, c, d, e, f, g, h, i, j = this,
                            k = this.$menu,
                            l = this.$menuInner,
                            m = a(window),
                            n = this.$newElement[0].offsetHeight,
                            o = this.$newElement[0].offsetWidth,
                            p = this.sizeInfo.liHeight,
                            q = this.sizeInfo.headerHeight,
                            r = this.sizeInfo.searchHeight,
                            s = this.sizeInfo.actionsHeight,
                            t = this.sizeInfo.doneButtonHeight,
                            u = this.sizeInfo.dividerHeight,
                            v = this.sizeInfo.menuPadding,
                            w = this.sizeInfo.menuExtras,
                            x = this.options.hideDisabled ? ".disabled" : "",
                            y = function() {
                                var b, c = j.$newElement.offset(),
                                    d = a(j.options.container);
                                j.options.container && !d.is("body") ? (b = d.offset(), b.top += parseInt(d.css("borderTopWidth")), b.left += parseInt(d.css("borderLeftWidth"))) : b = {
                                    top: 0,
                                    left: 0
                                };
                                var e = j.options.windowPadding;
                                f = c.top - b.top - m.scrollTop(), g = m.height() - f - n - b.top - e[2], h = c.left - b.left - m.scrollLeft(), i = m.width() - h - o - b.left - e[1], f -= e[0], h -= e[3]
                            };
                        if (y(), "auto" === this.options.size) {
                            var z = function() {
                                var m, n = function(b, c) {
                                        return function(d) {
                                            return c ? d.classList ? d.classList.contains(b) : a(d).hasClass(b) : !(d.classList ? d.classList.contains(b) : a(d).hasClass(b))
                                        }
                                    },
                                    u = j.$menuInner[0].getElementsByTagName("li"),
                                    x = Array.prototype.filter ? Array.prototype.filter.call(u, n("hidden", !1)) : j.$lis.not(".hidden"),
                                    z = Array.prototype.filter ? Array.prototype.filter.call(x, n("dropdown-header", !0)) : x.filter(".dropdown-header");
                                y(), b = g - w.vert, c = i - w.horiz, j.options.container ? (k.data("height") || k.data("height", k.height()), d = k.data("height"), k.data("width") || k.data("width", k.width()), e = k.data("width")) : (d = k.height(), e = k.width()), j.options.dropupAuto && j.$newElement.toggleClass("dropup", f > g && b - w.vert < d), j.$newElement.hasClass("dropup") && (b = f - w.vert), "auto" === j.options.dropdownAlignRight && k.toggleClass("dropdown-menu-right", h > i && c - w.horiz < e - o), m = x.length + z.length > 3 ? 3 * p + w.vert - 2 : 0, k.css({
                                    "max-height": b + "px",
                                    overflow: "hidden",
                                    "min-height": m + q + r + s + t + "px"
                                }), l.css({
                                    "max-height": b - q - r - s - t - v.vert + "px",
                                    "overflow-y": "auto",
                                    "min-height": Math.max(m - v.vert, 0) + "px"
                                })
                            };
                            z(), this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize", z), m.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize", z)
                        } else if (this.options.size && "auto" != this.options.size && this.$lis.not(x).length > this.options.size) {
                            var A = this.$lis.not(".divider").not(x).children().slice(0, this.options.size).last().parent().index(),
                                B = this.$lis.slice(0, A + 1).filter(".divider").length;
                            b = p * this.options.size + B * u + v.vert, j.options.container ? (k.data("height") || k.data("height", k.height()), d = k.data("height")) : d = k.height(), j.options.dropupAuto && this.$newElement.toggleClass("dropup", f > g && b - w.vert < d), k.css({
                                "max-height": b + q + r + s + t + "px",
                                overflow: "hidden",
                                "min-height": ""
                            }), l.css({
                                "max-height": b - v.vert + "px",
                                "overflow-y": "auto",
                                "min-height": ""
                            })
                        }
                    }
                },
                setWidth: function() {
                    if ("auto" === this.options.width) {
                        this.$menu.css("min-width", "0");
                        var a = this.$menu.parent().clone().appendTo("body"),
                            b = this.options.container ? this.$newElement.clone().appendTo("body") : a,
                            c = a.children(".dropdown-menu").outerWidth(),
                            d = b.css("width", "auto").children("button").outerWidth();
                        a.remove(), b.remove(), this.$newElement.css("width", Math.max(c, d) + "px")
                    } else "fit" === this.options.width ? (this.$menu.css("min-width", ""), this.$newElement.css("width", "").addClass("fit-width")) : this.options.width ? (this.$menu.css("min-width", ""), this.$newElement.css("width", this.options.width)) : (this.$menu.css("min-width", ""), this.$newElement.css("width", ""));
                    this.$newElement.hasClass("fit-width") && "fit" !== this.options.width && this.$newElement.removeClass("fit-width")
                },
                selectPosition: function() {
                    this.$bsContainer = a('<div class="bs-container" />');
                    var b, c, d, e = this,
                        f = a(this.options.container),
                        g = function(a) {
                            e.$bsContainer.addClass(a.attr("class").replace(/form-control|fit-width/gi, "")).toggleClass("dropup", a.hasClass("dropup")), b = a.offset(), f.is("body") ? c = {
                                top: 0,
                                left: 0
                            } : (c = f.offset(), c.top += parseInt(f.css("borderTopWidth")) - f.scrollTop(), c.left += parseInt(f.css("borderLeftWidth")) - f.scrollLeft()), d = a.hasClass("dropup") ? 0 : a[0].offsetHeight, e.$bsContainer.css({
                                top: b.top - c.top + d,
                                left: b.left - c.left,
                                width: a[0].offsetWidth
                            })
                        };
                    this.$button.on("click", function() {
                        var b = a(this);
                        e.isDisabled() || (g(e.$newElement), e.$bsContainer.appendTo(e.options.container).toggleClass("open", !b.hasClass("open")).append(e.$menu))
                    }), a(window).on("resize scroll", function() {
                        g(e.$newElement)
                    }), this.$element.on("hide.bs.select", function() {
                        e.$menu.data("height", e.$menu.height()), e.$bsContainer.detach()
                    })
                },
                setSelected: function(a, b, c) {
                    c || (this.togglePlaceholder(), c = this.findLis().eq(this.liObj[a])), c.toggleClass("selected", b).find("a").attr("aria-selected", b)
                },
                setDisabled: function(a, b, c) {
                    c || (c = this.findLis().eq(this.liObj[a])), b ? c.addClass("disabled").children("a").attr("href", "#").attr("tabindex", -1).attr("aria-disabled", !0) : c.removeClass("disabled").children("a").removeAttr("href").attr("tabindex", 0).attr("aria-disabled", !1)
                },
                isDisabled: function() {
                    return this.$element[0].disabled
                },
                checkDisabled: function() {
                    var a = this;
                    this.isDisabled() ? (this.$newElement.addClass("disabled"), this.$button.addClass("disabled").attr("tabindex", -1).attr("aria-disabled", !0)) : (this.$button.hasClass("disabled") && (this.$newElement.removeClass("disabled"), this.$button.removeClass("disabled").attr("aria-disabled", !1)), -1 != this.$button.attr("tabindex") || this.$element.data("tabindex") || this.$button.removeAttr("tabindex")), this.$button.click(function() {
                        return !a.isDisabled()
                    })
                },
                togglePlaceholder: function() {
                    var a = this.$element.val();
                    this.$button.toggleClass("bs-placeholder", null === a || "" === a || a.constructor === Array && 0 === a.length)
                },
                tabIndex: function() {
                    this.$element.data("tabindex") !== this.$element.attr("tabindex") && -98 !== this.$element.attr("tabindex") && "-98" !== this.$element.attr("tabindex") && (this.$element.data("tabindex", this.$element.attr("tabindex")), this.$button.attr("tabindex", this.$element.data("tabindex"))), this.$element.attr("tabindex", -98)
                },
                clickListener: function() {
                    var b = this,
                        c = a(document);
                    c.data("spaceSelect", !1), this.$button.on("keyup", function(a) {
                        /(32)/.test(a.keyCode.toString(10)) && c.data("spaceSelect") && (a.preventDefault(), c.data("spaceSelect", !1))
                    }), this.$button.on("click", function() {
                        b.setSize()
                    }), this.$element.on("shown.bs.select", function() {
                        if (b.options.liveSearch || b.multiple) {
                            if (!b.multiple) {
                                var a = b.liObj[b.$element[0].selectedIndex];
                                if ("number" != typeof a || !1 === b.options.size) return;
                                var c = b.$lis.eq(a)[0].offsetTop - b.$menuInner[0].offsetTop;
                                c = c - b.$menuInner[0].offsetHeight / 2 + b.sizeInfo.liHeight / 2, b.$menuInner[0].scrollTop = c
                            }
                        } else b.$menuInner.find(".selected a").focus()
                    }), this.$menuInner.on("click", "li a", function(c) {
                        var d = a(this),
                            f = d.parent().data("originalIndex"),
                            g = b.$element.val(),
                            h = b.$element.prop("selectedIndex"),
                            i = !0;
                        if (b.multiple && 1 !== b.options.maxOptions && c.stopPropagation(), c.preventDefault(), !b.isDisabled() && !d.parent().hasClass("disabled")) {
                            var j = b.$element.find("option"),
                                k = j.eq(f),
                                l = k.prop("selected"),
                                m = k.parent("optgroup"),
                                n = b.options.maxOptions,
                                o = m.data("maxOptions") || !1;
                            if (b.multiple) {
                                if (k.prop("selected", !l), b.setSelected(f, !l), d.blur(), !1 !== n || !1 !== o) {
                                    var p = n < j.filter(":selected").length,
                                        q = o < m.find("option:selected").length;
                                    if (n && p || o && q)
                                        if (n && 1 == n) j.prop("selected", !1), k.prop("selected", !0), b.$menuInner.find(".selected").removeClass("selected"), b.setSelected(f, !0);
                                        else if (o && 1 == o) {
                                        m.find("option:selected").prop("selected", !1), k.prop("selected", !0);
                                        var r = d.parent().data("optgroup");
                                        b.$menuInner.find('[data-optgroup="' + r + '"]').removeClass("selected"), b.setSelected(f, !0)
                                    } else {
                                        var s = "string" == typeof b.options.maxOptionsText ? [b.options.maxOptionsText, b.options.maxOptionsText] : b.options.maxOptionsText,
                                            t = "function" == typeof s ? s(n, o) : s,
                                            u = t[0].replace("{n}", n),
                                            v = t[1].replace("{n}", o),
                                            w = a('<div class="notify"></div>');
                                        t[2] && (u = u.replace("{var}", t[2][n > 1 ? 0 : 1]), v = v.replace("{var}", t[2][o > 1 ? 0 : 1])), k.prop("selected", !1), b.$menu.append(w), n && p && (w.append(a("<div>" + u + "</div>")), i = !1, b.$element.trigger("maxReached.bs.select")), o && q && (w.append(a("<div>" + v + "</div>")), i = !1, b.$element.trigger("maxReachedGrp.bs.select")), setTimeout(function() {
                                            b.setSelected(f, !1)
                                        }, 10), w.delay(750).fadeOut(300, function() {
                                            a(this).remove()
                                        })
                                    }
                                }
                            } else j.prop("selected", !1), k.prop("selected", !0), b.$menuInner.find(".selected").removeClass("selected").find("a").attr("aria-selected", !1), b.setSelected(f, !0);
                            !b.multiple || b.multiple && 1 === b.options.maxOptions ? b.$button.focus() : b.options.liveSearch && b.$searchbox.focus(), i && (g != b.$element.val() && b.multiple || h != b.$element.prop("selectedIndex") && !b.multiple) && (e = [f, k.prop("selected"), l], b.$element.triggerNative("change"))
                        }
                    }), this.$menu.on("click", "li.disabled a, .popover-title, .popover-title :not(.close)", function(c) {
                        c.currentTarget == this && (c.preventDefault(), c.stopPropagation(), b.options.liveSearch && !a(c.target).hasClass("close") ? b.$searchbox.focus() : b.$button.focus())
                    }), this.$menuInner.on("click", ".divider, .dropdown-header", function(a) {
                        a.preventDefault(), a.stopPropagation(), b.options.liveSearch ? b.$searchbox.focus() : b.$button.focus()
                    }), this.$menu.on("click", ".popover-title .close", function() {
                        b.$button.click()
                    }), this.$searchbox.on("click", function(a) {
                        a.stopPropagation()
                    }), this.$menu.on("click", ".actions-btn", function(c) {
                        b.options.liveSearch ? b.$searchbox.focus() : b.$button.focus(), c.preventDefault(), c.stopPropagation(), a(this).hasClass("bs-select-all") ? b.selectAll() : b.deselectAll()
                    }), this.$element.change(function() {
                        b.render(!1), b.$element.trigger("changed.bs.select", e), e = null
                    })
                },
                liveSearchListener: function() {
                    var c = this,
                        d = a('<li class="no-results"></li>');
                    this.$button.on("click.dropdown.data-api", function() {
                        c.$menuInner.find(".active").removeClass("active"), c.$searchbox.val() && (c.$searchbox.val(""), c.$lis.not(".is-hidden").removeClass("hidden"), d.parent().length && d.remove()), c.multiple || c.$menuInner.find(".selected").addClass("active"), setTimeout(function() {
                            c.$searchbox.focus()
                        }, 10)
                    }), this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api", function(a) {
                        a.stopPropagation()
                    }), this.$searchbox.on("input propertychange", function() {
                        if (c.$lis.not(".is-hidden").removeClass("hidden"), c.$lis.filter(".active").removeClass("active"), d.remove(), c.$searchbox.val()) {
                            var e, f = c.$lis.not(".is-hidden, .divider, .dropdown-header");
                            if (e = c.options.liveSearchNormalize ? f.not(":a" + c._searchStyle() + '("' + b(c.$searchbox.val()) + '")') : f.not(":" + c._searchStyle() + '("' + c.$searchbox.val() + '")'), e.length === f.length) d.html(c.options.noneResultsText.replace("{0}", '"' + i(c.$searchbox.val()) + '"')), c.$menuInner.append(d), c.$lis.addClass("hidden");
                            else {
                                e.addClass("hidden");
                                var g, h = c.$lis.not(".hidden");
                                h.each(function(b) {
                                    var c = a(this);
                                    c.hasClass("divider") ? void 0 === g ? c.addClass("hidden") : (g && g.addClass("hidden"), g = c) : c.hasClass("dropdown-header") && h.eq(b + 1).data("optgroup") !== c.data("optgroup") ? c.addClass("hidden") : g = null
                                }), g && g.addClass("hidden"), f.not(".hidden").first().addClass("active")
                            }
                        }
                    })
                },
                _searchStyle: function() {
                    return {
                        begins: "ibegins",
                        startsWith: "ibegins"
                    }[this.options.liveSearchStyle] || "icontains"
                },
                val: function(a) {
                    return void 0 !== a ? (this.$element.val(a), this.render(), this.$element) : this.$element.val()
                },
                changeAll: function(b) {
                    if (this.multiple) {
                        void 0 === b && (b = !0), this.findLis();
                        var c = this.$element.find("option"),
                            d = this.$lis.not(".divider, .dropdown-header, .disabled, .hidden"),
                            e = d.length,
                            f = [];
                        if (b) {
                            if (d.filter(".selected").length === d.length) return
                        } else if (0 === d.filter(".selected").length) return;
                        d.toggleClass("selected", b);
                        for (var g = 0; g < e; g++) {
                            var h = d[g].getAttribute("data-original-index");
                            f[f.length] = c.eq(h)[0]
                        }
                        a(f).prop("selected", b), this.render(!1), this.togglePlaceholder(), this.$element.triggerNative("change")
                    }
                },
                selectAll: function() {
                    return this.changeAll(!0)
                },
                deselectAll: function() {
                    return this.changeAll(!1)
                },
                toggle: function(a) {
                    a = a || window.event,
                        a && a.stopPropagation(), this.$button.trigger("click")
                },
                keydown: function(c) {
                    var d, e, f, g, h, i, j, k, l, m = a(this),
                        n = m.is("input") ? m.parent().parent() : m.parent(),
                        o = n.data("this"),
                        p = ":not(.disabled, .hidden, .dropdown-header, .divider)",
                        q = {
                            32: " ",
                            48: "0",
                            49: "1",
                            50: "2",
                            51: "3",
                            52: "4",
                            53: "5",
                            54: "6",
                            55: "7",
                            56: "8",
                            57: "9",
                            59: ";",
                            65: "a",
                            66: "b",
                            67: "c",
                            68: "d",
                            69: "e",
                            70: "f",
                            71: "g",
                            72: "h",
                            73: "i",
                            74: "j",
                            75: "k",
                            76: "l",
                            77: "m",
                            78: "n",
                            79: "o",
                            80: "p",
                            81: "q",
                            82: "r",
                            83: "s",
                            84: "t",
                            85: "u",
                            86: "v",
                            87: "w",
                            88: "x",
                            89: "y",
                            90: "z",
                            96: "0",
                            97: "1",
                            98: "2",
                            99: "3",
                            100: "4",
                            101: "5",
                            102: "6",
                            103: "7",
                            104: "8",
                            105: "9"
                        };
                    if (o.options.liveSearch && (n = m.parent().parent()), o.options.container && (n = o.$menu), d = a('[role="listbox"] li', n), !(l = o.$newElement.hasClass("open")) && (c.keyCode >= 48 && c.keyCode <= 57 || c.keyCode >= 96 && c.keyCode <= 105 || c.keyCode >= 65 && c.keyCode <= 90)) return o.options.container ? o.$button.trigger("click") : (o.setSize(), o.$menu.parent().addClass("open"), l = !0), void o.$searchbox.focus();
                    if (o.options.liveSearch && (/(^9$|27)/.test(c.keyCode.toString(10)) && l && (c.preventDefault(), c.stopPropagation(), o.$menuInner.click(), o.$button.focus()), d = a('[role="listbox"] li' + p, n), m.val() || /(38|40)/.test(c.keyCode.toString(10)) || 0 === d.filter(".active").length && (d = o.$menuInner.find("li"), d = o.options.liveSearchNormalize ? d.filter(":a" + o._searchStyle() + "(" + b(q[c.keyCode]) + ")") : d.filter(":" + o._searchStyle() + "(" + q[c.keyCode] + ")"))), d.length) {
                        if (/(38|40)/.test(c.keyCode.toString(10))) e = d.index(d.find("a").filter(":focus").parent()), g = d.filter(p).first().index(), h = d.filter(p).last().index(), f = d.eq(e).nextAll(p).eq(0).index(), i = d.eq(e).prevAll(p).eq(0).index(), j = d.eq(f).prevAll(p).eq(0).index(), o.options.liveSearch && (d.each(function(b) {
                            a(this).hasClass("disabled") || a(this).data("index", b)
                        }), e = d.index(d.filter(".active")), g = d.first().data("index"), h = d.last().data("index"), f = d.eq(e).nextAll().eq(0).data("index"), i = d.eq(e).prevAll().eq(0).data("index"), j = d.eq(f).prevAll().eq(0).data("index")), k = m.data("prevIndex"), 38 == c.keyCode ? (o.options.liveSearch && e--, e != j && e > i && (e = i), e < g && (e = g), e == k && (e = h)) : 40 == c.keyCode && (o.options.liveSearch && e++, -1 == e && (e = 0), e != j && e < f && (e = f), e > h && (e = h), e == k && (e = g)), m.data("prevIndex", e), o.options.liveSearch ? (c.preventDefault(), m.hasClass("dropdown-toggle") || (d.removeClass("active").eq(e).addClass("active").children("a").focus(), m.focus())) : d.eq(e).children("a").focus();
                        else if (!m.is("input")) {
                            var r, s, t = [];
                            d.each(function() {
                                a(this).hasClass("disabled") || a.trim(a(this).children("a").text().toLowerCase()).substring(0, 1) == q[c.keyCode] && t.push(a(this).index())
                            }), r = a(document).data("keycount"), r++, a(document).data("keycount", r), s = a.trim(a(":focus").text().toLowerCase()).substring(0, 1), s != q[c.keyCode] ? (r = 1, a(document).data("keycount", r)) : r >= t.length && (a(document).data("keycount", 0), r > t.length && (r = 1)), d.eq(t[r - 1]).children("a").focus()
                        }
                        if ((/(13|32)/.test(c.keyCode.toString(10)) || /(^9$)/.test(c.keyCode.toString(10)) && o.options.selectOnTab) && l) {
                            if (/(32)/.test(c.keyCode.toString(10)) || c.preventDefault(), o.options.liveSearch) /(32)/.test(c.keyCode.toString(10)) || (o.$menuInner.find(".active a").click(), m.focus());
                            else {
                                var u = a(":focus");
                                u.click(), u.focus(), c.preventDefault(), a(document).data("spaceSelect", !0)
                            }
                            a(document).data("keycount", 0)
                        }(/(^9$|27)/.test(c.keyCode.toString(10)) && l && (o.multiple || o.options.liveSearch) || /(27)/.test(c.keyCode.toString(10)) && !l) && (o.$menu.parent().removeClass("open"), o.options.container && o.$newElement.removeClass("open"), o.$button.focus())
                    }
                },
                mobile: function() {
                    this.$element.addClass("mobile-device")
                },
                refresh: function() {
                    this.$lis = null, this.liObj = {}, this.reloadLi(), this.render(), this.checkDisabled(), this.liHeight(!0), this.setStyle(), this.setWidth(), this.$lis && this.$searchbox.trigger("propertychange"), this.$element.trigger("refreshed.bs.select")
                },
                hide: function() {
                    this.$newElement.hide()
                },
                show: function() {
                    this.$newElement.show()
                },
                remove: function() {
                    this.$newElement.remove(), this.$element.remove()
                },
                destroy: function() {
                    this.$newElement.before(this.$element).remove(), this.$bsContainer ? this.$bsContainer.remove() : this.$menu.remove(), this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")
                }
            };
            var l = a.fn.selectpicker;
            a.fn.selectpicker = c, a.fn.selectpicker.Constructor = k, a.fn.selectpicker.noConflict = function() {
                return a.fn.selectpicker = l, this
            }, a(document).data("keycount", 0).on("keydown.bs.select", '.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input', k.prototype.keydown).on("focusin.modal", '.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input', function(a) {
                a.stopPropagation()
            }), a(window).on("load.bs.select.data-api", function() {
                a(".selectpicker").each(function() {
                    var b = a(this);
                    c.call(b, b.data())
                })
            })
        }(a)
    }),
    function(a, b) {
        "function" == typeof define && define.amd ? define(b) : "object" == typeof exports ? module.exports = b() : a.NProgress = b()
    }(this, function() {
        function a(a, b, c) {
            return a < b ? b : a > c ? c : a
        }

        function b(a) {
            return 100 * (-1 + a)
        }

        function c(a, c, d) {
            var e;
            return e = "translate3d" === j.positionUsing ? {
                transform: "translate3d(" + b(a) + "%,0,0)"
            } : "translate" === j.positionUsing ? {
                transform: "translate(" + b(a) + "%,0)"
            } : {
                "margin-left": b(a) + "%"
            }, e.transition = "all " + c + "ms " + d, e
        }

        function d(a, b) {
            return ("string" == typeof a ? a : g(a)).indexOf(" " + b + " ") >= 0
        }

        function e(a, b) {
            var c = g(a),
                e = c + b;
            d(c, b) || (a.className = e.substring(1))
        }

        function f(a, b) {
            var c, e = g(a);
            d(a, b) && (c = e.replace(" " + b + " ", " "), a.className = c.substring(1, c.length - 1))
        }

        function g(a) {
            return (" " + (a && a.className || "") + " ").replace(/\s+/gi, " ")
        }

        function h(a) {
            a && a.parentNode && a.parentNode.removeChild(a)
        }
        var i = {};
        i.version = "0.2.0";
        var j = i.settings = {
            minimum: .08,
            easing: "linear",
            positionUsing: "",
            speed: 350,
            trickle: !0,
            trickleSpeed: 250,
            showSpinner: !0,
            barSelector: '[role="bar"]',
            spinnerSelector: '[role="spinner"]',
            parent: "body",
            template: '<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'
        };
        i.configure = function(a) {
                var b, c;
                for (b in a) void 0 !== (c = a[b]) && a.hasOwnProperty(b) && (j[b] = c);
                return this
            }, i.status = null, i.set = function(b) {
                var d = i.isStarted();
                b = a(b, j.minimum, 1), i.status = 1 === b ? null : b;
                var e = i.render(!d),
                    f = e.querySelector(j.barSelector),
                    g = j.speed,
                    h = j.easing;
                return e.offsetWidth, k(function(a) {
                    "" === j.positionUsing && (j.positionUsing = i.getPositioningCSS()), l(f, c(b, g, h)), 1 === b ? (l(e, {
                        transition: "none",
                        opacity: 1
                    }), e.offsetWidth, setTimeout(function() {
                        l(e, {
                            transition: "all " + g + "ms linear",
                            opacity: 0
                        }), setTimeout(function() {
                            i.remove(), a()
                        }, g)
                    }, g)) : setTimeout(a, g)
                }), this
            }, i.isStarted = function() {
                return "number" == typeof i.status
            }, i.start = function() {
                i.status || i.set(0);
                var a = function() {
                    setTimeout(function() {
                        i.status && (i.trickle(), a())
                    }, j.trickleSpeed)
                };
                return j.trickle && a(), this
            }, i.done = function(a) {
                return a || i.status ? i.inc(.3 + .5 * Math.random()).set(1) : this
            }, i.inc = function(b) {
                var c = i.status;
                return c ? c > 1 ? void 0 : ("number" != typeof b && (b = c >= 0 && c < .25 ? (3 * Math.random() + 3) / 100 : c >= .25 && c < .65 ? 3 * Math.random() / 100 : c >= .65 && c < .9 ? 2 * Math.random() / 100 : c >= .9 && c < .99 ? .005 : 0), c = a(c + b, 0, .994), i.set(c)) : i.start()
            }, i.trickle = function() {
                return i.inc()
            },
            function() {
                var a = 0,
                    b = 0;
                i.promise = function(c) {
                    return c && "resolved" !== c.state() ? (0 === b && i.start(), a++, b++, c.always(function() {
                        b--, 0 === b ? (a = 0, i.done()) : i.set((a - b) / a)
                    }), this) : this
                }
            }(), i.render = function(a) {
                if (i.isRendered()) return document.getElementById("nprogress");
                e(document.documentElement, "nprogress-busy");
                var c = document.createElement("div");
                c.id = "nprogress", c.innerHTML = j.template;
                var d, f = c.querySelector(j.barSelector),
                    g = a ? "-100" : b(i.status || 0),
                    k = document.querySelector(j.parent);
                return l(f, {
                    transition: "all 0 linear",
                    transform: "translate3d(" + g + "%,0,0)"
                }), j.showSpinner || (d = c.querySelector(j.spinnerSelector)) && h(d), k != document.body && e(k, "nprogress-custom-parent"), k.appendChild(c), c
            }, i.remove = function() {
                f(document.documentElement, "nprogress-busy"), f(document.querySelector(j.parent), "nprogress-custom-parent");
                var a = document.getElementById("nprogress");
                a && h(a)
            }, i.isRendered = function() {
                return !!document.getElementById("nprogress")
            }, i.getPositioningCSS = function() {
                var a = document.body.style,
                    b = "WebkitTransform" in a ? "Webkit" : "MozTransform" in a ? "Moz" : "msTransform" in a ? "ms" : "OTransform" in a ? "O" : "";
                return b + "Perspective" in a ? "translate3d" : b + "Transform" in a ? "translate" : "margin"
            };
        var k = function() {
                function a() {
                    var c = b.shift();
                    c && c(a)
                }
                var b = [];
                return function(c) {
                    b.push(c), 1 == b.length && a()
                }
            }(),
            l = function() {
                function a(a) {
                    return a.replace(/^-ms-/, "ms-").replace(/-([\da-z])/gi, function(a, b) {
                        return b.toUpperCase()
                    })
                }

                function b(a) {
                    var b = document.body.style;
                    if (a in b) return a;
                    for (var c, d = e.length, f = a.charAt(0).toUpperCase() + a.slice(1); d--;)
                        if ((c = e[d] + f) in b) return c;
                    return a
                }

                function c(c) {
                    return c = a(c), f[c] || (f[c] = b(c))
                }

                function d(a, b, d) {
                    b = c(b), a.style[b] = d
                }
                var e = ["Webkit", "O", "Moz", "ms"],
                    f = {};
                return function(a, b) {
                    var c, e, f = arguments;
                    if (2 == f.length)
                        for (c in b) void 0 !== (e = b[c]) && b.hasOwnProperty(c) && d(a, c, e);
                    else d(a, f[1], f[2])
                }
            }();
        return i
    }),
    function(a) {
        function b(b) {
            var d = b.skinDir + "/" + b.skin,
                e = i[d];
            return e ? e.loaded ? c.call(this, b, e.html) : e.queue.push({
                c: this,
                s: b
            }) : (i[d] = {
                loaded: !1,
                queue: [{
                    c: this,
                    s: b
                }]
            }, a.ajax({
                url: d + ".html",
                dataType: "text",
                success: function(a) {
                    var b = i[d];
                    for (b.loaded = !0, b.html = a, a = 0; a < b.queue.length; a++) c.call(b.queue[a].c, b.queue[a].s, b.html)
                },
                dataFilter: function(a) {
                    return a = a.substring(a.indexOf("<body>") + 6, a.lastIndexOf("</body>"))
                },
                error: function() {
                    if (b.error) {
                        var c = a.Event("tn3_error");
                        c.description = "tn3 skin load error", b.error(c)
                    }
                }
            })), this
        }

        function c(b, c) {
            this.each(function() {
                for (var d, e, f = a(this), g = c.indexOf("<img src="); - 1 != g;) g += 10, e = c.indexOf('"', g), d = b.skinDir + "/" + c.substring(g, e), g = (c = c.substr(0, g) + d + c.substr(e)).indexOf("<img src=", g);
                f.append(c), f.data("tn3").init(f, b.fullOnly)
            })
        }

        function d(b) {
            var c, d, g = [],
                h = b.children(".tn3.album");
            return h.length > 0 ? h.each(function(b) {
                c = a(this), g[b] = {
                    title: c.find(":header").html()
                }, a.extend(g[b], f(c)), (d = e(c)) && (g[b].imgs = d, g[b].thumb || (g[b].thumb = g[b].imgs[0].thumb))
            }) : (d = e(b)) && (g[0] = {
                imgs: d
            }), g
        }

        function e(b) {
            var c, d, e = [];
            return c = b.children("ol,ul").children("li"), c.length > 0 ? c.each(function(b) {
                d = a(this), $firsta = d.find("a:not(.tn3 > a)").filter(":first"), e[b] = {
                    title: d.find(":header").filter(":first").html()
                }, $firsta.length > 0 ? (e[b].img = $firsta.attr("href"), e[b].thumb = $firsta.find("img").attr("data-src")) : e[b].img = d.find("img").filter(":first").attr("data-src"), a.extend(e[b], f(d)), e[b].alt = d.find("img").filter(":first").attr("alt") || e[b].title
            }) : (c = b.find("img")).each(function(b) {
                d = a(this), $at = d.parent("a"), e[b] = 0 == $at.length ? {
                    title: d.attr("title"),
                    img: d.attr("data-src")
                } : {
                    title: d.attr("title"),
                    img: $at.attr("href"),
                    thumb: d.attr("data-src")
                }, e[b].alt = d.attr("alt") || e[b].title
            }), 0 == e.length ? null : e
        }

        function f(b) {
            var c = {};
            b = b.children(".tn3");
            var d;
            return a.each(b, function() {
                d = a(this), c[d.attr("class").substr(4)] = d.html()
            }), c
        }

        function g(b) {
            a('a[href^="#tn3-' + b + '"]').click(function(c) {
                var d = j[b];
                switch (c = a(c.currentTarget).attr("href"), c = c.substr(c.indexOf("-", 5) + 1), (c = c.split("-"))[0]) {
                    case "next":
                        null != d.cAlbum && d.show("next", "fs" == c[1]);
                        break;
                    case "prev":
                        null != d.cAlbum && d.show("prev", "fs" == c[1]);
                        break;
                    default:
                        d.cAlbum != parseInt(c[0]) ? d.showAlbum(parseInt(c[0]), parseInt(c[1]), "fs" == c[2]) : d.show(parseInt(c[1]), "fs" == c[2])
                }
            })
        }

        function h() {
            if (0 == j.length) {
                var b = a(".tn3gallery");
                b.length > 0 && b.tn3({})
            }
        }
        if (function(b) {
                for (var c, d, e = a.fn.jquery, f = e.split("."); b.length < f.length;) b.push(0);
                for (c = 0; c < b.length; c++) {
                    if ((d = parseInt(f[c])) > b[c]) return !0;
                    if (d < b[c]) return !1
                }
                return e === b.join(".")
            }([1, 4, 2])) {
            var i = {},
                j = [];
            a.fn.tn3 = function(e) {
                return e = a.extend(!0, {}, a.fn.tn3.config, e), null != e.skin ? "object" == typeof e.skin ? (e.skinDir += "/" + e.skin[0], null == e.cssID && (e.cssID = e.skin[0]), e.skin = e.skin[1]) : e.skinDir += "/" + e.skin : (e.skin = "tn3", e.skinDir += "/tn3", a.fn.tn3.dontLoad = !0), null == e.cssID && (e.cssID = null == e.skin ? "tn3" : e.skin), this.each(function() {
                    var b = a(this);
                    e.fullOnly ? b.hide() : b.css("visibility", "hidden");
                    var c = e.data ? e.data : d(b);
                    c = j.push(new a.fn.tn3.Gallery(c, e)) - 1, b.data("tn3", j[c]);
                    for (var f = 0; f < a.fn.tn3.plugins.length; f++) a.fn.tn3.plugins[f].init(b, e, j[c]);
                    b.empty(), g(c)
                }), a.fn.tn3.dontLoad ? c.call(this, e, e.skinDefault) : b.call(this, e), this
            }, a.fn.tn3.plugins = [], a.fn.tn3.plugIn = function(b, c) {
                a.fn.tn3.plugins.push({
                    id: b,
                    init: c
                })
            }, a.fn.tn3.version = "1.4.0.101", a.fn.tn3.config = {
                data: null,
                skin: null,
                skinDir: "skins",
                skinDefault: '<div class="tn3-gallery"><div class="tn3-image"><div class="tn3-text-bg"><div class="tn3-image-title"></div><div class="tn3-image-description"></div></div><div class="tn3-next tn3_v tn3_o"></div><div class="tn3-prev tn3_v tn3_o"></div><div class="tn3-preloader tn3_h tn3_v"><img src="preload.gif"/></div><div class="tn3-timer"></div></div><div class="tn3-controls-bg tn3_rh"><div class="tn3-sep1"></div><div class="tn3-sep2"></div><div class="tn3-sep3"></div></div><div class="tn3-thumbs"></div><div class="tn3-fullscreen"></div><div class="tn3-show-albums"></div><div class="tn3-next-page"></div><div class="tn3-prev-page"></div><div class="tn3-play"></div><div class="tn3-count"></div><div class="tn3-albums"><div class="tn3-inalbums"><div class="tn3-album"></div></div><div class="tn3-albums-next"></div><div class="tn3-albums-prev"></div><div class="tn3-albums-close"></div></div></div>',
                cssID: null
            }, a.fn.tn3.translations = {}, a.fn.tn3.translate = function(b, c) {
                if (!c) {
                    return a.fn.tn3.translations[b] || b
                }
                a.fn.tn3.translations[b] = c
            }, a(function() {
                setTimeout(h, 1)
            })
        } else alert("tn3gallery requires jQuery v1.4.2 or later!  You are using v" + a.fn.jquery)
    }(jQuery),
    function(a) {
        a.fn.tn3utils = U = {}, U.shuffle = function(a) {
            var b, c, d = a.length;
            if (d)
                for (; --d;) b = a[c = Math.floor(Math.random() * (d + 1))], a[c] = a[d], a[d] = b
        }, a.extend(a.easing, {
            def: "easeOutQuad",
            swing: function(b, c, d, e, f) {
                return a.easing[a.easing.def](b, c, d, e, f)
            },
            linear: function(a, b, c, d, e) {
                return d * b / e + c
            },
            easeInQuad: function(a, b, c, d, e) {
                return d * (b /= e) * b + c
            },
            easeOutQuad: function(a, b, c, d, e) {
                return -d * (b /= e) * (b - 2) + c
            },
            easeInOutQuad: function(a, b, c, d, e) {
                return (b /= e / 2) < 1 ? d / 2 * b * b + c : -d / 2 * (--b * (b - 2) - 1) + c
            },
            easeInCubic: function(a, b, c, d, e) {
                return d * (b /= e) * b * b + c
            },
            easeOutCubic: function(a, b, c, d, e) {
                return d * ((b = b / e - 1) * b * b + 1) + c
            },
            easeInOutCubic: function(a, b, c, d, e) {
                return (b /= e / 2) < 1 ? d / 2 * b * b * b + c : d / 2 * ((b -= 2) * b * b + 2) + c
            },
            easeInQuart: function(a, b, c, d, e) {
                return d * (b /= e) * b * b * b + c
            },
            easeOutQuart: function(a, b, c, d, e) {
                return -d * ((b = b / e - 1) * b * b * b - 1) + c
            },
            easeInOutQuart: function(a, b, c, d, e) {
                return (b /= e / 2) < 1 ? d / 2 * b * b * b * b + c : -d / 2 * ((b -= 2) * b * b * b - 2) + c
            },
            easeInQuint: function(a, b, c, d, e) {
                return d * (b /= e) * b * b * b * b + c
            },
            easeOutQuint: function(a, b, c, d, e) {
                return d * ((b = b / e - 1) * b * b * b * b + 1) + c
            },
            easeInOutQuint: function(a, b, c, d, e) {
                return (b /= e / 2) < 1 ? d / 2 * b * b * b * b * b + c : d / 2 * ((b -= 2) * b * b * b * b + 2) + c
            },
            easeInSine: function(a, b, c, d, e) {
                return -d * Math.cos(b / e * (Math.PI / 2)) + d + c
            },
            easeOutSine: function(a, b, c, d, e) {
                return d * Math.sin(b / e * (Math.PI / 2)) + c
            },
            easeInOutSine: function(a, b, c, d, e) {
                return -d / 2 * (Math.cos(Math.PI * b / e) - 1) + c
            },
            easeInExpo: function(a, b, c, d, e) {
                return 0 == b ? c : d * Math.pow(2, 10 * (b / e - 1)) + c
            },
            easeOutExpo: function(a, b, c, d, e) {
                return b == e ? c + d : d * (1 - Math.pow(2, -10 * b / e)) + c
            },
            easeInOutExpo: function(a, b, c, d, e) {
                return 0 == b ? c : b == e ? c + d : (b /= e / 2) < 1 ? d / 2 * Math.pow(2, 10 * (b - 1)) + c : d / 2 * (2 - Math.pow(2, -10 * --b)) + c
            },
            easeInCirc: function(a, b, c, d, e) {
                return -d * (Math.sqrt(1 - (b /= e) * b) - 1) + c
            },
            easeOutCirc: function(a, b, c, d, e) {
                return d * Math.sqrt(1 - (b = b / e - 1) * b) + c
            },
            easeInOutCirc: function(a, b, c, d, e) {
                return (b /= e / 2) < 1 ? -d / 2 * (Math.sqrt(1 - b * b) - 1) + c : d / 2 * (Math.sqrt(1 - (b -= 2) * b) + 1) + c
            },
            easeInElastic: function(a, b, c, d, e) {
                a = 1.70158;
                var f = 0,
                    g = d;
                return 0 == b ? c : 1 == (b /= e) ? c + d : (f || (f = .3 * e), g < Math.abs(d) ? (g = d, a = f / 4) : a = f / (2 * Math.PI) * Math.asin(d / g), -g * Math.pow(2, 10 * (b -= 1)) * Math.sin(2 * (b * e - a) * Math.PI / f) + c)
            },
            easeOutElastic: function(a, b, c, d, e) {
                a = 1.70158;
                var f = 0,
                    g = d;
                return 0 == b ? c : 1 == (b /= e) ? c + d : (f || (f = .3 * e), g < Math.abs(d) ? (g = d, a = f / 4) : a = f / (2 * Math.PI) * Math.asin(d / g), g * Math.pow(2, -10 * b) * Math.sin(2 * (b * e - a) * Math.PI / f) + d + c)
            },
            easeInOutElastic: function(a, b, c, d, e) {
                a = 1.70158;
                var f = 0,
                    g = d;
                return 0 == b ? c : 2 == (b /= e / 2) ? c + d : (f || (f = .3 * e * 1.5), g < Math.abs(d) ? (g = d, a = f / 4) : a = f / (2 * Math.PI) * Math.asin(d / g), b < 1 ? -.5 * g * Math.pow(2, 10 * (b -= 1)) * Math.sin(2 * (b * e - a) * Math.PI / f) + c : g * Math.pow(2, -10 * (b -= 1)) * Math.sin(2 * (b * e - a) * Math.PI / f) * .5 + d + c)
            },
            easeInBack: function(a, b, c, d, e, f) {
                return void 0 == f && (f = 1.70158), d * (b /= e) * b * ((f + 1) * b - f) + c
            },
            easeOutBack: function(a, b, c, d, e, f) {
                return void 0 == f && (f = 1.70158), d * ((b = b / e - 1) * b * ((f + 1) * b + f) + 1) + c
            },
            easeInOutBack: function(a, b, c, d, e, f) {
                return void 0 == f && (f = 1.70158), (b /= e / 2) < 1 ? d / 2 * b * b * ((1 + (f *= 1.525)) * b - f) + c : d / 2 * ((b -= 2) * b * ((1 + (f *= 1.525)) * b + f) + 2) + c
            },
            easeInBounce: function(b, c, d, e, f) {
                return e - a.easing.easeOutBounce(b, f - c, 0, e, f) + d
            },
            easeOutBounce: function(a, b, c, d, e) {
                return (b /= e) < 1 / 2.75 ? 7.5625 * d * b * b + c : b < 2 / 2.75 ? d * (7.5625 * (b -= 1.5 / 2.75) * b + .75) + c : b < 2.5 / 2.75 ? d * (7.5625 * (b -= 2.25 / 2.75) * b + .9375) + c : d * (7.5625 * (b -= 2.625 / 2.75) * b + .984375) + c
            },
            easeInOutBounce: function(b, c, d, e, f) {
                return c < f / 2 ? .5 * a.easing.easeInBounce(b, 2 * c, 0, e, f) + d : .5 * a.easing.easeOutBounce(b, 2 * c - f, 0, e, f) + .5 * e + d
            }
        })
    }(jQuery),
    function(a) {
        a.fn.tn3.Gallery = function(b, c) {
            this.data = b, this.config = a.extend(!0, {}, a.fn.tn3.Gallery.config, c), this.initialized = !1, this.t = a.fn.tn3.translate, this.loader = new a.fn.tn3.External(c.external, this)
        }, a.fn.tn3.Gallery.config = {
            cssID: "tn3",
            active: [],
            inactive: [],
            iniAlbum: 0,
            iniImage: 0,
            imageClick: "next",
            startWithAlbums: !1,
            autoplay: !1,
            delay: 7e3,
            timerMode: "bar",
            timerSteps: 300,
            timerStepChar: "&#8226;",
            isFullScreen: !1,
            fullOnly: !1,
            width: null,
            height: null,
            mouseWheel: !0,
            keyNavigation: "fullscreen",
            timerOverStop: !0,
            responsive: !1,
            useNativeFullScreen: !0,
            autohideControls: !1,
            autohideOver: !0,
            overFadeDuration: 300,
            spinjs: null,
            image: {},
            thumbnailer: {},
            touch: {}
        }, a.fn.tn3.Gallery.prototype = {
            config: null,
            $c: null,
            $tn3: null,
            data: null,
            thumbnailer: null,
            imager: null,
            cAlbum: null,
            timer: null,
            items: null,
            initialized: null,
            n: null,
            albums: null,
            loader: null,
            fso: null,
            timerSize: null,
            special: null,
            areHidden: !1,
            $inImage: null,
            isPlaying: !1,
            cparent: null,
            spinner: null,
            showInit: !1,
            init: function(c, d) {
                if (this.$c = c, !(this.loader.reqs > 0 || 0 == this.data.length || d)) {
                    this.trigger("init_start"), this.config.useNativeFullScreen = this.config.useNativeFullScreen && b.supportsFullScreen, this.config.fullOnly && this.$c.show(), this.$c.css("visibility", "visible"), this.$tn3 = this.$c.find("." + this.config.cssID + "-gallery");
                    var e = this.config.initValues = {
                        width: this.$tn3.width(),
                        height: this.$tn3.height()
                    };
                    this.$tn3.css("float", "left"), e.wDif = this.$tn3.outerWidth(!0) - e.width, e.hDif = this.$tn3.outerHeight(!0) - e.height, this.config.mouseWheel && this.initMouseWheel();
                    var f = this;
                    this.timer = new a.fn.tn3.Timer(this.$c, this.config.delay, this.config.timerSteps), this.$c.bind("tn3_timer_end", function() {
                        f.show("next")
                    }), this.special = {
                        rv: [],
                        rh: [],
                        v: [],
                        h: [],
                        vi: [],
                        hi: [],
                        o: [],
                        x: {}
                    }, this.parseLayout(), this.center(), a.each(this.items, function(b, c) {
                        switch (b) {
                            case "next":
                                c.click(function(a) {
                                    f.show("next"), a.stopPropagation()
                                }), c.attr("title", f.t("Next Image"));
                                break;
                            case "prev":
                                c.click(function(a) {
                                    f.show("prev"), a.stopPropagation()
                                }), c.attr("title", f.t("Previous Image"));
                                break;
                            case "next-page":
                                c.click(function() {
                                    f.items.thumbs && f.thumbnailer.next(!0)
                                }), c.attr("title", f.t("Next Page"));
                                break;
                            case "prev-page":
                                c.click(function() {
                                    f.items.thumbs && f.thumbnailer.prev(!0)
                                }), c.attr("title", f.t("Previous Page"));
                                break;
                            case "thumbs":
                                f.config.thumbnailer.cssID = f.config.cssID, f.config.thumbnailer.initValues = {
                                    width: c.width(),
                                    height: c.height()
                                }, f.config.thumbnailer.initValues.vertical = c.width() <= c.height(), c.bind("tn_click", function(a) {
                                    f.show(a.n)
                                }).bind("tn_over", function() {
                                    f.timer.pause(!0)
                                }).bind("tn_out", function() {
                                    f.timer.pause(!1)
                                }).bind("tn_error", function(a) {
                                    f.trigger("error", a)
                                });
                                break;
                            case "image":
                                f.config.image.cssID = f.config.cssID, f.config.image.initValues = {
                                    width: c.width(),
                                    height: c.height()
                                }, c.bind("img_click", function(a) {
                                    switch (f.config.imageClick) {
                                        case "next":
                                            f.show("next");
                                            break;
                                        case "fullscreen":
                                            f.fullscreen(!0);
                                            break;
                                        case "url":
                                            (a = f.data[f.cAlbum].imgs[a.n].url.replace(/&amp;/g, "&")) && (window.location = a)
                                    }
                                }).bind("img_load_start", function() {
                                    f.displayPreloader(!0)
                                }).bind("img_load_end", function(a) {
                                    f.n = a.n, f.displayPreloader(!1), f.items.timer && f.items.timer.hide(), f.$inImage && f.$inImage.hide()
                                }).bind("img_transition", function(a) {
                                    f.setTextValues(!1, "image"), f.items.thumbs && f.thumbnailer.thumbClick(f.n), f.$inImage && f.imager.cached[a.n].isImage && f.$inImage.fadeIn(300), f.items.count && f.items.count.text(f.n + 1 + "/" + f.data[f.cAlbum].imgs.length), f.isPlaying && f.timer.start(), f.special.o.length > 0 && f.config.autohideOver && f.hideElements(), f.config.autohideControls && (f.items.prev && f.items.prev[0 == a.n ? "hide" : "show"](), f.items.next && f.items.next[a.n == f.imager.data.length - 1 ? "hide" : "show"]())
                                }).bind("img_enter", function() {
                                    f.imageEnter()
                                }).bind("img_leave", function() {
                                    f.imageLeave()
                                }).bind("img_resize", function(a) {
                                    f.$inImage && (f.$inImage.width(a.w).height(a.h).css("left", a.left).css("top", a.top), f.center(), f.imager.bindMouseEvents(f.$inImage))
                                }).bind("img_error", function(a) {
                                    f.trigger("error", a)
                                });
                                break;
                            case "preloader":
                                f.config.spinjs && c.find("img").remove(), f.displayPreloader(!1);
                                break;
                            case "timer":
                                var d = c.width() > c.height() ? "width" : "height";
                                f.$c.bind("timer_tick", function(a) {
                                    if ("char" == f.config.timerMode) {
                                        for (var b = f.config.timerStepChar; --a.tick;) b += f.config.timerStepChar;
                                        f.items.timer.html(b)
                                    } else f.items.timer[d](f.timerSize / a.totalTicks * a.tick);
                                    f.trigger(a.type, a)
                                }).bind("timer_start", function(a) {
                                    f.timerSize = f.$inImage[d](), f.items.timer.fadeIn(300), f.items.play && f.items.play.addClass(f.config.cssID + "-play-active"), f.trigger(a.type, a)
                                }).bind("timer_end timer_stop", function(a) {
                                    f.items.timer.hide(), "timer_end" == a.type && f.n == f.data[f.cAlbum].imgs.length - 1 && f.trigger("autoplay_finish"), f.trigger(a.type, a)
                                }), c.hide();
                                break;
                            case "play":
                                c.click(function(a) {
                                    var b = {
                                        id: "play",
                                        execute: !0
                                    };
                                    f.trigger("control", b), f.isPlaying ? (b.execute && (f.timer.stop(), c.removeClass(f.config.cssID + "-play-active"), c.attr("title", f.t("Start Slideshow"))), f.isPlaying = !1) : (b.execute && (f.timer.start(), c.addClass(f.config.cssID + "-play-active"), c.attr("title", f.t("Stop Slideshow"))), f.isPlaying = !0), a.stopPropagation()
                                }), c.attr("title", f.t("Start Slideshow"));
                                break;
                            case "count":
                                break;
                            case "albums":
                                f.albums = new a.fn.tn3.Albums(f.data, c, f.config.cssID), c.hide(), c.bind("albums_binit", function(a) {
                                    f.trigger(a.type, a)
                                }).bind("albums_click", function(a) {
                                    f.showAlbum(a.n), f.trigger(a.type, a)
                                }).bind("albums_init", function(a) {
                                    f.timer.pause(!0), f.trigger(a.type, a)
                                }).bind("albums_error", function(a) {
                                    f.trigger("error", a)
                                }).bind("albums_close", function() {
                                    f.timer.pause(!1)
                                });
                                break;
                            case "album":
                                break;
                            case "albums-next":
                                f.albums && f.albums.setControl("next", c), c.attr("title", f.t("Next Album Page"));
                                break;
                            case "albums-prev":
                                f.albums && f.albums.setControl("prev", c), c.attr("title", f.t("Previous Album Page"));
                                break;
                            case "albums-close":
                                f.albums && f.albums.setControl("close", c), c.attr("title", f.t("Close"));
                                break;
                            case "show-albums":
                                c.click(function(a) {
                                    f.items.albums && f.albums.show(0, f.cAlbum, !1, !0), a.stopPropagation()
                                }), c.attr("title", f.t("Album List"));
                                break;
                            case "fullscreen":
                                c.click(function(a) {
                                    var b = {
                                        id: "fullscreen",
                                        execute: !0
                                    };
                                    f.trigger("control", b), b.execute && f.fullscreen(!0), a.stopPropagation()
                                }), c.attr("title", f.t("Maximize"));
                                break;
                            default:
                                f.special.x[b] && c.click(function(a) {
                                    var d = !f.items[f.special.x[b]].is(":visible"),
                                        e = {
                                            id: b,
                                            execute: !0,
                                            active: d
                                        };
                                    f.trigger("control", e), e.execute && (d ? c.addClass(f.config.cssID + "-" + b + "-active") : c.removeClass(f.config.cssID + "-" + b + "-active"), f.items[f.special.x[b]].toggle()), a.stopPropagation()
                                })
                        }
                    }), null === this.config.width && null === this.config.height || (null == this.config.width && (this.config.width = this.config.initValues.width), null == this.config.height && (this.config.height = this.config.initValues.height), this.resize(this.config.width, this.config.height)), e = Math.min(this.config.iniAlbum, this.data.length - 1), !1 !== this.config.responsive && this.initResponsive(this.config.responsive), this.initialized = !0, this.config.startWithAlbums && this.data.length > 1 && this.items.albums ? this.albums.show() : this.showAlbum(e, this.config.iniImage), this.config.isFullScreen && this.onFullResize(), "always" == this.config.keyNavigation && a(document).bind("keyup", a.proxy(this.listenKeys, this)), this.config.autoplay && (this.items.play ? this.items.play.click() : this.timer.start()), this.trigger("init")
                }
            },
            parseLayout: function() {
                var b, c, d = this.items = {},
                    e = this.config,
                    f = e.active,
                    g = e.inactive,
                    h = e.cssID.length + 1,
                    i = this,
                    j = /MSIE/.test(navigator.userAgent);
                this.$c.find("div[class^='" + e.cssID + "-']").each(function() {
                    if (b = a(this), c = b.attr("class").split(" ")[0].substr(h), -1 != a.inArray(c, g) ? b.remove() : 0 == f.length || -1 != a.inArray(c, f) ? d[c] = b : "gallery" != c && b.remove(), b.parent().hasClass(e.cssID + "-image")) {
                        if (!i.$inImage) {
                            if (i.$inImage = a('<div class="tn3-in-image"></div>'), b.parent().append(i.$inImage), j) {
                                var k = a("<div />");
                                k.css("background-color", "#fff").css("opacity", 0).css("width", "100%").css("height", "100%"), k.appendTo(i.$inImage)
                            }
                            i.$inImage.css("position", "absolute").width(d.image.width()).height(d.image.height())
                        }
                        b.appendTo(i.$inImage)
                    } - 1 != this.className.indexOf("tn3_") && i.addSpecial(c, this.className)
                })
            },
            addSpecial: function(a, b) {
                for (var c, d = b.split(" "), e = 0; e < d.length; e++) "tn3" == (c = d[e].split("_"))[0] && ("x" == c[1] ? this.special.x[a] = c[2] : (this.special[c[1]].push(a), "rh" != c[1] && "rv" != c[1] || (this.config.initValues[a] = {
                    w: this.items[a].width(),
                    h: this.items[a].height()
                })))
            },
            initHover: function(a, b) {
                var c = this;
                a.hover(function() {
                    a.addClass(c.config.cssID + "-" + b + "-over")
                }, function() {
                    a.removeClass(c.config.cssID + "-" + b + "-over")
                })
            },
            setTextValues: function(b, c) {
                var d, e, f, g = c + "-";
                for (f in this.items) 0 == f.indexOf(g) && "info" != (d = f.substr(g.length)) && "prev" != d && "next" != d && ((e = "image" == c ? this.data[this.cAlbum].imgs[this.n] : this.data[this.cAlbum]) && void 0 != e[d] ? e[d] = a.trim(e[d]) : (e = {})[d] = "", d = {
                    field: d,
                    text: e[d],
                    data: e
                }, this.trigger("set_text", d), b || void 0 == d.text || 0 == d.text.length ? (this.items[f].html(""), this.items[f].hide()) : (this.items[f].html(d.text), this.items[f].show()))
            },
            show: function(a, b) {
                this.timer.stop(), this.showInit = !0, this.imager && this.imager.show(a), b && this.fullscreen()
            },
            setAlbumData: function(a, b) {
                if (b) this.trigger("error", {
                    description: b
                });
                else {
                    for (var c = 0, d = a.length; c < d; c++) this.data.push(a[c]);
                    this.$c && this.init(this.$c, this.config.fullOnly)
                }
            },
            setImageData: function(a, b, c) {
                c ? this.trigger("error", {
                    description: c
                }) : (this.displayPreloader(!1), a = {
                    data: a
                }, this.trigger("image_data", a), this.data[b].imgs = a.data, this.cAlbum == b && this.rebuild(a.data, this.showInit ? 0 : this.config.iniImage))
            },
            showAlbum: function(a, b, c) {
                if (this.initialized) {
                    if (a > this.data.length) return;
                    this.timer.stop(), this.cAlbum = a, this.albums && this.albums.hide(), void 0 === this.data[this.cAlbum].imgs ? this.loader ? (this.loader.getImages(this.data[this.cAlbum].adata, this.cAlbum), this.displayPreloader(!0)) : this.trigger("error", {
                        description: "Wrong album id"
                    }) : this.rebuild(this.data[this.cAlbum].imgs, b)
                } else this.config.iniAlbum = a, this.config.iniImage = b, this.init(this.$c, !1);
                c && this.fullscreen()
            },
            rebuild: function(b, c) {
                this.items.thumbs && (this.thumbnailer ? this.thumbnailer.rebuild(b) : this.thumbnailer = new a.fn.tn3.Thumbnailer(this.items.thumbs, b, this.config.thumbnailer)), this.items.image && (this.imager ? this.imager.rebuild(b) : this.imager = new a.fn.tn3.Imager(this.items.image, b, this.config.image)), this.setTextValues(!0, "image"), this.setTextValues(!1, "album"), this.trigger("rebuild", {
                    album: this.cAlbum
                }), this.show(null == c ? 0 : c)
            },
            showElements: function(b) {
                if (this.areHidden) {
                    var c, d = this;
                    a.each(this.special.o, function(e, f) {
                        if (d.config.autohideControls) {
                            if ("prev" == f && 0 == d.n) return !0;
                            if ("next" == f && d.n == d.imager.data.length - 1) return !0
                        }(c = d.items[f]).show(), b && a.support.opacity && (c.stop(!0), c.css("opacity", 0), c.animate({
                            opacity: 1
                        }, {
                            duration: b,
                            queue: !1
                        }))
                    }), this.areHidden = !1
                }
            },
            hideElements: function(b) {
                if (!this.areHidden) {
                    var c, d = this;
                    a.each(this.special.o, function(e, f) {
                        c = d.items[f], b && a.support.opacity ? (c.stop(!0), c.animate({
                            opacity: 0
                        }, {
                            duration: b,
                            complete: function() {
                                c.hide()
                            },
                            queue: !1
                        })) : c.hide()
                    }), this.areHidden = !0
                }
            },
            setData: function(a) {
                this.items.thumbs && (this.thumbnailer.data = a), this.items.imager && (this.imager.data = a)
            },
            exitFullScreen: function() {
                !b.isFullScreen() && this.config.isFullScreen && this.fullscreen()
            },
            nativeFS: !1,
            fullscreen: function(c) {
                this.config.isFullScreen ? (this.config.useNativeFullScreen && this.nativeFS ? (b.cancelFullScreen(this.$c), document.removeEventListener(b.fullScreenEventName, a.proxy(this.exitFullScreen, this))) : (a(window).unbind("resize", this.onFullResize), a.tn3unblock()), !1 !== this.config.responsive ? this.initResponsive(this.config.responsive) : null !== this.config.width || null !== this.config.height ? this.resize(this.config.width, this.config.height) : this.resize(this.config.initValues.width, this.config.initValues.height), this.items.fullscreen && (this.items.fullscreen.removeClass(this.config.cssID + "-fullscreen-active"), this.items.fullscreen.attr("title", this.t("Maximize"))), this.config.fullOnly && this.$c.hide(), this.config.isFullScreen = !1, this.trigger("fullscreen", {
                    fullscreen: !1
                }), "fullscreen" == this.config.keyNavigation && a(document).unbind("keyup", this.listenKeys)) : (this.config.useNativeFullScreen && c ? (document.addEventListener(b.fullScreenEventName, a.proxy(this.exitFullScreen, this), !0), b.requestFullScreen(this.$tn3), this.nativeFS = !0) : (a.tn3block({
                    message: this.$tn3,
                    cssID: this.config.cssID
                }), a(window).bind("resize", a.proxy(this.onFullResize, this)), this.nativeFS = !1), this.config.fullOnly && this.$c.show(), this.config.isFullScreen = !0, this.items.fullscreen && (this.items.fullscreen.addClass(this.config.cssID + "-fullscreen-active"), this.items.fullscreen.attr("title", this.t("Minimize"))), this.onFullResize(), "fullscreen" == this.config.keyNavigation && a(document).bind("keyup", a.proxy(this.listenKeys, this)), this.trigger("fullscreen", {
                    fullscreen: !0
                }))
            },
            listenKeys: function(a) {
                if (70 == a.keyCode) this.items.fullscreen.click();
                else if (this.items.albums && this.albums.enabled) {
                    var b = 0;
                    switch (a.keyCode) {
                        case 27:
                            this.albums.hide();
                            break;
                        case 39:
                            b = "r";
                            break;
                        case 37:
                            b = "l";
                            break;
                        case 38:
                            b = "u";
                            break;
                        case 40:
                            b = "d";
                            break;
                        case 32:
                            b = "p"
                    }
                    b && this.albums.select(b)
                } else switch (a.keyCode) {
                    case 27:
                        this.config.isFullScreen && this.fullscreen(!0);
                        break;
                    case 39:
                        this.show("next");
                        break;
                    case 37:
                        this.show("prev");
                        break;
                    case 38:
                        this.items.albums && this.albums.show(0, this.cAlbum, !1, !0);
                        break;
                    case 32:
                        this.items.play.click()
                }
            },
            onFullResize: function() {
                if (this.config.useNativeFullScreen && this.nativeFS) this.resize(window.screen.width, window.screen.height);
                else {
                    var b = a(window),
                        c = b.width();
                    b = b.height(), c -= this.config.initValues.wDif, b -= this.config.initValues.hDif, this.resize(c, b)
                }
            },
            resize: function(b, c) {
                this.$tn3.width(b).height(c);
                var d, e, f = b - this.config.initValues.width,
                    g = c - this.config.initValues.height,
                    h = this;
                this.items.image && (d = this.config.image.initValues.width + f, e = this.config.image.initValues.height + g, this.imager ? this.imager.setSize(d, e) : (this.items.image.width(d).height(e), this.$inImage.width(d).height(e))), this.items.thumbs && (d = this.config.thumbnailer.initValues.width + f, e = this.config.thumbnailer.initValues.height + g, this.thumbnailer ? this.thumbnailer.setSize(d, e) : this.config.thumbnailer.initValues.vertical ? this.items.thumbs.height(e) : this.items.thumbs.width(d)), this.items.albums && (d = this.albums.initValues.width + f, e = this.albums.initValues.height + g, this.albums.changeSize(f, g)), a.each(this.special.rh, function(a, b) {
                    h.items[b].width(h.config.initValues[b].w + f)
                }), a.each(this.special.rv, function(a, b) {
                    h.items[b].height(h.config.initValues[b].h + g)
                }), this.center()
            },
            center: function() {
                var b, c = this,
                    d = c.items.image.position();
                a.each(this.special.v, function(a, d) {
                    (b = c.items[d]).css("top", (b.parent().height() - b.height()) / 2)
                }), a.each(this.special.h, function(a, d) {
                    (b = c.items[d]).css("left", (b.parent().width() - b.width()) / 2)
                }), a.each(this.special.vi, function(a, e) {
                    (b = c.items[e]).css("top", d.top + (c.items.image.height() - b.height()) / 2)
                }), a.each(this.special.hi, function(a, e) {
                    (b = c.items[e]).css("left", d.left + (c.items.image.width() - b.width()) / 2)
                }), this.spinner && (this.displayPreloader(!0), this.displayPreloader(!1))
            },
            trigger: function(b, c) {
                var d, e = a.Event("tn3_" + b);
                for (d in c) e[d] = c[d];
                c && void 0 != c.type && (e.type = "tn3_" + b), e.source = this, this.$c.trigger(e), this.config[b] && this.config[b].call(this, e);
                for (d in c) c[d] = e[d]
            },
            initMouseWheel: function() {
                var a = this,
                    b = function(b) {
                        a.show((b.originalEvent.detail ? -b.originalEvent.detail : b.originalEvent.wheelDelta) > 0 ? "prev" : "next"), b.preventDefault()
                    };
                this.$tn3.bind("mousewheel", b), this.$tn3.bind("DOMMouseScroll", b)
            },
            initResponsive: function(c) {
                var d;
                if ("number" == typeof c) {
                    var e = a(window);
                    d = function() {
                        var a = e.width(),
                            b = e.height();
                        this.resize(a * c / 100, b * c / 100)
                    }
                } else if (a.isFunction(c)) d = c;
                else if (!1 !== c) {
                    var f = this.$c.parent(),
                        g = (null == this.config.width ? this.config.initValues.width : this.config.width) / (null == this.config.height ? this.config.initValues.height : this.config.height),
                        h = f.width(),
                        i = f.height();
                    d = "enabled" == c ? function() {
                        h = f.width(), i = f.height(), this.resize(h, i)
                    } : "height" == c ? function() {
                        i = f.height(), h = i * g, this.resize(h, i)
                    } : function() {
                        h = f.width(), i = h / g, this.resize(h, i)
                    }
                }
                var j = this,
                    k = function() {
                        j.config.useNativeFullScreen ? b.isFullScreen() || a.proxy(d, j)() : a.proxy(d, j)()
                    };
                a(window).bind("resize", k), k()
            },
            replaceMenu: function(b, c) {
                var d = '<div style="position:absolute;background-color:#fff;color: #000;padding:0px 4px 0px 4px;z-index:1010;font-family:sans-serif;font-size:12px;">&copy; <a href="' + c + '">' + b + "</a></div>";
                this.$tn3.bind("contextmenu", function(a) {
                    a.preventDefault()
                }).bind("mousedown", function(b) {
                    if (3 == b.which) {
                        var e = a(d);
                        a("body").append(e), e.css("left", b.pageX).css("top", b.pageY), e.find("a").mouseup(function(a) {
                            window.location = c, e.unbind(a)
                        }), a("body").mouseup(function(b) {
                            e.remove(), a("body").unbind(b)
                        })
                    }
                })
            },
            imageEnter: function() {
                this.config.timerOverStop && this.timer.pause(!0), this.special.o.length > 0 && this.showElements(this.config.overFadeDuration)
            },
            imageLeave: function() {
                this.config.timerOverStop && this.timer.pause(!1), this.special.o.length > 0 && this.hideElements(this.config.overFadeDuration)
            },
            displayPreloader: function(a) {
                this.items.preloader && (a ? (this.items.preloader.show(), this.config.spinjs && (this.spinner ? this.spinner.spin(this.items.preloader[0]) : this.spinner = new Spinner(this.config.spinjs).spin(this.items.preloader[0]))) : (this.spinner && this.spinner.stop(), this.items.preloader.hide()))
            }
        };
        var b = {
                supportsFullScreen: !1,
                isFullScreen: function() {
                    return !1
                },
                requestFullScreen: function() {},
                cancelFullScreen: function() {},
                fullScreenEventName: "",
                prefix: ""
            },
            c = "webkit moz o ms khtml".split(" ");
        if (void 0 !== document.cancelFullScreen) b.supportsFullScreen = !0;
        else
            for (var d = 0, e = c.length; d < e; d++)
                if (b.prefix = c[d], void 0 !== document[b.prefix + "CancelFullScreen"]) {
                    b.supportsFullScreen = !0;
                    break
                }
        b.supportsFullScreen && (b.fullScreenEventName = b.prefix + "fullscreenchange", b.isFullScreen = function() {
            switch (this.prefix) {
                case "":
                    return document.fullScreen;
                case "webkit":
                    return document.webkitIsFullScreen;
                default:
                    return document[this.prefix + "FullScreen"]
            }
        }, b.requestFullScreen = function(a) {
            return "webkit" === this.prefix && a.css("float", "none"), "" === this.prefix ? a[0].requestFullScreen() : a[0][this.prefix + "RequestFullScreen"]()
        }, b.cancelFullScreen = function(a) {
            return "webkit" === this.prefix && a.css("float", "left"), "" === this.prefix ? document.cancelFullScreen() : document[this.prefix + "CancelFullScreen"]()
        })
    }(jQuery),
    function(a, b, c) {
        function d(a, c) {
            var d, e = b.createElement(a || "div");
            for (d in c) e[d] = c[d];
            return e
        }

        function e(a) {
            for (var b = 1, c = arguments.length; b < c; b++) a.appendChild(arguments[b]);
            return a
        }

        function f(a, b, c, d) {
            var e = ["opacity", b, ~~(100 * a), c, d].join("-");
            c = .01 + c / d * 100, d = Math.max(1 - (1 - a) / b * (100 - c), a);
            var f = k.substring(0, k.indexOf("Animation")).toLowerCase();
            return f = f && "-" + f + "-" || "", m[e] || (n.insertRule("@" + f + "keyframes " + e + "{0%{opacity:" + d + "}" + c + "%{opacity:" + a + "}" + (c + .01) + "%{opacity:1}" + (c + b) % 100 + "%{opacity:" + a + "}100%{opacity:" + d + "}}", n.cssRules.length), m[e] = 1), e
        }

        function g(a, b) {
            var d, e, f = a.style;
            if (f[b] !== c) return b;
            for (b = b.charAt(0).toUpperCase() + b.slice(1), e = 0; e < l.length; e++)
                if (d = l[e] + b, f[d] !== c) return d
        }

        function h(a, b) {
            for (var c in b) a.style[g(a, c) || c] = b[c];
            return a
        }

        function i(a) {
            for (var b = 1; b < arguments.length; b++) {
                var d, e = arguments[b];
                for (d in e) a[d] === c && (a[d] = e[d])
            }
            return a
        }

        function j(a) {
            for (var b = {
                    x: a.offsetLeft,
                    y: a.offsetTop
                }; a = a.offsetParent;) b.x += a.offsetLeft, b.y += a.offsetTop;
            return b
        }
        var k, l = ["webkit", "Moz", "ms", "O"],
            m = {},
            n = function() {
                var a = d("style", {
                    type: "text/css"
                });
                return e(b.getElementsByTagName("head")[0], a), a.sheet || a.styleSheet
            }(),
            o = {
                lines: 12,
                length: 7,
                width: 5,
                radius: 10,
                rotate: 0,
                corners: 1,
                color: "#000",
                speed: 1,
                trail: 100,
                opacity: .25,
                fps: 20,
                zIndex: 2e9,
                className: "spinner",
                top: "auto",
                left: "auto"
            },
            p = function a(b) {
                if (!this.spin) return new a(b);
                this.opts = i(b || {}, a.defaults, o)
            };
        p.defaults = {}, i(p.prototype, {
                spin: function(a) {
                    this.stop();
                    var b, c, e = this,
                        f = e.opts,
                        g = e.el = h(d(0, {
                            className: f.className
                        }), {
                            position: "relative",
                            width: 0,
                            zIndex: f.zIndex
                        }),
                        i = f.radius + f.length + f.width;
                    if (a && (a.insertBefore(g, a.firstChild || null), c = j(a), b = j(g), h(g, {
                            left: ("auto" == f.left ? c.x - b.x + (a.offsetWidth >> 1) : parseInt(f.left, 10) + i) + "px",
                            top: ("auto" == f.top ? c.y - b.y + (a.offsetHeight >> 1) : parseInt(f.top, 10) + i) + "px"
                        })), g.setAttribute("aria-role", "progressbar"), e.lines(g, e.opts), !k) {
                        var l = 0,
                            m = f.fps,
                            n = m / f.speed,
                            o = (1 - f.opacity) / (n * f.trail / 100),
                            p = n / f.lines;
                        ! function a() {
                            l++;
                            for (var b = f.lines; b; b--) e.opacity(g, f.lines - b, Math.max(1 - (l + b * p) % n * o, f.opacity), f);
                            e.timeout = e.el && setTimeout(a, ~~(1e3 / m))
                        }()
                    }
                    return e
                },
                stop: function() {
                    var a = this.el;
                    return a && (clearTimeout(this.timeout), a.parentNode && a.parentNode.removeChild(a), this.el = c), this
                },
                lines: function(a, b) {
                    function c(a, c) {
                        return h(d(), {
                            position: "absolute",
                            width: b.length + b.width + "px",
                            height: b.width + "px",
                            background: a,
                            boxShadow: c,
                            transformOrigin: "left",
                            transform: "rotate(" + ~~(360 / b.lines * i + b.rotate) + "deg) translate(" + b.radius + "px,0)",
                            borderRadius: (b.corners * b.width >> 1) + "px"
                        })
                    }
                    for (var g, i = 0; i < b.lines; i++) g = h(d(), {
                        position: "absolute",
                        top: 1 + ~(b.width / 2) + "px",
                        transform: b.hwaccel ? "translate3d(0,0,0)" : "",
                        opacity: b.opacity,
                        animation: k && f(b.opacity, b.trail, i, b.lines) + " " + 1 / b.speed + "s linear infinite"
                    }), b.shadow && e(g, h(c("#000", "0 0 4px #000"), {
                        top: "2px"
                    })), e(a, e(g, c(b.color, "0 0 1px rgba(0,0,0,.1)")));
                    return a
                },
                opacity: function(a, b, c) {
                    b < a.childNodes.length && (a.childNodes[b].style.opacity = c)
                }
            }),
            function() {
                function a(a, b) {
                    return d("<" + a + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', b)
                }
                var b = h(d("group"), {
                    behavior: "url(#default#VML)"
                });
                !g(b, "transform") && b.adj ? (n.addRule(".spin-vml", "behavior:url(#default#VML)"), p.prototype.lines = function(b, c) {
                    function d() {
                        return h(a("group", {
                            coordsize: i + " " + i,
                            coordorigin: -g + " " + -g
                        }), {
                            width: i,
                            height: i
                        })
                    }

                    function f(b, f, i) {
                        e(k, e(h(d(), {
                            rotation: 360 / c.lines * b + "deg",
                            left: ~~f
                        }), e(h(a("roundrect", {
                            arcsize: c.corners
                        }), {
                            width: g,
                            height: c.width,
                            left: c.radius,
                            top: -c.width >> 1,
                            filter: i
                        }), a("fill", {
                            color: c.color,
                            opacity: c.opacity
                        }), a("stroke", {
                            opacity: 0
                        }))))
                    }
                    var g = c.length + c.width,
                        i = 2 * g,
                        j = 2 * -(c.width + c.length) + "px",
                        k = h(d(), {
                            position: "absolute",
                            top: j,
                            left: j
                        });
                    if (c.shadow)
                        for (j = 1; j <= c.lines; j++) f(j, -2, "progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
                    for (j = 1; j <= c.lines; j++) f(j);
                    return e(b, k)
                }, p.prototype.opacity = function(a, b, c, d) {
                    a = a.firstChild, d = d.shadow && d.lines || 0, a && b + d < a.childNodes.length && (a = a && a.firstChild) && (a.opacity = c)
                }) : k = g(b, "animation")
            }(), "function" == typeof define && define.amd ? define(function() {
                return p
            }) : a.Spinner = p
    }(window, document),
    function(a) {
        a.fn.tn3.Imager = function(b, c, d) {
            this.$c = b, this.data = c, this.config = a.extend(!0, {}, a.fn.tn3.Imager.config, d), this.init()
        }, a.fn.tn3.Imager.config = {
            transitions: null,
            defaultTransition: {
                type: "slide"
            },
            random: !1,
            cssID: "tn3",
            maxZoom: 1.4,
            crop: !1,
            clickEvent: "click",
            idleDelay: 3e3,
            stretch: !0,
            dif: 0
        }, a.fn.tn3.Imager.prototype = {
            config: null,
            $c: !1,
            $ins: null,
            data: !1,
            cached: null,
            active: -1,
            $active: !1,
            $buffer: !1,
            isInTransition: !1,
            ts: null,
            cDim: null,
            qid: null,
            currentlyLoading: null,
            side: null,
            $ic: null,
            $binder: null,
            infoID: null,
            lastEnter: !1,
            mouseCoor: {
                x: 0,
                y: 0
            },
            mouseIsOver: !1,
            init: function() {
                this.$c.css("overflow", "hidden"), this.$c.css("position", "relative"), this.$ins = a('<div class="' + this.config.cssID + '-image-ins" style="position:absolute;width:100%;height:100%;"></div>'), this.$c.prepend(this.$ins), this.bindMouseEvents(this.$c), this.cached = [], this.ts = new a.fn.tn3.Transitions(this.config.transitions, this.config.defaultTransition, this.config.random, this, "onTransitionEnd")
            },
            bindMouseEvents: function(b) {
                this.unbindMouseEvents();
                var c = this;
                b.hover(function() {
                    c.mouseIsOver = !0, c.enterLeave("enter"), c.startIdle(), a(document).mousemove(a.proxy(c.onMouseMove, c))
                }, function() {
                    c.mouseIsOver = !1, c.enterLeave("leave"), c.stopIdle(), a(document).unbind("mousemove", c.onMouseMove)
                }), b[this.config.clickEvent](function(a) {
                    -1 == c.active || c.isInTransition || "A" != a.target.tagName.toUpperCase() && c.trigger("click", {
                        n: c.active
                    })
                }), this.$binder = b
            },
            unbindMouseEvents: function() {
                this.$binder && this.$binder.unbind("mouseenter mouseleave " + this.config.clickEvent), a(document).unbind("mousemove", this.onMouseMove), this.stopIdle()
            },
            startIdle: function() {
                this.stopIdle();
                var a = this;
                this.config.idleDelay > 0 && (this.infoID = setTimeout(function() {
                    a.enterLeave("leave"), a.stopIdle()
                }, this.config.idleDelay))
            },
            onMouseMove: function(a) {
                this.mouseCoor = {
                    x: a.pageX,
                    y: a.pageY
                }, this.isInTransition || (this.infoID || this.enterLeave("enter"), this.startIdle())
            },
            stopIdle: function() {
                clearTimeout(this.infoID), this.infoID = null
            },
            enterLeave: function(a) {
                this.lastEnter != a && this.trigger(a), this.lastEnter = a
            },
            show: function(b) {
                this.isInTransition ? this.qid = b : (this.qid = null, "next" == b ? (b = this.active + 1 < this.data.length ? this.active + 1 : 0, this.side = "left") : "prev" == b ? (b = this.active > 0 ? this.active - 1 : this.data.length - 1, this.side = "right") : this.side = this.active > b ? "right" : "left", this.data[b] && (this.trigger("load_start", {
                    n: b
                }), this.$buffer = a('<div class="' + this.config.cssID + '-image-in" style="position:absolute;overflow:hidden;"></div>'), this.$buffer.css("visibility", "hidden"), this.$ins.prepend(this.$buffer), void 0 != this.cached[this.currentlyLoading] && (this.cached[this.currentlyLoading].init = !1), void 0 != this.cached[b] ? "loaded" == this.cached[b].status ? this.initImage(b) : (this.cached[b].init = !0, this.currentlyLoading = b) : this.startLoading(b, !0)))
            },
            startLoading: function(b, c) {
                var d = "number" == typeof b ? b : "next" == b ? this.active + 1 : this.active - 1;
                void 0 != this.cached[d] && "loaded" == this.cached[d].status || void 0 == this.data[d] || (this.cached[d] = {
                    isImage: !0,
                    status: "loading",
                    init: c
                }, this.currentlyLoading = d, void 0 != this.data[d].content ? (this.cached[d].isImage = !1, this.onCacheLoad(a(a.trim(this.data[d].content)), d)) : this.cached[d].loader = new a.fn.tn3.ImageLoader(this.data[d].img, this, this.onCacheLoad, [d]))
            },
            onCacheLoad: function(a, b, c) {
                this.cached[b].status = "loaded", this.cached[b].isImage && a.attr("alt", this.data[b].alt), this.cached[b].$content = a, c && this.trigger("error", {
                    description: c,
                    n: b
                }), this.cached[b].init && this.initImage(b)
            },
            initImage: function(b) {
                var c = this.cached[b].$content;
                this.currentlyLoading = null, this.active = b, this.cDim || (this.cDim = {
                    w: this.$c.width(),
                    h: this.$c.height()
                }), this.$buffer.width(this.cDim.w).height(this.cDim.h);
                var d = a('<div class="' + this.config.cssID + '-full-image" style="position:absolute"></div>');
                c.appendTo(d), this.$buffer.append(d), this.$buffer.data("ic", d), this.$buffer.data("img", c), this.resize(this.$buffer), d = [!0], this.trigger("load_end", {
                    n: b,
                    content: c,
                    isImage: this.cached[b].isImage,
                    doTransition: d
                }), d[0] && this.initTransition()
            },
            initTransition: function() {
                this.$buffer.css("visibility", "visible"), 0 != this.$active ? (this.isInTransition = !0, this.unbindMouseEvents(), this.mouseIsOver ? a(document).mousemove(a.proxy(this.onMouseMove, this)) : this.mouseCoor = {
                    x: 0,
                    y: 0
                }, this.lastEnter = "leave", this.$active.find("video").length > 0 && this.config.transitions > 0 && "translate" === this.config.transitions[0].type ? this.ts.start(this.$active, this.$buffer, this.side, !0) : this.ts.start(this.$active, this.$buffer, this.side)) : (this.$active = this.$buffer, this.trigger("transition", {
                    n: this.active
                })), this.startLoading("right" == this.side ? "prev" : "next", !1)
            },
            setSize: function(a, b) {
                this.isInTransition && this.ts.stop(this.$active, this.$buffer, this.ts.config), this.$c.width(a).height(b), this.cDim = {
                    w: this.$c.width(),
                    h: this.$c.height()
                }, this.$active && (this.$active.width(a).height(b), this.resize(this.$active))
            },
            resize: function(a) {
                void 0 == a.data("img") ? this.trigger("resize", {
                    w: this.cDim.w,
                    h: this.cDim.h,
                    left: 0,
                    top: 0
                }) : this.cached[this.active].isImage ? this.resizeImage(a) : this.resizeContent(a)
            },
            resizeImage: function(a) {
                $img = a.data("img"), $ic = a.data("ic"), $img.width("auto").height("auto"), a.data("scaled", !1);
                var b = $img.width(),
                    c = $img.height(),
                    d = 0,
                    e = 0,
                    f = {
                        w: b,
                        h: c,
                        left: 0,
                        top: 0
                    };
                $img.attr("width", b).attr("height", c), "IMG" != $img.get(0).tagName.toUpperCase() || b == this.cDim.w && c == this.cDim.h || (d = this.cDim.w / b, e = this.cDim.h / c, d = this.config.crop ? Math.max(d, e) : Math.min(d, e), d = Math.min(this.config.maxZoom, d), b = f.w = Math.round(b * d) - this.config.dif, c = f.h = Math.round(c * d) - this.config.dif, this.cDim.w >= b ? d = f.left = (this.cDim.w - b) / 2 : (d = .5 * -(b - this.cDim.w), f.w = this.cDim.w), this.cDim.h > c ? e = f.top = (this.cDim.h - c) / 2 : (e = .5 * -(c - this.cDim.h), f.h = this.cDim.h), $img.width(b).height(c), $img.attr("width", b).attr("height", c), $ic.width(b).height(c), a.data("scaled", !0)), $ic.css("left", d).css("top", e), this.bindMouseEvents($ic), this.trigger("resize", f)
            },
            resizeContent: function(a) {
                $ic = a.data("ic"), $img = a.data("img"), a.data("scaled", !1);
                var b = $img.width(),
                    c = $img.height(),
                    d = {
                        w: b,
                        h: c,
                        left: 0,
                        top: 0
                    };
                this.config.stretch ? ($ic.width(this.cDim.w).height(this.cDim.h), $img.width(this.cDim.w).height(this.cDim.h), a.data("scaled", !0)) : (d.left = .5 * (this.cDim.w - b), d.top = .5 * (this.cDim.h - c), $ic.css("left", d.left).css("top", d.top)), this.bindMouseEvents($ic), this.trigger("resize", d)
            },
            onTransitionEnd: function() {
                this.$active.remove(), this.$active = this.$buffer, this.$active.css("width", "+=1"), this.isInTransition = !1, this.trigger("transition", {
                    n: this.active
                }), this.bindMouseEvents(this.$binder);
                var b = this.$binder.offset();
                this.mouseIsOver = !1, this.mouseCoor.x >= b.left && this.mouseCoor.x <= b.left + this.$binder.width() && this.mouseCoor.y >= b.top && this.mouseCoor.y <= b.top + this.$binder.height() && (this.lastEnter = "leave", this.enterLeave("enter"), this.startIdle(), this.mouseIsOver = !0, a(document).mousemove(a.proxy(this.onMouseMove, this))), null != this.qid && this.show(this.qid)
            },
            trigger: function(b, c) {
                var d, e = a.Event("img_" + b);
                for (d in c) e[d] = c[d];
                e.source = this, this.$c.trigger(e), this.config[b] && this.config[b].call(this, e)
            },
            destroy: function() {
                this.isInTransition && this.ts.stop(this.$active, this.$buffer), this.$active && this.$active.remove(), this.$buffer.remove()
            },
            rebuild: function(a) {
                this.quid = null, this.isInTransition && this.ts.stop(this.$active, this.$buffer), this.$buffer && this.$buffer.remove(), this.cached = [], this.data = a, this.loader && this.loader.cancel()
            }
        }
    }(jQuery),
    function(a) {
        a.fn.tn3.Thumbnailer = function(b, c, d) {
            this.$c = b, this.data = c, this.config = a.extend({}, a.fn.tn3.Thumbnailer.config, d), a(window).resize(a.proxy(this.onWinResize, this)), this.init()
        }, a.fn.tn3.Thumbnailer.config = {
            overMove: !0,
            buffer: 20,
            speed: 8,
            slowdown: 50,
            shaderColor: "#000000",
            shaderOpacity: .5,
            shaderDuration: 300,
            shaderOut: 300,
            useTitle: !1,
            seqLoad: !0,
            align: 1,
            mode: "thumbs",
            cssID: "tn3"
        }, a.fn.tn3.Thumbnailer.prototype = {
            config: null,
            $c: null,
            $oc: null,
            $ul: null,
            data: null,
            active: -1,
            listSize: 0,
            containerSize: 0,
            containerPadding: 0,
            noBufSize: 0,
            containerOffset: 0,
            mcoor: "mouseX",
            edge: "left",
            size: "width",
            outerSize: "outerWidth",
            mouseX: 0,
            mouseY: 0,
            intID: !1,
            pos: 0,
            difference: 0,
            cnt: 1,
            thumbCount: -1,
            initialized: !1,
            clickWhenReady: -1,
            loaders: null,
            lis: null,
            isVertical: null,
            marginDif: 0,
            nloaded: 0,
            firstToLoad: 0,
            isTouch: !1,
            init: function() {
                this.$c.css("position", "absolute").css("cursor", "progress"), this.lis = [], this.loaders = [], this.initialized = !1, this.$oc = a("<div />"), this.$ul = a("<ul />"), this.$oc.appendTo(this.$c), this.$oc.css("position", "absolute").css("overflow", "hidden").width(this.$c.width()).height(this.$c.height()), this.$ul.appendTo(this.$oc), this.$ul.css("position", "relative").css("margin", "0px").css("padding", "0px").css("border-width", "0px").css("width", "12000px").css("list-style", "none"), null == this.isVertical && ((this.isVertical = this.$c.width() < this.$c.height()) ? (this.mcoor = "mouseY", this.edge = "top", this.size = "height", this.outerSize = "outerHeight") : (this.mcoor = "mouseX", this.edge = "left", this.size = "width", this.outerSize = "outerWidth"), this.containerSize = this.$oc[this.size](), this.noBufSize = this.containerSize - 2 * this.config.buffer, this.containerOffset = this.$oc.offset()[this.edge], this.containerPadding = parseInt(this.$c.css("padding-" + this.edge))), this.listSize = 0, -1 != navigator.userAgent.indexOf("MSIE") && (this.config.seqLoad = !1), this.data.length > 0 && this.loadNextThumb()
            },
            loadNextThumb: function() {
                this.thumbCount++;
                var b = a("<li></li>");
                if (this.$ul.append(b), "thumbs" == this.config.mode) {
                    var c = this.data[this.thumbCount].thumb;
                    if (c) return this.loaders.push(new a.fn.tn3.ImageLoader(c, this, this.onLoadThumb, [b, this.thumbCount])), void(!this.config.seqLoad && this.thumbCount < this.data.length - 1 && this.loadNextThumb());
                    this.config.mode = "bullets"
                }
                "numbers" == this.config.mode && b.text(this.thumbCount + 1), this.onLoadThumb(null, b, this.thumbCount)
            },
            onLoadThumb: function(b, c, d, e) {
                if (this.lis[d] = {
                        li: c
                    }, c.addClass(this.config.cssID + "-thumb"), c.css("float", this.isVertical ? "none" : "left"), b) {
                    var f = this.lis[d].thumb = a(b);
                    c.append(f), this.lis[d].pos = c.position()[this.edge]
                }
                if (this.config.useTitle && this.data[d].title && c.attr("title", this.data[d].title.replace(/\&amp;/g, "&")), "thumbs" == this.config.mode && this.config.shaderOpacity > 0 && (this.lis[d].shade = a("<div/>"), c.prepend(this.lis[d].shade), this.lis[d].shade.css("background-color", this.config.shaderColor).css("width", f.width()).css("height", f.height()).css("position", "absolute")), this.initThumb(d), c.css("opacity", 0), c.animate({
                        opacity: 1
                    }, 1e3), this.listSize += c[this.outerSize](!0), this.initialized || (this.firstToLoad = d, this.initialized = !0, this.initMouse(!0)), e && this.trigger("error", {
                        description: e,
                        n: d
                    }), this.trigger("thumbLoad", {
                        n: d
                    }), ++this.nloaded < this.data.length)(this.config.seqLoad || "thumbs" != this.config.mode) && this.loadNextThumb();
                else {
                    if (b && (this.loaders = null), !this.config.seqLoad)
                        for (b = 0; b < this.lis.length; b++) this.lis[b].pos = this.lis[b].li.position()[this.edge];
                    this.thumbsLoaded()
                }
                this.clickWhenReady == d && (this.clickWhenReady = -1, this.thumbClick(d))
            },
            initThumb: function(a) {
                var b = this.lis[a];
                if (b.li) {
                    b.li.removeClass().addClass(this.config.cssID + "-thumb"), b.shade && (b.shade.stop(), b.shade.css("opacity", this.config.shaderOpacity));
                    var c = this;
                    b.li.click(function() {
                        return c.thumbClick(a), c.trigger("click", {
                            n: a
                        }), !1
                    }), "thumbs" != this.config.mode && b.li.hover(function() {
                        c.mouseOver(a)
                    }, function() {
                        c.mouseOver(-1)
                    })
                }
            },
            lastOver: -1,
            mouseOver: function(a) {
                if (a != this.lastOver && (-1 != this.lastOver && this.lastOver != this.active && ((b = this.lis[this.lastOver]).li.removeClass(this.config.cssID + "-thumb-over"), b.shade && (b.shade.stop(), b.shade.animate({
                        opacity: this.config.shaderOpacity
                    }, {
                        duration: this.config.shaderOut,
                        easing: "easeOutCubic",
                        queue: !1
                    })), this.trigger("thumbOut", {
                        n: a
                    })), this.lastOver = a, -1 != a && a != this.active)) {
                    var b = this.lis[a];
                    b.li.addClass(this.config.cssID + "-thumb-over"), b.shade && (b.shade.stop(), b.shade.animate({
                        opacity: 0
                    }, {
                        duration: this.config.shaderDuration,
                        easing: "easeOutCubic",
                        queue: !1
                    })), this.trigger("thumbOver", {
                        n: a
                    })
                }
            },
            next: function(a) {
                a ? this.listSize > this.containerSize && this.move(this.$ul.position()[this.edge] - this.containerSize) : (a = this.active + 1, -1 != this.active && this.active + 1 != this.data.length || (a = 0), this.thumbClick(a))
            },
            prev: function(a) {
                a ? this.listSize > this.containerSize && this.move(this.$ul.position()[this.edge] + this.containerSize) : (a = this.active - 1, -1 != this.active && 0 != this.active || (a = this.data.length - 1), this.thumbClick(a))
            },
            move: function(a) {
                var b = {};
                b[this.edge] = Math.min(0, Math.max(a, -(this.listSize - this.containerSize))), this.$ul.stop(), this.$ul.animate(b, 300)
            },
            thumbClick: function(a) {
                if (-1 == this.active) {
                    if (this.thumbCount < a || a > this.lis.length - 1 || null == this.lis[a]) return void(this.clickWhenReady = a)
                } else {
                    if (a == this.active) return;
                    this.initThumb(this.active)
                }
                if ("next" == a ? a = this.active + 1 < this.data.length ? this.active + 1 : 0 : "prev" == a && (a = this.active > 0 ? this.active - 1 : this.data.length - 1), this.lis[a]) {
                    var b = this.lis[a];
                    b.li.addClass(this.config.cssID + "-thumb-selected").unbind("click mouseenter mouseleave"), b.shade && b.shade.animate({
                        opacity: 0
                    }, this.config.shaderDuration), this.active = a, this.centerActive()
                }
            },
            centerActive: function(a) {
                if (-1 != this.active) {
                    var b = this.lis[this.active].li,
                        c = this.$ul.position()[this.edge] + b.position()[this.edge],
                        d = b[this.outerSize]() / 2;
                    (c + d > this.containerSize || c + d < 0) && (b = 10 - b.position()[this.edge] + this.containerSize / 2 - d, b = Math.min(0, b), b = Math.max(b, -this.listSize + this.containerSize), (c = {})[this.edge] = b, this.isTouch ? this.$oc["scroll" + this.edge.substring(0, 1).toUpperCase() + this.edge.substring(1)](-b) : a ? this.$ul.css(c) : this.$ul.animate(c, 200))
                }
            },
            thumbsLoaded: function() {
                this.$c.css("cursor", "auto"), this.$ul.css("width", this.listSize + "px"), this.centerList(), this.trigger("load")
            },
            centerList: function(a) {
                if (this.listSize < this.containerSize) {
                    var b = {};
                    b[this.edge] = this.config.align ? 1 == this.config.align ? (this.containerSize - this.listSize) / 2 : this.containerSize - this.listSize : 0, a || "thumbs" != this.config.mode ? this.$ul.css(b) : this.$ul.animate(b, 300)
                } else this.centerActive(a), this.$ul.position()[this.edge] > 0 ? this.$ul.css(this.edge, 0) : this.$ul.position()[this.edge] + this.listSize < this.containerSize && this.$ul.css(this.edge, -(this.listSize - this.containerSize))
            },
            initMouse: function(b) {
                "thumbs" == this.config.mode && (b = b ? "bind" : "unbind", this.$oc[b]("mouseenter", a.proxy(this.mouseenter, this)), this.$oc[b]("mouseleave", a.proxy(this.mouseleave, this)))
            },
            mouseenter: function() {
                this.trigger("over"), clearInterval(this.intID);
                var a = this;
                this.$ul.stop(), this.$c.mousemove("mouseX" == this.mcoor ? function(b) {
                    a.mouseX = b.pageX - a.containerOffset
                } : function(b) {
                    a.mouseY = b.pageY - a.containerOffset
                }), this.marginDif = parseInt(this.lis[this.firstToLoad].li.css("margin-" + this.edge)), isNaN(this.marginDif) && (this.marginDif = 0), a.intID = this.listSize > this.containerSize && this.config.overMove ? setInterval(function() {
                    a.slide.call(a)
                }, 10) : setInterval(function() {
                    a.mouseTrack.call(a)
                }, 10)
            },
            mouseleave: function() {
                this.trigger("out"), this.$c.unbind("mousemove"), clearInterval(this.intID);
                var a = this;
                this.intID = setInterval(function() {
                    a.slideOut.call(a)
                }, 10), this.mouseOver(-1)
            },
            slide: function() {
                this.cnt = 1;
                var a = this[this.mcoor];
                if (a <= this.config.buffer) this.pos = 0;
                else if (a >= this.containerSize - this.config.buffer) this.pos = this.containerSize - this.listSize - 1;
                else {
                    var b = this.containerSize * (a - this.config.buffer);
                    b /= this.noBufSize, this.pos = b * (1 - this.listSize / this.containerSize)
                }
                for (b = this.lis.length - 1; b > -1; b--) {
                    var c = a - this.prevdx;
                    if (c >= this.lis[b].pos && c < this.lis[b].pos + this.lis[b].li[this.size]()) {
                        this.mouseOver(b);
                        break
                    }
                }
                a = this.prevdx - this.marginDif, this.difference = a - this.pos, a = Math.round(a - this.difference / this.config.speed), this.prevdx != a && (this.$ul.css(this.edge, a), this.prevdx = a)
            },
            prevdx: 0,
            mouseTrack: function() {
                for (var a = this[this.mcoor], b = this.lis.length - 1; b > -1; b--) {
                    var c = a - this.$ul.position()[this.edge];
                    if (c >= this.lis[b].pos && c < this.lis[b].pos + this.lis[b].li[this.size]()) {
                        this.mouseOver(b);
                        break
                    }
                }
            },
            clickOn: function(a) {
                a = a[this.edge] - this.$ul.position()[this.edge] - this.$c.offset()[this.edge];
                for (var b = 0; b < this.lis.length; b++)
                    if (lpos = this.lis[b].li.position()[this.edge], a >= lpos && a < lpos + this.lis[b].li[this.size]()) {
                        this.lis[b].li.click();
                        break
                    }
            },
            slideOut: function() {
                if (0 != this.config.slowdown && 0 != this.difference) {
                    var a = this.$ul.position()[this.edge];
                    this.difference = a - this.pos, this.$ul.css(this.edge, a - this.difference / (this.config.speed * this.cnt)), this.cnt *= 1 + 4 / this.config.slowdown, this.cnt >= 40 && (this.difference = 0, this.cnt = 1)
                } else clearInterval(this.intID), this.intID = null
            },
            trigger: function(b, c) {
                var d, e = a.Event("tn_" + b);
                for (d in c) e[d] = c[d];
                e.source = this, this.$c.trigger(e), this.config[b] && this.config[b].call(this, e)
            },
            destroy: function() {
                clearInterval(this.intID), this.$c.empty()
            },
            rebuild: function(b) {
                clearInterval(this.intID), this.$c.empty(), this.data = b, this.active = this.thumbCount = -1, this.nloaded = 0, this.initMouse(!1), null !== this.loaders && a.each(this.loaders, function(a, b) {
                    b.cancel()
                }), this.init()
            },
            setSize: function(a, b) {
                "thumbs" == this.config.mode && (this.isVertical ? this.$c.height(b) : this.$c.width(a), this.$oc.width(this.$c.width()).height(this.$c.height()), this.containerSize = this.$oc[this.size](), this.noBufSize = this.containerSize - 2 * this.config.buffer, this.containerOffset = this.$oc.offset()[this.edge], this.initMouse(!0), null === this.loaders && this.centerList(!0))
            },
            onWinResize: function() {
                this.containerOffset = this.$oc.offset()[this.edge]
            }
        }
    }(jQuery),
    function(a) {
        a.fn.tn3.altLink = null, a.fn.tn3.ImageLoader = function(b, c, d, e) {
            this.$img = a(new Image), e.unshift(this.$img), this.altLink = a.fn.tn3.altLink, c = {
                url: b,
                context: c,
                callback: d,
                args: e
            }, this.$img.bind("load", c, this.load), this.$img.bind("error", c, a.proxy(this.error, this)), this.$img.attr("src", b)
        }, a.fn.tn3.ImageLoader.prototype = {
            $img: null,
            altLink: null,
            load: function(a) {
                a.data.callback.apply(a.data.context, a.data.args), a.data.args[0].unbind("load").unbind("error")
            },
            error: function(b) {
                this.altLink ? (this.altLink = null, this.$img.attr("src", a.fn.tn3.altLink + b.data.url)) : (b.data.args.push("image loading error: " + b.data.url), b.data.callback.apply(b.data.context, b.data.args), this.$img.unbind("load").unbind("error"))
            },
            cancel: function() {
                this.$img.unbind("load").unbind("error")
            }
        }
    }(jQuery),
    function(a) {
        a.fn.tn3.Timer = function(a, b, c) {
            this.$target = a, this.duration = b, this.tickint = c
        }, a.fn.tn3.Timer.prototype = {
            $target: null,
            duration: null,
            id: null,
            runs: !1,
            counter: null,
            countDuration: null,
            tickid: null,
            ticks: null,
            tickint: 500,
            start: function() {
                this.runs || (this.runs = !0, this.startCount(this.duration), this.trigger("timer_start"))
            },
            startCount: function(a) {
                this.clean(), this.countDuration = a, this.counter = +new Date;
                var b = this;
                this.id = setTimeout(function() {
                    b.clean.call(b), b.runs = !1, b.trigger.call(b, "timer_end")
                }, a);
                var c = this.duration / this.tickint;
                this.ticks = Math.round(a / c), this.tickid = setInterval(function() {
                    b.ticks = Math.ceil((a - new Date + b.counter) / c), b.ticks > 0 && b.trigger.call(b, "timer_tick", {
                        tick: b.ticks,
                        totalTicks: b.tickint
                    })
                }, c), this.trigger("timer_start"), this.trigger("timer_tick", {
                    tick: this.ticks,
                    totalTicks: this.tickint
                })
            },
            stop: function() {
                this.clean(), this.runs = !1, this.trigger("timer_stop")
            },
            clean: function() {
                clearTimeout(this.id), this.id = null, clearInterval(this.tickid), this.elapsed = this.tickid = null
            },
            elapsed: null,
            pause: function(a) {
                if (this.runs) {
                    if (a) {
                        this.clean();
                        var b = this.duration / this.tickint;
                        this.elapsed = Math.floor((+new Date - this.counter) / b) * b
                    } else {
                        if (null == this.elapsed) return;
                        this.startCount(this.countDuration - this.elapsed), this.elapsed = null
                    }
                    this.trigger("timer_pause", {
                        pause: a
                    })
                }
            },
            trigger: function(b, c) {
                var d, e = a.Event(b);
                for (d in c) e[d] = c[d];
                this.$target.trigger(e)
            }
        }
    }(jQuery),
    function(a) {
        a.fn.tn3.Albums = function(a, b, c) {
            this.data = a, this.$c = b, this.$in = b.find("." + c + "-inalbums"), this.cssID = c, this.$a = this.$in.find("." + this.cssID + "-album"), this.n = 0, this.initValues = {
                width: b.width(),
                height: b.height(),
                aw: this.$a.width(),
                ah: this.$a.height(),
                inw: this.$in.width(),
                inh: this.$in.height()
            }, this.pad = parseInt(this.$in.css("padding-left")), this.isTouch = "ontouchstart" in window
        }, a.fn.tn3.Albums.prototype = {
            data: null,
            $c: null,
            $in: null,
            $a: null,
            initValues: null,
            p: null,
            aw: null,
            ah: null,
            cssID: null,
            coors: null,
            ctrl_next: null,
            ctrl_prev: null,
            n: null,
            selected: null,
            pad: null,
            enabled: !1,
            space: null,
            isTouch: !1,
            btnar: null,
            albh: 0,
            lastac: null,
            getButtons: function() {
                this.$in.empty(), this.btnar = [], $cur = this.$a.clone(), $cur.appendTo(this.$in), this.space = null === this.space ? this.pad : this.space;
                var a = this.aw = this.$in.width(),
                    b = this.$in.height(),
                    c = 1;
                if (c = this.data.length, this.isTouch || (a -= 2 * this.pad, b -= 2 * this.pad, c = Math.max(1, Math.floor(a / this.initValues.aw)), this.aw = Math.floor((a - (c - 1) * this.space) / c), c = Math.floor(b / this.initValues.ah)), this.ah = this.initValues.ah, b = a = this.pad, this.isTouch) {
                    this.$c.css("overflow", "hidden");
                    for (var d = 0; d < c; d++) this.btnar.push($cur), $cur.css("left", a).css("top", b), $cur.css("width", "100%").height(this.ah), $cur.hide(), $cur = this.$a.clone(), $cur.appendTo(this.$in), b += this.ah + this.space
                } else
                    for (; b + this.ah < this.$in.height();) {
                        for (; a + this.aw < this.$in.width();) this.btnar.push($cur), $cur.css("left", a).css("top", b), $cur.width(this.aw).height(this.ah), $cur.hide(), $cur = this.$a.clone(), $cur.appendTo(this.$in), a += this.aw + this.space;
                        b += this.ah + this.space, a = this.pad
                    }
                return this.albh = b, $cur.remove(), this.btnar
            },
            show: function(b, c, d, e) {
                if (this.$c.show(), this.enabled = !0, this.isTouch && this.btnar) {
                    if (void 0 != c)
                        for (this.btnar[this.selected].removeClass(this.cssID + "-album-selected"), this.selected = c, b = 0; b < this.data.length; b++)
                            if (b == this.selected) {
                                this.btnar[b].addClass(this.cssID + "-album-selected"), this.$in.scrollTop(this.btnar[b].position().top - 1.5 * this.btnar[b].height());
                                break
                            }
                } else {
                    void 0 == b ? b = 0 : "next" == b ? b = this.n + 1 < this.data.length ? this.n + 1 : 0 : "prev" == b && (b = this.n > 0 ? this.n - 1 : this.data.length - 1), void 0 != c && (this.selected = c);
                    var f, g, h = this.getButtons();
                    if (e && null !== c)
                        for (; h.length * (b + 1) < c;) b++;
                    var i = this;
                    c = b * h.length, e = Math.min(this.data.length, (b + 1) * h.length), this.trigger("init");
                    for (var j = c; j < e; j++) {
                        var k = this.data[j];
                        k.title || (k.title = "Unknown"), f = h[j - c], g = '<div class="' + this.cssID + '-album-image"></div>', g += '<div class="' + this.cssID + '-album-title">' + k.title + "</div>", k.description && (g += '<div class="' + this.cssID + '-album-description">' + k.description + "</div>"), f.html(g), new a.fn.tn3.ImageLoader(k.thumb, this, this.onThumbLoad, [f.find("." + this.cssID + "-album-image")]), f.data("tn3", j), this.trigger("binit", {
                            $a: f
                        }), f.click(function() {
                            var b = a(this).data("tn3");
                            b == i.selected ? (i.$c.hide(), i.trigger("close")) : i.trigger("click", {
                                n: b
                            })
                        }).hover(function() {
                            a(this).addClass(i.cssID + "-album-over")
                        }, function() {
                            a(this).removeClass(i.cssID + "-album-over")
                        }), j == this.selected && f.addClass(this.cssID + "-album-selected")
                    }
                    if (this.lastac = f, 0 != (f = j % h.length))
                        for (g = h.length - 1; g >= f; g--) h.splice(g, 1);
                    if (this.n = b, d) a.each(h, function(a) {
                        h[a].show()
                    });
                    else {
                        var l = 800 / h.length;
                        this.$c.slideDown(0 == b ? 300 : 0, function() {
                            a.each(h, function(a) {
                                h[a].delay(a * l).fadeIn(150)
                            })
                        })
                    }
                    this.ctrl_prev && this.enablePageControl("prev", c > 0), this.ctrl_next && this.enablePageControl("next", e < this.data.length), this.ctrl_close && this.ctrl_close.css("display", null === this.selected ? "none" : "inline")
                }
            },
            onThumbLoad: function(a, b, c) {
                c && this.trigger("error", {
                    description: c
                }), b.prepend(a)
            },
            hide: function() {
                this.$c.hide(), this.enabled = !1
            },
            enablePageControl: function(b, c) {
                var d = this["ctrl_" + b];
                if (c) {
                    if (!d.data("active")) {
                        var e = this;
                        d.click(function(a) {
                            e.show(b), a.stopPropagation()
                        }).hover(function() {
                            a(this).addClass(e.cssID + "-albums-" + b + "-over")
                        }, function() {
                            a(this).removeClass(e.cssID + "-albums-" + b + "-over")
                        }), d.data("active", !0)
                    }
                } else d.removeClass(this.cssID + "-albums-" + b + "-over"), d.unbind(), d.data("active", !1)
            },
            setControl: function(a, b) {
                if ("close" == a) {
                    var c = this;
                    b.click(function(a) {
                        c.$c.hide(), c.trigger("close"), a.stopPropagation()
                    })
                }
                this["ctrl_" + a] = b
            },
            trigger: function(b, c) {
                var d, e = a.Event("albums_" + b);
                for (d in c) e[d] = c[d];
                e.source = this, this.$c.trigger(e)
            },
            clickOn: function(a) {
                var b = -(this.$in.position().top + this.pad),
                    c = this.btnar[0].height() + this.pad;
                this.trigger("click", {
                    n: Math.floor((b + a.top) / c)
                })
            },
            changeSize: function(a, b) {
                this.$c.width(this.initValues.width + a).height(this.initValues.height + b), this.isTouch ? this.$in.width(this.initValues.inw + a) : this.$in.width(this.initValues.inw + a).height(this.initValues.inh + b), "none" != this.$c.css("display") && this.show(void 0, void 0, !0)
            },
            select: function() {}
        }
    }(jQuery),
    function(a) {
        var b = a.fn.tn3.Transitions = function(b, c, d, e, f) {
                this.ts = b, this.def = a.extend(!0, {}, this[c.type + "Config"], c), b || (this.ts = [this.def]);
                for (var g in this.ts) this.ts[g] = a.extend(!0, {}, this[this.ts[g].type + "Config"], this.ts[g]);
                this.random = d, this.end = a.proxy(e, f)
            },
            c = b.prototype = {
                ts: null,
                def: {
                    type: "slide"
                },
                random: !1,
                gs: [],
                end: null,
                ct: null,
                counter: -1,
                setTransition: function() {
                    1 == this.ts.length ? this.ct = this.ts[0] : (++this.counter == this.ts.length && (this.counter = 0), this.random && 0 == this.counter && a.fn.tn3utils.shuffle(this.ts), this.ct = this.ts[this.counter])
                },
                start: function(a, b, c, d) {
                    d ? this.ct = this.def : this.setTransition(), void 0 === this[this.ct.type + "Condition"] || this[this.ct.type + "Condition"](a, b, this.ct) || (this.ct = this.def), this[this.ct.type](a, b, this.ct, c)
                },
                stop: function(a, b) {
                    this[this.ct.type + "Stop"](a, b, this.ct)
                },
                makeGrid: function(a, b, c) {
                    var d = a.width(),
                        e = Math.round(d / b);
                    d -= e * b;
                    var f = a.height(),
                        g = Math.round(f / c);
                    f -= g * c;
                    var h, i, j, k, l, m = 0,
                        n = 0,
                        o = "url(" + a.find("img").attr("src") + ") no-repeat scroll -";
                    for (h = 0; h < b; h++) {
                        for (this.gs[h] = [], k = d > h ? e + 1 : e, i = 0; i < c; i++) j = a.append("<div></div>").find(":last"), l = f > i ? g + 1 : g, j.width(k).height(l).css("background", o + m + "px -" + n + "px").css("left", m).css("top", n).css("position", "absolute"), this.gs[h].push(j), n += l;
                        m += k, n = 0
                    }
                    a.find("img").remove()
                },
                stopGrid: function() {
                    for (var a = 0; a < this.gs.length; a++)
                        for (var b = 0; b < this.gs[a].length; b++) this.gs[a][b].clearQueue(), this.gs[a][b].remove();
                    this.gs = []
                },
                flatSort: function(a) {
                    for (var b = [], c = 0; c < this.gs.length; c++)
                        for (var d = 0; d < this.gs[c].length; d++) b.push(this.gs[c][d]);
                    return a && b.reverse(), b
                },
                randomSort: function() {
                    var b = this.flatSort();
                    return a.fn.tn3utils.shuffle(b), b
                },
                diagonalSort: function(a, b) {
                    for (var c = [], d = a > 0 ? this.gs.length - 1 : 0, e = b > 0 ? 0 : this.gs[0].length - 1; this.gs[d];) c.push(this.addDiagonal([], d, e, a, b)), d -= a;
                    for (d += a, e += b; this.gs[d][e];) c.push(this.addDiagonal([], d, e, a, b)), e += b;
                    return c
                },
                addDiagonal: function(a, b, c, d, e) {
                    return a.push(this.gs[b][c]), this.gs[b + d] && this.gs[b + d][c + e] ? this.addDiagonal(a, b + d, c + e, d, e) : a
                },
                circleSort: function(a) {
                    var b = [],
                        c = this.gs.length,
                        d = this.gs[0].length,
                        e = [Math.floor(c / 2), Math.floor(d / 2)];
                    c *= d, d = [
                        [1, 0],
                        [0, 1],
                        [-1, 0],
                        [0, -1]
                    ];
                    var f, g = 0,
                        h = 0;
                    for (b.push(this.gs[e[0]][e[1]]); b.length < c;) {
                        for (f = 0; f <= g; f++) this.addGridPiece(b, e, d[h]);
                        h == d.length - 1 ? h = 0 : h++, g += .5
                    }
                    return a && b.reverse(), b
                },
                addGridPiece: function(a, b, c) {
                    b[0] += c[0], b[1] += c[1], this.gs[b[0]] && this.gs[b[0]][b[1]] && a.push(this.gs[b[0]][b[1]])
                },
                getSlidePositions: function(a, b) {
                    var c = {
                        dir: b
                    };
                    switch (b) {
                        case "left":
                            c.pos = a.outerWidth(!0);
                            break;
                        case "right":
                            c.pos = -a.outerWidth(!0), c.dir = "left";
                            break;
                        case "top":
                            c.pos = -a.outerHeight(!0);
                            break;
                        case "bottom":
                            c.pos = a.outerHeight(!0), c.dir = "top"
                    }
                    return c
                },
                animateGrid: function(b, c, d, e, f, g, h) {
                    var i = {
                        duration: e,
                        easing: d,
                        complete: function() {
                            a(this).remove()
                        }
                    };
                    for (d = 0; d < b.length; d++) {
                        if (e = a.easing[f](0, d, 0, g, b.length), d == b.length - 1) {
                            var j = this;
                            i.complete = function() {
                                a(this).remove(), h.call(j)
                            }
                        }
                        if (a.isArray(b[d]))
                            for (var k in b[d]) b[d][k].delay(e).animate(c[d], i);
                        else b[d].delay(e).animate(c[d], i)
                    }
                },
                getValueArray: function(b, c, d) {
                    var e, f = [],
                        g = a.isArray(c),
                        h = a.isArray(d);
                    for (e = 0; e < b; e++) o = {}, o[g ? c[e % c.length] : c] = h ? d[e % d.length] : d, f.push(o);
                    return f
                }
            };
        b.defined = [], b.define = function(a) {
            for (var d in a) switch (d) {
                case "type":
                    b.defined.push(a.type);
                    break;
                case "config":
                    c[a.type + "Config"] = a.config;
                    break;
                case "f":
                    c[a.type] = a.f;
                    break;
                case "stop":
                    c[a.type + "Stop"] = a.stop;
                    break;
                case "condition":
                    c[a.type + "Condition"] = a.condition;
                    break;
                default:
                    c[d] = a[d]
            }
        }, b.define({
            type: "none",
            config: {},
            f: function() {
                this.end()
            },
            stop: function() {
                this.end()
            }
        }), b.define({
            type: "fade",
            config: {
                duration: 300,
                easing: "easeInQuad"
            },
            f: function(a, b, c) {
                var d = this;
                a.animate({
                    opacity: 0
                }, c.duration, c.easing, function() {
                    d.end()
                })
            },
            stop: function(a) {
                a.stop(), this.end()
            }
        }), b.define({
            type: "slide",
            config: {
                duration: 300,
                direction: "auto",
                easing: "easeInOutCirc"
            },
            f: function(a, b, c, d) {
                d = this.getSlidePositions(b, "auto" == c.direction ? d : c.direction);
                var e = {},
                    f = {};
                b.css(d.dir, d.pos), e[d.dir] = 0, b.animate(e, c.duration, c.easing, this.end), f[d.dir] = -d.pos, a.animate(f, c.duration, c.easing)
            },
            stop: function(a, b) {
                b.stop(), a.stop(), a.css("left", 0).css("top", 0), b.css("left", 0).css("top", 0), this.end()
            }
        }), b.define({
            type: "blinds",
            config: {
                duration: 240,
                easing: "easeInQuad",
                direction: "vertical",
                parts: 12,
                partDuration: 100,
                partEasing: "easeInQuad",
                method: "fade",
                partDirection: "auto",
                cross: !0
            },
            f: function(a, b, c, d) {
                "horizontal" == c.direction ? this.makeGrid(a, 1, c.parts) : this.makeGrid(a, c.parts, 1), d = "auto" == c.partDirection ? d : c.partDirection, a = this.flatSort("left" == d || "top" == d);
                var e;
                switch (c.method) {
                    case "fade":
                        e = this.getValueArray(a.length, "opacity", 0);
                        break;
                    case "scale":
                        e = this.getValueArray(a.length, "left" == d ? "width" : "height", "1px");
                        break;
                    case "slide":
                        b = this.getSlidePositions(b, d), e = this.getValueArray(a.length, b.dir, c.cross ? [b.pos, -b.pos] : b.pos)
                }
                this.animateGrid(a, e, c.partEasing, c.partDuration, c.easing, c.duration, this.blindsStop)
            },
            stop: function() {
                this.stopGrid(), this.end()
            },
            condition: function(a, b) {
                return !a.data("scaled") || !b.data("scaled")
            }
        }), b.define({
            type: "grid",
            config: {
                duration: 260,
                easing: "easeInQuad",
                gridX: 7,
                gridY: 5,
                sort: "diagonal",
                sortReverse: !1,
                diagonalStart: "bl",
                method: "fade",
                partDuration: 300,
                partEasing: "easeOutSine",
                partDirection: "left"
            },
            f: function(a, b, c, d) {
                this.makeGrid(a, c.gridX, c.gridY), a = "auto" == c.partDirection ? d : c.partDirection;
                var e, f;
                if ("diagonal" == c.sort) switch (c.diagonalStart) {
                    case "tr":
                        e = this.diagonalSort(1, 1);
                        break;
                    case "tl":
                        e = this.diagonalSort(-1, 1);
                        break;
                    case "br":
                        e = this.diagonalSort(1, -1);
                        break;
                    case "bl":
                        e = this.diagonalSort(-1, -1)
                } else e = this[c.sort + "Sort"](c.sortReverse);
                switch (c.method) {
                    case "fade":
                        f = this.getValueArray(e.length, "opacity", 0);
                        break;
                    case "scale":
                        f = this.getValueArray(e.length, "left" == a ? "width" : "height", "1px")
                }
                this.animateGrid(e, f, c.partEasing, c.partDuration, c.easing, c.duration, this.gridStop)
            },
            stop: function() {
                this.stopGrid(), this.end()
            },
            condition: function(a, b) {
                return !a.data("scaled") || !b.data("scaled")
            }
        })
    }(jQuery),
    function(a) {
        function b(b) {
            var d = b && void 0 !== b.message ? b.message : void 0;
            b = a.extend({}, a.tn3block.defaults, b || {}), d = void 0 === d ? b.message : d, j && c({});
            var f = b.baseZ,
                k = a(g || b.forceIframe ? '<iframe class="blockUI" style="z-index:' + f++ + ';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="' + b.iframeSrc + '"></iframe>' : '<div class="blockUI" style="display:none"></div>'),
                l = a('<div class="blockUI ' + b.cssID + '-overlay" style="z-index:' + f++ + ';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');
            (f = a('<div class="blockUI ' + b.blockMsgClass + ' blockPage" style="z-index:' + f + ';display:none;position:fixed"></div>')).css("left", "0px").css("top", "0px"), l.css(b.overlayCSS), l.css("position", "fixed"), (g || b.forceIframe) && k.css("opacity", 0);
            var m = [k, l, f],
                n = a("body");
            a.each(m, function() {
                this.appendTo(n)
            }), m = i && (!a.boxModel || a("object,embed", null).length > 0), (h || m) && (b.allowBodyStretch && a.boxModel && a("html,body").css("height", "100%"), a.each([k, l, f], function(a, c) {
                var d = c[0].style;
                d.position = "absolute", a < 2 ? (d.setExpression("height", "Math.max(document.body.scrollHeight, document.body.offsetHeight)- (jQuery.boxModel?0:" + b.quirksmodeOffsetHack + ') + "px"'), d.setExpression("width", 'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')) : b.centerY ? (d.setExpression("top", '(document.documentElement.clientHeight || document.body.clientHeight) / 2- (this.offsetHeight / 2)+ (blah = document.documentElement.scrollTop? document.documentElement.scrollTop: document.body.scrollTop)+ "px"'), d.marginTop = 0) : b.centerY || d.setExpression("top", '(document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')
            })), d && (d.data("blockUI.parent", d.parent()), f.append(d), (d.jquery || d.nodeType) && a(d).show()), (g || b.forceIframe) && b.showOverlay && k.show(), b.showOverlay && l.show(), d && f.show(), b.onBlock && b.onBlock(), e(1, b), j = d
        }

        function c(b) {
            e(0, b = a.extend({}, a.tn3block.defaults, b || {})), d(a("body").children().filter(".blockUI").add("body > .blockUI"), b)
        }

        function d(a, b) {
            a.each(function() {
                this.parentNode && this.parentNode.removeChild(this)
            }), j.data("blockUI.parent").append(j), j = null, "function" == typeof b.onUnblock && b.onUnblock.call(b.con)
        }

        function e(b, c) {
            (b || j) && (!c.bindEvents || b && !c.showOverlay || (b ? a(document).bind("mousedown mouseup keydown keypress", c, f) : a(document).unbind("mousedown mouseup keydown keypress", f)))
        }

        function f(b) {
            var c = b.data;
            return a(b.target).parents("div." + c.blockMsgClass).length > 0 || 0 == a(b.target).parents().children().filter("div.blockUI").length
        }
        var g = /MSIE/.test(navigator.userAgent),
            h = /MSIE 6.0/.test(navigator.userAgent),
            i = a.isFunction(document.createElement("div").style.setExpression);
        a.tn3block = function(a) {
            b(a)
        }, a.tn3unblock = function(a) {
            c(a)
        };
        var j = void 0;
        a.tn3block.defaults = {
            message: "<h1>Please wait...</h1>",
            overlayCSS: {},
            iframeSrc: /^https/i.test(window.location.href || "") ? "javascript:false" : "about:blank",
            forceIframe: !1,
            baseZ: 2147483647,
            allowBodyStretch: !0,
            bindEvents: !0,
            showOverlay: !0,
            applyPlatformOpacityRules: !0,
            onBlock: null,
            onUnblock: null,
            quirksmodeOffsetHack: 4,
            blockMsgClass: "blockMsg",
            cssID: "tn3"
        }
    }(jQuery),
    function(a) {
        (a.fn.tn3.External = function(b, c) {
            if (b) {
                this.context = c, this.reqs = b.length;
                for (var d = 0; d < b.length; d++) this.plugs[b[d].origin] = new a.fn.tn3.External[b[d].origin](b[d], this)
            }
        }).prototype = {
            context: null,
            reqs: 0,
            plugs: {},
            getImages: function(a, b) {
                this.plugs[a.origin].getImages(a, b)
            },
            setAlbumData: function(a, b) {
                this.reqs--, this.context.setAlbumData.call(this.context, a, b)
            },
            setImageData: function(a, b, c) {
                this.context.setImageData.call(this.context, a, b, c)
            },
            getAlbumData: function(a) {
                return this.context.data[a]
            }
        }
    }(jQuery),
    function(a) {
        var b = a.fn.tn3.External;
        b.xml = function(c, d) {
            this.extcon = d, this.config = a.extend(!0, {}, b.xml.config, c), c.noInit ? d.reqs-- : this.init()
        }, b.xml.config = {
            url: "",
            thumb_size: 1,
            image_size: 0
        }, b.xml.prototype = {
            config: null,
            extcon: null,
            getImages: function() {},
            init: function() {
                this.request()
            },
            request: function() {
                a.ajax({
                    url: this.config.url,
                    cache: !1,
                    context: this,
                    success: function(a) {
                        this.extcon.setAlbumData(this.parseXML(a))
                    },
                    error: function() {
                        this.extcon.setAlbumData([], "XML loading failed")
                    }
                })
            },
            parseXML: function(b) {
                try {
                    var c, d, e, f = [],
                        g = this;
                    a(b).find(":first").children().each(function(b, h) {
                        c = a(this), f[b] = {}, f[b].adata = {
                            id: b,
                            origin: "xml"
                        }, d = c.find("file_root").text(), g.setProps(h, f[b], d), f[b].imgs = [], delete f[b].images, c.find("images > image").each(function(a, c) {
                            e = f[b].imgs[a] = {}, g.setProps(c, e, d)
                        })
                    })
                } catch (a) {
                    this.extcon.setAlbumData([], "XML parsing error")
                }
                return f
            },
            setProps: function(b, c, d) {
                var e;
                a(b).children().each(function(a, b) {
                    b.firstChild && (e = b.firstChild.nodeValue, n = b.tagName, "src" == n.substring(n.length - 3) && (e = d + e, "image_src" == n ? n = "img" : "thumb_src" == n && (n = "thumb")), c[n] = e)
                }), c.thumb || (c.thumb = this.getThumb(c.img, this.config.thumb_size)), this.config.image_size > 0 && (c.img = this.getThumb(c.img, this.config.image_size))
            },
            getThumb: function(a, b) {
                if (a && "" != a) {
                    if (void 0 == b) b = 1;
                    else if (0 == b) return a;
                    var c = a.split("/"),
                        d = c.pop().split("."),
                        e = d.pop().toString();
                    return e = d.join(".") + "_" + b + "." + e.toLowerCase(), a = c.join("/") + "/thumbs/" + e
                }
            }
        }
    }(jQuery),
    function(a) {
        function b() {
            a(window);
            var b = window.innerWidth,
                c = window.innerHeight;
            b -= this.config.initValues.wDif, c -= this.config.initValues.hDif, this.resize(b, c)
        }
        a.fn.tn3.plugIn("touch", function(b, c, d) {
            "ontouchstart" in window && new a.fn.tn3.Touch(b, c, d)
        }), a.fn.tn3.Touch = function(c, d, e) {
            this.$c = c, this.config = a.extend(!0, {}, a.fn.tn3.Touch.config, d.touch), null != this.config.skin && ("object" == typeof this.config.skin ? (d.skinDir = d.skinDir.substr(0, d.skinDir.lastIndexOf("/") + 1) + this.config.skin[0], d.cssID = e.config.cssID = this.config.skin[0], d.skin = this.config.skin[1], d.skin = this.config.skin) : (d.skinDir = d.skinDir.substr(0, d.skinDir.lastIndexOf("/") + 1) + this.config.skin, d.skin = this.config.skin, d.cssID = this.config.skin, e.config.cssID = this.config.skin)), e.config.overFadeDuration = 0, a.fn.tn3.dontLoad = !1, this.$c.bind("tn3_init_start", a.proxy(this.init_start, this)), this.$c.bind("tn3_rebuild", a.proxy(this.rebuild, this)), this.$c.bind("tn3_init", a.proxy(this.init, this)), (this.metaVP = document.querySelector("meta[name=viewport]")) && (this.iniVP = this.metaVP.getAttribute("content")), e.config.imageClick = null, e.config.image.transitions = [{
                type: "translate"
            }], e.config.image.clickEvent = "click", e.config.thumbnailer.overMove = !1, e.config.thumbnailer.shaderOpacity = this.config.shaderOpacity, e.config.spinjs || (e.config.spinjs = this.config.spinjs), this.ofscroll = hasOverflowScrolling(), this.tn3 = e, e.onFullResize = b
        }, a.fn.tn3.Touch.config = {
            skin: "tn3t",
            fsMode: null,
            swipeIndex: 5,
            image: !0,
            thumbnails: !0,
            albums: !0,
            shaderOpacity: 0,
            spinjs: {
                color: "#fff",
                hwaccel: !0,
                lines: 11,
                corners: 0,
                trail: 60,
                length: 10,
                width: 3,
                radius: 8,
                zIndex: 1
            }
        }, a.fn.tn3.Touch.prototype = {
            config: null,
            $c: null,
            iham: null,
            tham: null,
            aham: null,
            metaVP: null,
            iniVP: "",
            ofscroll: !1,
            tn3: null,
            init_start: function(b) {
                var c = this;
                b.source.initialized || (b.source.$c.bind("tn3_control", function(d) {
                    switch (d.id) {
                        case "show-info":
                            b.source.thumbnailer.$c.hide(), b.source.items["show-thumbs"].removeClass(b.source.config.cssID + "-show-thumbs-active"), b.source.config.autohideOver = !d.active;
                            break;
                        case "show-thumbs":
                            b.source.items["image-info"].hide(), b.source.items["show-info"].removeClass(b.source.config.cssID + "-show-info-active"), b.source.config.autohideOver = !d.active, b.source.thumbnailer.$oc.css(b.source.thumbnailer.edge, "-1px"), setTimeout(function() {
                                b.source.thumbnailer.centerActive(!0, !0), b.source.thumbnailer.$oc.css(b.source.thumbnailer.edge, "0px")
                            }, 20);
                            break;
                        case "fullscreen":
                            if (null !== c.config.fsMode) {
                                if ("close" == c.config.fsMode) window.close();
                                else {
                                    var e = window.open(c.config.fsMode);
                                    e.tn3Init = a.extend(!0, {}, b.source.config, {
                                        iniAlbum: b.source.cAlbum,
                                        iniImage: b.source.n,
                                        skinDir: b.source.config.skinDir.substring(0, b.source.config.skinDir.lastIndexOf("/")),
                                        data: b.source.data,
                                        init: function(a) {
                                            a.source.fullscreen()
                                        },
                                        startWithAlbums: !1,
                                        isFullScreen: !1,
                                        touch: {
                                            fsMode: "close",
                                            skin: "tn3t"
                                        }
                                    });
                                    for (var f = 0; f < e.tn3Init.external.length; f++) e.tn3Init.external[f].noInit = !0
                                }
                                d.execute = !1
                            }
                    }
                }), "hide" == this.config.fsMode && b.source.$c.find(".tn3t-fullscreen").parent().remove())
            },
            init: function() {
                this.tn3.config.startWithAlbums && this.initAlbumsTouch(this.tn3)
            },
            rebuild: function(a) {
                for (var b = ["-webkit-", "-moz-", "-ms-", "-o-", ""], c = 0; c < b.length; c++)
                    if (void 0 != a.source.$c.css(b[c] + "transform")) {
                        a.source.imager.ts.vendorPrefix = b[c];
                        break
                    }
                this.reset(a.source), this.initTouch(a.source)
            },
            reset: function(b) {
                this.isLoading = !0, this.config.albums && (b.albums.isTouch = !0), this.config.thumbnails && (b.thumbnailer.isTouch = !0), this.iham && this.iham.destroy(), this.tham && this.tham.destroy(), this.aham && this.aham.destroy(), b.imager.$c.off("img_load_start", a.proxy(this.onLoadStart, this)).off("img_load_end", a.proxy(this.onLoadEnd, this)), b.imager.ts.doTranslate(b.imager.$ins, 0, 0), b.imager.$active = !1
            },
            initTouch: function(a) {
                this.config.image && a.items.image && (a.items.image.unbind("img_enter img_leave"), this.initImageTouch(a)), this.config.thumbnails && a.items.thumbs && (a.items.thumbs.unbind("tn_over tn_out"), a.items.thumbs.bind("tn_thumbLoad", function(b) {
                    a.thumbnailer.lis[b.n].li.unbind("mouseenter mouseleave").bind("dragstart", function(a) {
                        a.preventDefault()
                    })
                }), this.initThumbTouch(a)), this.config.albums && a.items.albums && this.initAlbumsTouch(a)
            },
            oldActive: null,
            isLoading: !0,
            isTouchMove: !1,
            slideNext: null,
            initImageTouch: function(b) {
                var c = b.imager,
                    d = 0,
                    e = this,
                    f = null;
                this.iham = new a.fn.tn3.TouchClass(c.$c, !1, function(a) {
                    return "tn3-in-image" == a.originalEvent.target.className && (a.originalEvent.preventDefault(), !(e.isLoading || c.isInTransition || c.data.length < 2) && void 0)
                }, function(a) {
                    e.oldActive = c.active, e.isTouchMove = !0, c.ts.drag_dir = a < 0 ? "left" : "right", c.show(a < 0 ? "next" : "prev");
                    var b = "left" == c.ts.drag_dir ? c.$active.width() : -c.$active.width();
                    c.ts.doTranslate(c.$buffer, b, 0), c.ts.doTranslate(c.$ins, a, 0)
                }, function(a) {
                    d = a, c.ts.doTranslate(c.$ins, d, 0)
                }, function() {
                    if (e.slideNext = Math.abs(c.$ins.position().left) > c.$active.width() / e.config.swipeIndex, e.isLoading) e.slideNext ? c.ts.doTranslate(c.$ins, d > 0 ? c.$active.width() : -c.$active.width(), 0) : (b.items.preloader && b.displayPreloader(!1), c.ts.doTranslate(c.$ins, 0, 0));
                    else {
                        if (e.slideNext) c.initTransition();
                        else {
                            var a = c.$active;
                            c.$active = c.$buffer, c.$buffer = a, c.side = "right" == c.side ? "left" : "right", c.initTransition(), c.active = e.oldActive, b.n = e.oldActive, c.qid = null
                        }
                        e.slideNext = null
                    }
                    e.isTouchMove = !1
                }, function() {
                    null == e.config.fsMode ? null != f ? (clearTimeout(f), f = null, b.fullscreen()) : f = setTimeout(function() {
                        clearTimeout(f), f = null, b.areHidden ? b.imageEnter() : b.imageLeave()
                    }, 210) : b.areHidden ? b.imageEnter() : b.imageLeave()
                }, function() {}), c.$c.on("img_load_start", a.proxy(this.onLoadStart, this)).on("img_load_end", a.proxy(this.onLoadEnd, this))
            },
            onLoadStart: function() {
                this.isLoading = !0
            },
            onLoadEnd: function(a) {
                var b = a.source;
                if (b.ts.doTranslate(b.$buffer, 0, 0), this.isTouchMove) {
                    var c = "left" == b.ts.drag_dir ? b.$active.width() : -b.$buffer.width();
                    b.ts.doTranslate(b.$buffer, c, 0), a.doTransition[0] = !1
                } else null != this.slideNext && (this.slideNext ? (b.ts.doTranslate(b.$ins, 0, 0), b.onTransitionEnd()) : (c = b.$active, b.$active = b.$buffer, b.$buffer = c, b.onTransitionEnd(), this.n = b.active = this.oldActive, b.qid = null), a.doTransition[0] = !1, this.slideNext = null);
                b.$buffer.css("visibility", "visible"), this.isLoading = !1
            },
            initThumbTouch: function(b) {
                var c = b.thumbnailer;
                if (this.ofscroll) c.$oc.css("overflow-x", "scroll"), c.$ul.css("-webkit-transform", "translateZ(0px)"), c.$oc.css("-webkit-overflow-scrolling", "touch");
                else {
                    var d = 0;
                    this.tham = new a.fn.tn3.TouchClass(c.$ul, c.isVertical, function(a) {
                        d = a.coor, a.originalEvent.preventDefault()
                    }, function() {
                        d = c.$ul.position()[c.edge]
                    }, function(a) {
                        (a = d + a) < 0 && a > -(c.listSize - c.containerSize) && b.imager.ts.doTranslate(c.$ul, a, c.$ul.position().top)
                    }, function() {}, function(a) {
                        c.clickOn(a)
                    }, function() {})
                }
            },
            initAlbumsTouch: function(b) {
                var c = b.albums.$in,
                    d = this;
                if (this.ofscroll) c.css("overflow-y", "scroll"), c.css("overflow-x", "hidden"), c.find("*").css("-webkit-transform", "translateZ(0px)"), c.css("-webkit-overflow-scrolling", "touch"), b.albums.$c.on("albums_click", function() {});
                else {
                    var e, f = 0;
                    this.aham = new a.fn.tn3.TouchClass(b.albums.$c, !0, function() {}, function() {
                        f = c.position().top
                    }, function(a) {
                        a = f + a, e = -b.albums.lastac.position().top - b.albums.lastac.height() + c.height(), a < 0 && a > e && b.imager.ts.doTranslate(c, 0, a)
                    }, function() {}, function(a) {
                        d.reset(b), b.albums.clickOn(a)
                    }, function() {})
                }
            },
            slowdown: function(a, b, c) {
                a = a.imager.ts.vendorPrefix, b.css(a + "transition", "all 150ms ease-in 0ms"), b.css(a + "transform", "translate3d(" + Math.round(c / 2) + "px, 0px, 0px)")
            }
        }, a.fn.tn3.Transitions.define({
            type: "translate",
            config: {
                duration: 250,
                direction: "auto",
                easing: "easeOutQuint"
            },
            vendorPrefix: null,
            ao: {},
            drag_dir: null,
            f: function(a, b, c, d) {
                var e = this.getSlidePositions(a, "auto" == c.direction ? d : c.direction),
                    f = a.parent(),
                    g = this;
                f && (ipos = f.position(), void 0 == ipos && (ipos = {
                    left: 0,
                    top: 0
                }), Math.abs(ipos.left) >= a.width() ? (this.stop(a, b, c), f.off("webkitTransitionEnd")) : (0 != ipos.left ? (this.ao.p = ipos.left, "left" == this.drag_dir && e.pos < 0 ? e.pos = 0 : "right" == this.drag_dir && e.pos > 0 && (e.pos = 0)) : (this.ao.p = 0, this.doTranslate(b, "left" == d ? a.width() : -b.width(), 0)), f.one("webkitTransitionEnd", function() {
                    g.stop(a, b, c)
                }), f.css(this.vendorPrefix + "transition", "all 250ms ease-out 0ms"), f.css(this.vendorPrefix + "transform", "translate3d(" + Math.round(-e.pos) + "px, 0px, 0px)")))
            },
            stop: function(a, b) {
                this.doTranslate(b, 0, 0), this.doTranslate(a.parent(), 0, 0), this.end()
            },
            doTranslate: function(a, b, c) {
                a.css(this.vendorPrefix + "transition", "all 0ms").css(this.vendorPrefix + "transform", "translate3d(" + Math.round(b) + "px, " + Math.round(c) + "px, 0px)")
            }
        })
    }(jQuery),
    function(a) {
        a.fn.tn3.TouchClass = function(a, b, c, d, e, f, g, h) {
            for (this.$c = a, this.startCB = c, this.moveOneCB = d, this.moveCB = e, this.endCB = f, this.tapCB = g, this.swipeCB = h, b && (this.getDistance = this.getVDistance), this.vertical = b, b = ["webkit", "moz", "ms", "o", ""], c = {
                    userSelect: "none",
                    touchCallout: "none",
                    userDrag: "none",
                    tapHighlightColor: "rgba(0,0,0,0)"
                }, d = "", e = 0; e < b.length; e++)
                for (var i in c) d = i, b[e] && (d = b[e] + d.substring(0, 1).toUpperCase() + d.substring(1)), a[0].style[d] = c[i];
            this.init()
        }, a.fn.tn3.TouchClass.prototype = {
            $c: null,
            config: null,
            start: null,
            vertical: null,
            startCB: null,
            moveOneCB: null,
            moveCB: null,
            endCB: null,
            swipeCB: null,
            isTap: null,
            finger: !1,
            init: function() {
                var a = this;
                this.$c.on("touchstart", function(b) {
                    a.finger || (a.finger = !0, a.start = a.getPosition(b.originalEvent.touches), a.isTap = !0, a.$c.on("touchend touchcancel", function(b) {
                        a.end.call(a, b)
                    }), !1 !== a.startCB({
                        coor: a.start[a.vertical ? "top" : "left"],
                        originalEvent: b
                    }) && a.$c.one("touchmove", function(b) {
                        a.moveOne.call(a, b)
                    }))
                })
            },
            moveOne: function(a) {
                this.moveOneCB(this.getDistance(this.start, this.getPosition(a.originalEvent.touches)));
                var b = this;
                this.$c.on("touchmove", function(a) {
                    b.move.call(b, a)
                }), this.isTap = !1
            },
            move: function(a) {
                this.moveCB(this.getDistance(this.start, this.getPosition(a.originalEvent.touches)))
            },
            end: function() {
                this.$c.off("touchmove touchend touchcancel"), this.isTap ? this.tapCB(this.start) : this.endCB(), this.finger = !1
            },
            getPosition: function(a) {
                return {
                    left: a.item(0).pageX,
                    top: a.item(0).pageY
                }
            },
            getDistance: function(a, b) {
                return b.left - a.left
            },
            getVDistance: function(a, b) {
                return b.top - a.top
            },
            destroy: function() {
                this.$c.off("touchstart touchmove touchend touchcancel")
            }
        }
    }(jQuery), jQuery(function() {
        calculator.errors = {
            JS_ERROR_PRICE: payment_calc_i18n.js_error_price,
            JS_ERROR_RATE: payment_calc_i18n.js_error_rate,
            JS_ERROR_LOAN_TERM: payment_calc_i18n.js_error_loan_term,
            JS_ERROR_DOWN_PAYMENT: payment_calc_i18n.js_error_down_payment,
            JS_ERROR_TRADEIN: payment_calc_i18n.js_error_tradein,
            JS_ERROR_TRADEIN_DOWN_PAYMENT: payment_calc_i18n.js_error_tradein_down_payment
        }
    });
var EXIT_CUSTOM_MODE = payment_calc_i18n.exit_custom_mode,
    calculator = {
        selector: "payment-calculator-container",
        container: null,
        months: null,
        price: null,
        rate: null,
        loan_term: null,
        custom_lt_mode: null,
        custom_month: null,
        down_payment: null,
        value_tradein: null,
        settings: null,
        fields: null,
        mainIndex: null,
        offset: 0,
        data: null,
        errors: null,
        custom_rate_enabled: !0,
        custom_loan_term_enabled: !0,
        fixed_rate_to_month: !1,
        default_disclaimer: null,
        init: function(a, b, c) {
            try {
                var d = this;
                if (null === d.container) {
                    if (d.container = jQuery("." + d.selector), 0 === d.container.length) throw "Container " + d.selector + " does not exist!";
                    d.fields = {
                        price: jQuery(d.container).find("#price"),
                        down_payment: jQuery(d.container).find("#down_payment"),
                        rate: jQuery(d.container).find("#rate"),
                        loan_term: jQuery(d.container).find("#loan_term"),
                        value_tradein: jQuery(d.container).find("#value_tradein"),
                        cta_button: jQuery(d.container).find(".payment-calculator-cta-btn"),
                        disclaimer: jQuery(d.container).find(".payment-calculator-disclaimer")
                    }, d.default_disclaimer || (d.default_disclaimer = d.fields.disclaimer.html())
                }
                if (a = "new", void 0 !== a && (a = "new" === a.toLowerCase() ? "new" : "used"), d.toggle_custom_loan_term_switcher(d.custom_loan_term_enabled), "undefined" == typeof finance_settings && void 0 === finance_settings[a]) throw "Finance settings were not defined for vehicle type: " + a;
                if (d.settings = finance_settings[a], c && (jQuery.each(c, function(a, b) {
                        d.settings[a] = b
                    }), void 0 !== c.price && jQuery.isNumeric(c.price) && (b = c.price)), "object" == typeof d.fields.loan_term) {
                    d.fields.loan_term.html("");
                    var e = d.settings.term_list ? d.settings.term_list.split(",") : [12, 24, 36, 48, 60, 72, 84];
                    jQuery.each(e, function(a, b) {
                        d.fields.loan_term.append('<option value="' + b + '">' + b + " " + d.getTermUnit() + "</option>")
                    })
                }
                if ("rate_list" in d.settings && d.settings.rate_list) {
                    d.fields.rate.html("");
                    var f = d.settings.rate_list.split(",");
                    jQuery.each(f, function(a, b) {
                        d.fields.rate.append('<option value="' + b + '">' + b + " %</option>")
                    })
                }
                if (d.settings.rate && d.setRate(d.settings.rate), d.settings.length && d.setLoanTerm(d.settings.length), !b || !1 === jQuery.isNumeric(b)) return;
                if (d.fields.price.val(b), d.settings.down) {
                    var g = (d.settings.down / 100 * b).toFixed(0);
                    d.fields.down_payment.val(g)
                }
                if (DealerInspireInventory.options.is_inventory_page && "enabled" === d.settings.cta_button_state) {
                    var h = d.settings.cta_button_label ? d.settings.cta_button_label : "Verify This Payment";
                    d.fields.cta_button.text(h), d.fields.cta_button.parents(".payment-calculator-cta-wrap").removeClass("hidden"), jQuery(d.fields.cta_button).on("click", function(a) {
                        a.preventDefault(), jQuery.fancybox.close();
                        var b = jQuery(".cta-button.vdp-primary");
                        0 === b.length && (b = jQuery(".cta-button.block.button-form.fancybox")), b.trigger("click")
                    })
                }
                "custom_rate_enabled" in d.settings && d.toggle_custom_interest_rate_switcher(d.settings.custom_rate_enabled), "custom_loan_term_enabled" in d.settings && d.toggle_custom_loan_term_switcher(d.settings.custom_loan_term_enabled), "fixed_rate_to_month" in d.settings && d.toggle_fixed_rate_to_month(d.settings.fixed_rate_to_month), d.fixed_rate_to_month && jQuery(d.fields.loan_term).on("change", function(a) {
                    jQuery(d.fields.rate).prop("selectedIndex", jQuery(d.fields.loan_term).prop("selectedIndex")), d.process()
                }), "disclaimer" in d.settings && d.settings.disclaimer ? d.fields.disclaimer.html(d.settings.disclaimer) : d.fields.disclaimer.html(d.default_disclaimer), jQuery("body").trigger("im-payment-calculator-post-init")
            } catch (a) {
                if ("undefined" != typeof console) return console.log("[Payment Calculator] Failed to set settings! " + a), !1
            }
        },
        process: function(a) {
            a && (this.container = jQuery(a).parents(".formBlock")), this.validate() && this.calculate()
        },
        validate: function(a) {
            try {
                return jQuery("body").trigger("im-payment-calculator-validate"), this.price = Number(this.clean_number(this.fields.price.val())), this.rate = Number(parseFloat(this.clean_number(this.fields.rate.val()))), this.loan_term = Number(this.clean_number(this.fields.loan_term.val())), this.down_payment = Number(this.clean_number(this.fields.down_payment.val())), this.value_tradein = Number(this.clean_number(this.fields.value_tradein.val())), a ? !isNaN(this.price) && this.price > 0 && !isNaN(this.rate) && this.rate > 0 && this.rate < 100 && !isNaN(this.loan_term) && this.loan_term > 0 : isNaN(this.price) || this.price <= 0 ? (alert(this.errors.JS_ERROR_PRICE), !1) : isNaN(this.rate) || this.rate < 0 || this.rate > 100 ? (alert(this.errors.JS_ERROR_RATE), !1) : isNaN(this.loan_term) || this.loan_term < 0 ? (alert(this.errors.JS_ERROR_LOAN_TERM), !1) : isNaN(this.down_payment) || this.down_payment < 0 || this.down_payment >= this.price ? (alert(this.errors.JS_ERROR_DOWN_PAYMENT), !1) : isNaN(this.value_tradein) || this.value_tradein < 0 || this.value_tradein >= this.price ? (alert(this.errors.JS_ERROR_TRADEIN), !1) : !(this.value_tradein + this.down_payment >= this.price) || (alert(this.errors.JS_ERROR_TRADEIN_DOWN_PAYMENT), !1)
            } catch (a) {
                return "undefined" != typeof console && console.log(a.stack), !1
            }
        },
        calculate: function() {
            if (jQuery("body").trigger("im-payment-calculator-calculate"), !calculator.months) {
                calculator.months = [];
                for (var a = calculator.custom_loan_term_enabled && jQuery("#loan_term_disabled").length > 0 ? jQuery("#loan_term_disabled option") : jQuery("#loan_term option"), b = 0; b < a.length; b++) calculator.months.push(parseInt(a[b].value))
            }
            if (this.custom_month = [].concat(this.months), this.mainIndex = jQuery.inArray(parseInt(this.loan_term), this.custom_month), -1 === this.mainIndex) {
                var c = parseInt(this.loan_term);
                this.temp_index = 0;
                for (var d = this.custom_month.length, e = 0; e < d; e++)
                    if (c < this.custom_month[e]) {
                        this.mainIndex = e, this.custom_month.splice(e, 0, c);
                        break
                    }
            }
            if (this.data = [], this.addCustomFees(), this.principal = this.price - this.down_payment - (null == this.value_tradein ? 0 : this.value_tradein), 0 === this.rate)
                for (var f = 0; f < this.custom_month.length; f++) {
                    var g = Number((this.principal / this.custom_month[f]).toFixed(0));
                    this.uses_biweekly_payments() ? g = 12 * g / 26 : this.uses_weekly_payments() && (g = 12 * g / 52), this.data[f] = Math.ceil(g)
                } else
                    for (var h = 100 * this.rate / 1e4 / 12, f = 0; f < this.custom_month.length; f++) {
                        var i = Math.pow(1 + h, this.custom_month[f]),
                            g = Number((this.principal * i * h / (i - 1)).toFixed(0));
                        this.uses_biweekly_payments() ? g = 12 * g / 26 : this.uses_weekly_payments() && (g = 12 * g / 52), this.data[f] = Math.ceil(g)
                    }
            this.showResults(0)
        },
        setRate: function(a, b) {
            try {
                var c = this;
                if (b = void 0 !== b && b, !1 === jQuery.isNumeric(a)) throw new Error("Invalid rate.");
                a = parseFloat(a), 0 === c.fields.rate.find("option[value='" + a + "']").length && c.add_new_rate(a), c.fields.rate.val(a), !0 === b && !0 === c.validate(!0) && c.calculate()
            } catch (a) {
                "undefined" != typeof console && console.log(a.stack)
            }
        },
        setLoanTerm: function(a, b) {
            try {
                var c = this;
                if (b = void 0 !== b && b, !1 === jQuery.isNumeric(a)) throw new Error("Invalid length.");
                a = parseInt(a), 0 === c.fields.loan_term.find("option[value='" + a + "']").length && c.add_new_loan_term(a), c.fields.loan_term.val(a), !0 === b && !0 === c.validate(!0) && c.calculate()
            } catch (a) {
                "undefined" != typeof console && console.log(a.stack)
            }
        },
        setDownPayment: function(a, b) {
            try {
                var c = this;
                if (b = void 0 !== b && b, !1 === jQuery.isNumeric(a)) throw new Error("Invalid down payment.");
                if ((a = parseInt(a)) < 100) {
                    if (this.fields.price.val() <= 0) throw new Error("Failed to calculate down payment. Vehicle price is not set or empty");
                    a = Math.ceil(this.fields.price.val() * (a / 100))
                }
                c.fields.down_payment.val(a), !0 === b && !0 === c.validate(!0) && c.calculate()
            } catch (a) {
                "undefined" != typeof console && console.log(a.stack)
            }
        },
        addCustomFees: function() {
            try {
                var a = this,
                    b = window.payment_calculator_fees ? payment_calculator_fees(a) : a.settings.fees;
                if (void 0 === b || !b) return !1;
                jQuery(".payment-calculator-custom-fees-container").remove(), jQuery(this.container).find(".form-button:first").before('<div class="payment-calculator-custom-fees-container"></div>'), "object" == typeof b && jQuery.each(b, function(b, c) {
                    var d = 0;
                    "string" == typeof c.amount && c.amount.search("%") > -1 && a.price > 0 ? (d = a.price * (c.amount.replace("%", "") / 100), d = d.toFixed(2)) : d = c.amount, !1 !== jQuery.isNumeric(d) && (void 0 !== c.hidden && !0 === c.hidden || jQuery(".payment-calculator-custom-fees-container").append("<div><label>" + c.label + ': </label><span class="custom-fee"> ' + DealerInspireInventory.format.currency(d) + "</span></div>"), a.price += parseFloat(d))
                })
            } catch (a) {
                "undefined" != typeof console && console.log("[Payment Calculator] Failed to add fees!" + a)
            }
        },
        setFees: function(a, b) {
            try {
                var c = this;
                if (b = void 0 !== b && b, void 0 === a || !a) return !1;
                c.settings.fees = a, !0 === b && !0 === c.validate(!0) && c.calculate()
            } catch (a) {
                "undefined" != typeof console && console.log("[Payment Calculator] Failed to add fees!" + a)
            }
        },
        setMonths: function(a, b) {
            try {
                var c = this;
                if (b = void 0 !== b && b, void 0 === a || !a) return !1;
                jQuery.isArray(a) && (calculator.months = a, !0 === b && !0 === c.validate(!0) && c.calculate())
            } catch (a) {
                "undefined" != typeof console && console.log("[Payment Calculator] Failed to update months!" + a)
            }
        },
        setCustomMonth: function(a, b) {
            try {
                var c = this;
                if (b = void 0 !== b && b, void 0 === a || !a) return !1;
                jQuery.isArray(a) && (calculator.custom_month = a, !0 === b && !0 === c.validate(!0) && c.calculate())
            } catch (a) {
                "undefined" != typeof console && console.log("[Payment Calculator] Failed to update custom month!" + a)
            }
        },
        calculateDownPaymentPercentage: function() {
            try {
                if (this.settings.down > 100) return this.down_payment;
                var a = this.fields.price.val();
                return a && this.down_payment ? (this.down_payment / a * 100).toFixed(0) : 0
            } catch (a) {
                return console.log("Failed to calculate down payment percentage. " + a), 0
            }
        },
        getTermUnit: function() {
            if (!this.settings) return payment_calc_i18n.months;
            if (!this.settings.payment_frequency) return payment_calc_i18n.months;
            switch (this.settings.payment_frequency.toString()) {
                case "12":
                    return payment_calc_i18n.months;
                case "24":
                case "26":
                    return payment_calc_i18n.months + " " + payment_calc_i18n.biweekly;
                case "52":
                    return payment_calc_i18n.months + " " + payment_calc_i18n.weekly;
                default:
                    return payment_calc_i18n.months
            }
        },
        showResults: function(a) {
            if (null === this.data) return !1;
            var b = this.custom_month.length,
                c = 0 === a ? this.mainIndex : this.mainIndex + this.offset + a;
            if (c < 0 || c > b - 1) return !1;
            this.offset += a;
            var d = c > 0 ? c - 1 : null,
                e = c < b - 1 ? c + 1 : null;
            this.showPrev(d), this.showMain(c), this.showNext(e), this.showTotalAmountResult(), this.updateDisclaimer()
        },
        showTotalAmountResult: function() {
            var a = this.principal,
                b = payment_calc_i18n.payment_info_monthly;
            this.uses_biweekly_payments() ? b = payment_calc_i18n.payment_info_biweekly : this.uses_weekly_payments() && (b = payment_calc_i18n.payment_info_weekly), jQuery(".payment-info").html(b), jQuery(".amount-info > span").html("$" + this.number_format(a, 0, ".", ","))
        },
        showMain: function(a) {
            jQuery("td.mmain > .mbox-main").html("$" + this.data[a]), jQuery("td.mmain > .mtext-main").html(this.custom_month[a] + " " + this.getTermUnit())
        },
        showPrev: function(a) {
            null !== a ? (jQuery("td.mleft > .mbox").html("$" + this.data[a]), jQuery("td.mleft > .mtext").html(this.custom_month[a] + " " + this.getTermUnit())) : (jQuery("td.mleft > .mbox").html("--"), jQuery("td.mleft > .mtext").html("--"))
        },
        showNext: function(a) {
            null !== a ? (jQuery("td.mright > .mbox").html("$" + this.data[a]), jQuery("td.mright > .mtext").html(this.custom_month[a] + " " + this.getTermUnit())) : (jQuery("td.mright > .mbox").html("--"), jQuery("td.mright > .mtext").html("--"))
        },
        updateDisclaimer: function() {
            try {
                var a = this.container.find(".payment-calculator-disclaimer");
                if (0 === a.length) return;
                a.find(".im-finance-setting-length").text(this.loan_term), a.find(".im-finance-setting-rate").text(this.rate), a.find(".im-finance-setting-downpayment").text(this.calculateDownPaymentPercentage()),
                    0 === a.find(".payment-amount").length && a.append('<span class="payment-amount"></span>');
                var b = "Monthly";
                this.uses_biweekly_payments() ? b = "Biweekly" : this.uses_weekly_payments() && (b = "Weekly"), a.find(".payment-amount").text(b + " payments of $" + this.number_format(this.data[this.mainIndex], 0, ".", ",") + " is only an estimate.")
            } catch (a) {
                console.log("Failed to update payment calculator dynamic disclaimer. " + a)
            }
        },
        clean_number: function(a) {
            return void 0 === a ? a : a = a.toString().replace(/\$|\,/g, "")
        },
        number_format: function(a, b, c, d) {
            var e = a,
                f = isNaN(b = Math.abs(b)) ? 2 : b,
                g = void 0 === c ? "," : c,
                h = void 0 === d ? "." : d,
                i = e < 0 ? "-" : "",
                j = parseInt(e = Math.abs(+e || 0).toFixed(f)) + "",
                k = (k = j.length) > 3 ? k % 3 : 0;
            return i + (k ? j.substr(0, k) + h : "") + j.substr(k).replace(/(\d{3})(?=\d)/g, "$1" + h) + (f ? g + Math.abs(e - j).toFixed(f).slice(2) : "")
        },
        getTotalAmountResult: function(a, b, c) {
            if (0 === b) return a;
            var d = .01 * b / 12;
            return a * d / (1 - Math.pow(1 + d, -c)) * c
        },
        add_new_rate: function(a, b) {
            b && (this.container = b);
            var c = this.fields.rate;
            c.append('<option value="' + a + '" label="' + a + ' %">' + a + " %</option>"), c.html(c.find("option:not(':first-child')").sort(function(a, b) {
                return parseFloat(a.text) == parseFloat(b.text) ? 0 : parseFloat(a.text) < parseFloat(b.text) ? -1 : 1
            }))
        },
        clear_rates: function(a) {
            a && (this.container = a), this.fields.rate.html("")
        },
        add_new_loan_term: function(a, b) {
            b && (this.container = b);
            var c = this.fields.loan_term,
                d = a + " " + this.getTermUnit();
            c.append('<option value="' + a + '" label="' + d + '">' + d + "</option>"), c.html(c.find("option:not(':first-child')").sort(function(a, b) {
                return a.text === b.text ? 0 : a.text < b.text ? -1 : 1
            }))
        },
        toggle_custom_interest_rate_switcher: function(a) {
            this.custom_rate_enabled = a, a ? $("#custom_interest_rate_switcher").show() : $("#custom_interest_rate_switcher").hide()
        },
        toggle_custom_loan_term_switcher: function(a) {
            this.custom_loan_term_enabled = a, a ? $("#custom_loan_term_switcher").removeClass("hidden") : $("#custom_loan_term_switcher").addClass("hidden")
        },
        toggle_fixed_rate_to_month: function(a) {
            this.fixed_rate_to_month = a, a ? $("#rate").prop("disabled", !0) : $("#rate").prop("disabled", !1)
        },
        uses_biweekly_payments: function() {
            return null !== this.settings && jQuery.inArray(this.settings.payment_frequency, ["24", "26"]) > -1
        },
        uses_weekly_payments: function() {
            return null !== this.settings && "52" === this.settings.payment_frequency
        }
    };
jQuery(function(a) {
    var b = payment_calc_i18n.custom,
        c = a("#rate");
    a("#custom_interest_rate_switcher").click(function() {
        return a(this).text() !== EXIT_CUSTOM_MODE ? (c.hide().attr("name", "rate_disabled").attr("id", "rate_disabled"), a(this).before('<div class="custom-input-wrapper" id="rate_custom_input_wrapper"></div>'), a("#rate_custom_input_wrapper").append('<div class="input-append"><input type="text" id="rate" name="rate" class="text rate" /><span class="add-on">%</div>'), c.focus(), calculator.fields.rate = c, b = a(this).text(), a(this).text(EXIT_CUSTOM_MODE)) : (a(this).text(b), a("#rate_custom_input_wrapper").remove(), a("#rate_disabled").show().attr("name", "rate").attr("id", "rate"), calculator.fields.rate = c), !1
    });
    var d = payment_calc_i18n.custom,
        e = a("#loan_term");
    if (a("#custom_loan_term_switcher").click(function() {
            return a(this).text() !== EXIT_CUSTOM_MODE ? (calculator.custom_lt_mode = !1, e.hide().attr("name", "loan_term_disabled").attr("id", "loan_term_disabled"), a(this).before('<div class="custom-input-wrapper" id="loan_term_custom_input_wrapper"></div>'), a("#loan_term_custom_input_wrapper").append('<div class="input-append"><input type="text" id="loan_term" name="loan_term" class="text loan_term" /><span class="add-on">mo.</div>'), e.focus(), d = a(this).text(), a(this).text(EXIT_CUSTOM_MODE), calculator.fields.loan_term = e) : (calculator.custom_lt_mode = !0, a(this).text(d), a("#loan_term_custom_input_wrapper").remove(), a("#loan_term_disabled").show().attr("name", "loan_term").attr("id", "loan_term"), calculator.fields.loan_term = e), !1
        }), "undefined" != typeof attributes && "1" === attributes.auto_calculate) {
        var f = "overrides" in attributes ? JSON.parse(attributes.overrides) : null;
        calculator.init(attributes.vehicle_type, attributes.price, f), calculator.process()
    } else void 0 !== DealerInspireInventory && DealerInspireInventory.options.is_inventory_page || calculator.init()
});
var DealerInspireCookie = {
        CreateCookie: function(a, b, c) {
            var d = "";
            if (c) {
                var e = new Date;
                e.setTime(e.getTime() + 24 * c * 60 * 60 * 1e3), d = "; expires=" + e.toGMTString()
            } else d = "";
            "object" == typeof b && (b = JSON.stringify(b)), document.cookie = escape(a) + "=" + escape(b) + d + "; path=/"
        },
        ReadCookie: function(a) {
            var b = document.cookie,
                c = b.indexOf(" " + a + "=");
            if (-1 == c && (c = b.indexOf(a + "=")), -1 == c) b = null;
            else {
                c = b.indexOf("=", c) + 1;
                var d = b.indexOf(";", c); - 1 == d && (d = b.length), b = unescape(b.substring(c, d))
            }
            return b || null
        },
        EraseCookie: function(a) {
            this.CreateCookie(a, "", -1)
        }
    },
    DealerInspireBrowserDetection = {
        isIE: {
            any: function() {
                return window.navigator.userAgent.indexOf("MSIE ") > 0
            },
            eightOrLess: function() {
                var a = window.navigator.userAgent.indexOf("MSIE ");
                return a > 0 && parseInt(window.navigator.userAgent.substring(a + 5, window.navigator.userAgent.indexOf(".", a))) <= 8
            },
            nineOrLess: function() {
                var a = window.navigator.userAgent.indexOf("MSIE ");
                return a > 0 && parseInt(window.navigator.userAgent.substring(a + 5, window.navigator.userAgent.indexOf(".", a))) <= 9
            }
        },
        isFireFox: function() {
            return window.navigator.userAgent.indexOf("Firefox") > -1
        },
        isMobile: {
            Android: function() {
                return !!navigator.userAgent.match(/Android/i)
            },
            BlackBerry: function() {
                return !!navigator.userAgent.match(/BlackBerry/i)
            },
            iOS: function() {
                return !!navigator.userAgent.match(/iPhone|iPad|iPod/i)
            },
            Windows: function() {
                return !!navigator.userAgent.match(/IEMobile/i)
            },
            any: function() {
                return jQuery(window).width() <= 1024
            },
            tablet: function() {
                return jQuery(window).width() <= 1024 && jQuery(window).width() > 767
            },
            phone: function() {
                return jQuery(window).width() < 767
            }
        }
    },
    DealerInspireCallTracking = {
        ready: null,
        options: null,
        numbers: [],
        cookie_name: "im_phone_numbers",
        cookie: "",
        url_params: {},
        init: function() {
            try {
                var a = this;
                if ("undefined" == typeof inventory_localization || void 0 === inventory_localization.call_tracking) return !1;
                if ("undefined" != typeof inventory_localization && inventory_localization.is_user_logged_in, a.options = inventory_localization.call_tracking, "enabled" !== inventory_localization.call_tracking.state) return;
                jQuery(window).error(function(b) {
                    null === a.ready && (a.ready = "failed", "undefined" != typeof console && console.log("Failed to initiate DI Call Tracking due to a JS error on this page."))
                }), jQuery(function() {
                    a.ready = !0, a.url_params = DealerInspireInventory.query.to_obj(window.location.href.split("?").pop(), !0), a.cookie = DealerInspireCookie.ReadCookie(a.cookie_name), a.gclid(), a.utm(), a.change_numbers()
                })
            } catch (a) {
                "undefined" != typeof console && console.log("DealerInspireCallTracking Error: " + a)
            }
        },
        gclid: function() {
            var a = this;
            this.options.gclid && !0 === a.is_active("gclid", "gclid") && jQuery.each(this.options.gclid, function(b, c) {
                c.source = "gclid", c.id = "gclid", a.numbers.push(c)
            })
        },
        utm: function() {
            var a = this;
            this.options.numbers && jQuery.each(this.options.numbers, function(b, c) {
                !0 === a.is_active("utm", c.source) && (c.id = c.source, c.source = "utm", a.numbers.push(c))
            })
        },
        is_active: function(a, b) {
            var c = this;
            if (c.cookie) {
                var d = !1,
                    e = c.cookie.split("|");
                if (jQuery.each(e, function(c, f) {
                        if (e[0] === a + "=>" + b) return d = !0, !0
                    }), !0 === d) return !0
            }
            switch (a) {
                case "gclid":
                    return void 0 !== c.url_params.gclid;
                case "utm":
                    return void 0 !== c.url_params.utm_source && c.url_params.utm_source === b
            }
            return !1
        },
        change_numbers: function() {
            try {
                var a = this,
                    b = [],
                    c = [];
                if (a.numbers) {
                    jQuery.each(a.numbers, function(d, e) {
                        var f = e.source + "=>" + e.id; - 1 === jQuery.inArray(f, b) && b.push(f), !1 !== jQuery.inArray(e.find, c) && (c.push(e.find), a.dom_iterator(e.find, e.replace))
                    });
                    var d = b.join("|");
                    d && d !== a.cookie && DealerInspireCookie.CreateCookie(a.cookie_name, d, 30)
                }
            } catch (a) {
                DealerInspireInventory.log("DealerInspireCallTracking Error: " + a)
            }
        },
        dom_iterator: function(a, b, c) {
            try {
                a = a.replace(/[^0-9]/g, "");
                var d = [a, a.replace(/(\d{3})(\d{3})(\d{4})/, "$1-$2-$3"), a.replace(/(\d{3})(\d{3})(\d{4})/, "($1) $2-$3")];
                b = b.replace(/[^0-9]/g, "");
                for (var e = [b, b.replace(/(\d{3})(\d{3})(\d{4})/, "$1-$2-$3"), b.replace(/(\d{3})(\d{3})(\d{4})/, "($1) $2-$3")], f = this, g = (c || document.body).childNodes, h = g.length, i = ["html", "head", "style", "link", "title", "meta", "script", "object", "iframe"]; h--;) {
                    var j = g[h];
                    if (1 === j.nodeType && ("A" === j.nodeName && j.href.match(/^tel:/) && (j.href = j.href.replace(a, b)), -1 === i.indexOf(j.nodeName.toLowerCase()) && f.dom_iterator(a, b, j)), null != j && 3 === j.nodeType && void 0 !== j.data) {
                        var k = j.data;
                        jQuery.each(d, function(a, b) {
                            var c = e[a];
                            k = k.replace(b, c)
                        }), k != j.data && (j.data = k)
                    }
                }
            } catch (a) {
                DealerInspireInventory.log(a.stack, !1)
            }
        }
    };
DealerInspireCallTracking.init();
var DealerInspireCompare = {
    options: null,
    compare_text: null,
    interface_type: null,
    mobile_tab_container: ".mobile-tab-content-inside .compare-vehicles",
    vehicles: [],
    _cookie_name: "inventory_compare_cookie",
    init: function() {
        var a = this;
        if ("undefined" == typeof inventory_localization || void 0 === inventory_localization.compare_settings) return !1;
        if (!1 === inventory_localization.is_inventory_page) return !1;
        a.interface_type = inventory_localization.is_inventory_page, a.options = inventory_localization;
        var b = this.options.compare_settings.position;
        if (jQuery(".compare-vehicle:not(.selected):first") && (this.compare_text = jQuery(".compare-vehicle:not(.selected):first").html()), this.compare_text = this.compare_text ? this.compare_text : "Compare Vehicle", "vdp" === DealerInspireCompare.interface_type && 0 === jQuery("#compare-expand-btn").length && jQuery("#compare-vehicles-sidr").before(a.template("compare_expand_btn")), !1 !== DealerInspireBrowserDetection.isIE.nineOrLess() && (jQuery("#compare-expand-btn").css("left", "0px"), jQuery(".sidr#compare_div").length > 0 && "none" !== jQuery(".sidr#compare_div").css("display") && jQuery("#compare-expand-btn").css("margin-left", "260px")), "function" == typeof jQuery.fn.sidr && jQuery("#compare-expand-btn").sidr({
                name: "compare_div",
                side: b,
                onOpen: function() {
                    jQuery("#compare-expand-btn").attr("aria-expanded", "true"), "left" === b ? jQuery("#compare-expand-btn").animate({
                        marginLeft: 260
                    }, 200) : jQuery("#compare-expand-btn").animate({
                        marginRight: 260
                    }, 200)
                },
                onClose: function() {
                    jQuery("#compare-expand-btn").attr("aria-expanded", "false"), "left" === b ? jQuery("#compare-expand-btn").animate({
                        marginLeft: 0
                    }, 200) : jQuery("#compare-expand-btn").animate({
                        marginRight: 0
                    }, 200)
                }
            }), null !== (inventory_compare_cookie = DealerInspireCookie.ReadCookie(this._cookie_name))) try {
            jQuery.each(JSON.parse(inventory_compare_cookie), function(b, c) {
                a.add_vehicle(c.vin, c.title, c.thumbnail, c.vdp_link)
            }), a.add_compare_actions(), setTimeout(function() {
                jQuery("#compare-expand-btn").fadeIn()
            }, 500), a.mark_selected()
        } catch (a) {
            "undefined" != typeof console && console.log("Failed to restore compared vehicles from cookie: " + a)
        }
        jQuery(document).on("click", ".compare-vehicle", function() {
            try {
                if (jQuery(this).hasClass("disabled")) return !1;
                jQuery(c).addClass("disabled");
                var c = this,
                    d = jQuery(c).attr("rel"),
                    e = "",
                    f = "";
                if (a.vehicles && jQuery.grep(a.vehicles, function(a) {
                        return a.vin === d
                    }).length > 0) a.remove_vehicle(d), jQuery(c).removeClass("disabled");
                else if (a.vehicles && a.vehicles.length >= 4) jQuery(c).removeClass("disabled"), DealerInspireModalNotification.alert("You can only compare 4 vehicles at a time. Please remove one before you can compare another vehicle.", "Vehicles Compare Error!");
                else {
                    if ("vrp" == a.interface_type) {
                        var g = jQuery(this).closest(".vehicle").find(".vehicle-image img:first");
                        if (vehicle_image = g.attr("src"), f = g.parent("a").attr("href"), "gridview" === DealerInspireInventory.options.current_view) {
                            var h = $(this).prop("rel");
                            e = $(".vehicle[data-vin=" + h + "]").find(".vehicle-title").text().trim(), void 0 === e && (e = "")
                        } else e = jQuery(this).closest(".vehicle").find(".vehicle-overview,.vehicle-card-content").attr("title")
                    } else if ("vdp" == a.interface_type) {
                        var g = jQuery(".mainvehicleimage,.gallerycarousel-thumbs").find("img:first");
                        vehicle_image = g.attr("src"), e = g.attr("alt"), f = window.location.href
                    }
                    var i = !0 === DealerInspireBrowserDetection.isMobile.any() && !0 === a.has_mobile_tab() ? jQuery(a.mobile_tab_container) : jQuery("#compare_div");
                    if (g) {
                        var j = g.clone().offset({
                            top: g.offset().top,
                            left: g.offset().left
                        }).css({
                            opacity: "0.5",
                            position: "absolute",
                            height: "150px",
                            width: "150px",
                            "z-index": "100"
                        }).appendTo(jQuery("body")).animate({
                            top: i.offset().top + 100,
                            left: "left" === b ? i.offset().left + 10 : jQuery(window).width() - 150,
                            width: 150,
                            height: 150,
                            zIndex: 1e4
                        }, 1e3, "easeOutQuart", function() {
                            a.add_vehicle(d, e, vehicle_image, f), a.add_compare_actions(), jQuery(c).removeClass("disabled"), a.vehicles && jQuery("#compare-expand-btn").fadeIn()
                        });
                        j.animate({
                            width: 0,
                            height: 0
                        }, function() {
                            jQuery(a).detach()
                        })
                    }
                    a.add_node(this), !1 !== DealerInspireBrowserDetection.isIE.nineOrLess() && jQuery("body").trigger("init-compare-btn-ie")
                }
            } catch (a) {
                DealerInspireInventory.log("Failed to compare vehicle: " + a, !1, !0)
            }
            return !1
        }), jQuery(document).on("click", ".comparebtn", function() {
            var b = jQuery(this).attr("rel");
            jQuery(".compare-vehicle[rel=" + b + "]").length > 0 ? jQuery(".compare-vehicle[rel=" + b + "]").click() : a.remove_vehicle(b)
        }), jQuery(document).on("click", "#show-compare", function() {
            a.show()
        }), jQuery(document).on("click", "#share-compare", function() {
            a.share()
        }), jQuery("body").on("vrp-ajax-complete init-compare-btn-ie", function(b) {
            !1 !== DealerInspireBrowserDetection.isIE.nineOrLess() && (jQuery("#compare-expand-btn").css("left", "0px"), jQuery(".sidr#compare_div").length > 0 && "none" !== jQuery(".sidr#compare_div").css("display") && jQuery("#compare-expand-btn").css("margin-left", "260px"), "init-compare-btn-ie" === b.type && void 0 === jQuery("#compare-expand-btn").data("events") && jQuery("#compare-expand-btn").sidr({
                name: "compare_div",
                side: "left",
                onOpen: function() {
                    jQuery("#compare-expand-btn").animate({
                        marginLeft: 260
                    }, 200), jQuery("#compare-expand-btn").attr("aria-expanded", "true")
                },
                onClose: function() {
                    jQuery("#compare-expand-btn").animate({
                        marginLeft: 0
                    }, 200), jQuery("#compare-expand-btn").attr("aria-expanded", "false")
                }
            }), null !== (inventory_compare_cookie = DealerInspireCookie.ReadCookie(this._cookie_name)) && setTimeout(function() {
                jQuery("#compare-expand-btn").show(), jQuery("#compare-expand-btn").sidr({
                    name: "compare_div",
                    side: "left",
                    onOpen: function() {
                        jQuery("#compare-expand-btn").animate({
                            marginLeft: 260
                        }, 200)
                    },
                    onClose: function() {
                        jQuery("#compare-expand-btn").animate({
                            marginLeft: 0
                        }, 200)
                    }
                }), a.mark_selected()
            }, 500))
        })
    },
    has_mobile_tab: function() {
        return jQuery(this.mobile_tab_container).length > 0
    },
    set_comparing_text: function(a) {
        jQuery(a).hasClass("expandbutton") || (jQuery(a).find(".button-text").length > 0 && (a = jQuery(a).find(".button-text")), jQuery(a).html(this.options.translate.comparing))
    },
    mark_selected: function() {
        var a = this;
        jQuery.each(a.vehicles, function(b, c) {
            var d = jQuery(".compare-vehicle[rel='" + c.vin + "']");
            d.length > 0 && a.add_node(d)
        })
    },
    template: function(a, b, c, d, e) {
        switch (a) {
            case "mobile_tab_vehicle":
            case "sidr_vehicle":
                return '<div id="' + b + '" class="vehicle"><h3><img src="' + this.options.plugin_url + 'js/fancybox/fancy_close.png" class="comparebtn" rel="' + b + '" style="vertical-align:middle"> ' + c + '</h3><a href="' + e + '"><img class="thumbnail" src="' + d + '" alt="' + c + '" /></a></div>';
            case "mobile_tab_actions":
                return '<div id="compare-actions"><a class="button small dark-button" id="show-compare">' + this.options.translate.compare_vehicles + "</a></div>";
            case "sidr_actions":
                return '<div id="compare-actions"><a class="button small dark-button" id="show-compare">' + this.options.translate.compare_vehicles + '</a><a class="button small dark-button" id="share-compare">' + this.options.translate.share + "</a></div>";
            case "compare_expand_btn":
                return '<a href="#" id="compare-expand-btn" class="hidden-phone hidden-xs position-left multi-button" style="display: inline;">Compare</a>'
        }
        return !1
    },
    add_node: function(a) {
        jQuery(a).addClass("selected"), this.set_comparing_text(a)
    },
    add_vehicle: function(a, b, c, d) {
        var e = this;
        jQuery("#compare_div").append(e.template("sidr_vehicle", a, b, c, d)), !0 === e.has_mobile_tab() && (jQuery(".initial-compare-vehicles").addClass("hidden"), jQuery(e.mobile_tab_container).append(e.template("mobile_tab_vehicle", a, b, c, d)));
        var f = [];
        e.vehicles && (f = jQuery.map(e.vehicles, function(a) {
            return a.vin
        })), -1 === jQuery.inArray(a, f) && (e.vehicles.push({
            vin: a,
            title: b,
            thumbnail: c,
            vdp_link: d
        }), e.save())
    },
    remove_vehicle: function(a) {
        var b = this,
            c = jQuery("#compare_div div#" + a + "," + b.mobile_tab_container + " div#" + a);
        c.slideUp(200, function() {
            c.remove(), jQuery(".compare-vehicle[rel='" + a + "']") && jQuery(".compare-vehicle[rel='" + a + "']").html(b.compare_text).removeClass("selected"), b.vehicles = jQuery.grep(b.vehicles, function(b) {
                return b.vin !== a
            }), b.vehicles.length < 2 && b.hide_compare_action(), 0 === b.vehicles.length && !0 === b.has_mobile_tab() && jQuery(".initial-compare-vehicles").removeClass("hidden"), b.save()
        })
    },
    hide_compare_action: function() {
        jQuery("div#compare-actions").remove()
    },
    add_compare_actions: function() {
        jQuery("#compare_div div.vehicle").length > 1 && 0 === jQuery("#compare_div div#compare-actions").length && (jQuery("#compare_div").prepend(this.template("sidr_actions")), !0 === this.has_mobile_tab() && jQuery(this.mobile_tab_container).prepend(this.template("mobile_tab_actions")))
    },
    show: function() {
        var a = this;
        if (!0 === DealerInspireBrowserDetection.isMobile.any()) {
            var b = "http://" + window.location.host + "/dealer-inspire-inventory/compare_vehicles/?";
            return jQuery.each(a.vehicles, function(a, c) {
                b += "&vin%5B%5D=" + c.vin
            }), window.open(b), !1
        }
        jQuery.sidr("close", "compare_div"), setTimeout(function() {
            jQuery.ajax({
                url: a.options.ajax_url,
                data: {
                    action: "im_ajax_call",
                    perform: "compare",
                    vehicles: jQuery.map(a.vehicles, function(a) {
                        return a.vin
                    })
                },
                type: "POST",
                dataType: "json",
                success: function(a) {
                    DealerInspireLightbox.open({
                        content: a.html,
                        title: "Compare Vehicles"
                    })
                }
            })
        }, 100)
    },
    share: function() {
        var a = this;
        if (!(a.vehicles && a.vehicles.length >= 2)) return !1;
        var b = "http://" + window.location.host + "/dealer-inspire-inventory/compare_vehicles/?";
        jQuery.each(a.vehicles, function(a, c) {
            b += "&vin%5B%5D=" + c.vin
        }), jQuery.sidr("close", "compare_div"), DealerInspireURLShortener.init(a.options.ajax_url, a.options.translate), DealerInspireURLShortener.create_short_url(b)
    },
    save: function() {
        this.vehicles && this.vehicles.length > 0 ? DealerInspireCookie.CreateCookie(this._cookie_name, JSON.stringify(this.vehicles), .5) : this.clear()
    },
    clear: function() {
        jQuery.sidr("close", "compare_div"), jQuery("#compare-expand-btn").hide("fast"), jQuery("#compare_div").html(""), this.vehicles = [], jQuery(".compare-vehicle").removeClass("selected"), jQuery(".compare-vehicle").html(this.compare_text), DealerInspireCookie.EraseCookie(this._cookie_name), !0 === this.has_mobile_tab() && (jQuery(this.mobile_tab_container).children(":not(.initial-compare-vehicles)").remove(), jQuery(".initial-compare-vehicles").removeClass("hidden"))
    }
};
DealerInspireCompare.init();
var DealerInspireDynamicTopBanners = {
    ready: null,
    orginal_top_text: null,
    $container: null,
    banners: [],
    css_class: "top-text-item",
    init: function() {
        var a = this;
        jQuery(window).error(function(b) {
            null === a.ready && (a.ready = "failed", "undefined" != typeof console && console.log("Failed to initiate Dynamic Banners due to a JS error on this page."))
        }), jQuery(function() {
            try {
                if ("vrp" !== DealerInspireInventory.options.is_inventory_page) return a.ready = !1, !1;
                if (a.get_banners(), !0 !== a.ready) return void DealerInspireInventory.log("No valid Dynamic Banners found.", !1, !0);
                DealerInspireInventory.log(a.banners.length + " valid Dynamic Banner(s) found.", !1, !0), a.$container = jQuery(".top-text"), 0 === a.$container.length && (jQuery(".post-content").prepend('<div class="top-text" />'), a.$container = jQuery(".top-text")), a.orginal_top_text = a.$container.find("." + a.css_class), jQuery("body").on("vrp-page-title-updated", function() {
                    setTimeout(a.update_banners(), 200)
                })
            } catch (a) {
                "undefined" != typeof console && console.log(a)
            }
        })
    },
    get_banners: function() {
        var a = this;
        if (a.banners = inventory_dynamic_top_banners, "object" != typeof a.banners || 0 === a.banners.length) return !1;
        jQuery.each(a.banners, function(b, c) {
            (void 0 !== c.html && c.html || void 0 !== c.multilingual_html && c.multilingual_html) && void 0 !== c.keyword && c.keyword || a.banners.splice(b, 1)
        }), a.ready = a.banners.length > 0
    },
    update_banners: function() {
        try {
            var a = DealerInspireDynamicTopBanners;
            a.$container.find("." + a.css_class).remove(), jQuery.each(a.banners, function(b, c) {
                var d = new RegExp(c.keyword, "i");
                if (jQuery(".entry-title").text().search(d) > -1) {
                    var e = "",
                        f = c.html;
                    "en" != DealerInspireInventory.options.language_code && "" != DealerInspireInventory.options.language_code && (e = "Multilingual ", f = c.multilingual_html), DealerInspireInventory.log("Showing " + e + 'Dynamic Banner "' + c.description + '" for keyword ' + c.keyword, !1, !0), a.$container.append('<div class="' + a.css_class + '">' + f + "</div>")
                }
            }), 0 === a.$container.find("." + a.css_class).length && a.orginal_top_text ? a.$container.append(a.orginal_top_text) : a.orginal_top_text !== a.$container.find("." + a.css_class) && jQuery("body").trigger("vrp-dynamic-top-banners-updated")
        } catch (a) {
            "undefined" != typeof console && console.log(a)
        }
    }
};
DealerInspireDynamicTopBanners.init();
var DealerInspireLightbox = {
    library: null,
    init: function() {
        var a = this;
        jQuery(function() {
            DealerInspireInventory.options.lightboxes && DealerInspireInventory.options.lightboxes.library && (a.library = DealerInspireInventory.options.lightboxes.library, jQuery(document).on("click", ".button-form,a", function(a) {
                var b = jQuery(this).data();
                if (b.formId) {
                    jQuery(this).attr("href") || jQuery(this).attr("href", "#gravity-form-" + b.formId);
                    for (var c in DealerInspireInventory.options.gf_forms[b.formId]) c in b.vehicle && jQuery("#input_" + b.formId + "_" + DealerInspireInventory.options.gf_forms[b.formId][c]).val(b.vehicle[c]);
                    return jQuery.event.trigger({
                        type: !0 === DealerInspireBrowserDetection.isMobile.any() ? "im_lead_start" : "im_lead_start_mobile",
                        message: {
                            formId: b.formId
                        },
                        time: new Date
                    }), jQuery(this).data("lightbox-width") || jQuery(this).data("lightbox-width", 600), DealerInspireLightbox.open(jQuery(this)), !1
                }
                if (!0 === jQuery(this).is(".fancy,.fancy_iframe,.fancybox,.lightbox")) return DealerInspireLightbox.open(jQuery(this)), !1
            }))
        })
    },
    open: function(a) {
        try {
            var b = this,
                c = b.getTarget(a),
                d = b.getContentType(c),
                e = a || {};
            if (!1 === d) throw "Failed to determine content type or unsupported content was passed";
            if (jQuery.isPlainObject(a) ? "inline" === d && void 0 === a.element && (a.element = c) : a = "html" === d ? {
                    content: a
                } : {
                    element: "inline" === d ? c : null,
                    title: jQuery(a).attr("data-lightbox-title") || "",
                    url: "iframe" === d ? c : null,
                    data: jQuery(a).data() || {}
                }, "string" == typeof a.url && a.url.search(/javascript/i) > -1) return !1;
            var f = void 0 !== a.data && a.data.lightboxOnPhones ? a.data.lightboxOnPhones : "enabled",
                g = void 0 !== a.data && a.data.lightboxOnTablets ? a.data.lightboxOnTablets : "enabled";
            if ("iframe" === d && !0 === DealerInspireBrowserDetection.isMobile.any() && (a.data && a.data.vehicle && a.url.indexOf(location.host) > -1 && (a.url = a.url + "?" + jQuery.param(a.data.vehicle)), DealerInspireBrowserDetection.isMobile.tablet() && "disabled" === g || DealerInspireBrowserDetection.isMobile.phone() && "disabled" === f)) return window.open(a.url), !1;
            switch (b.library) {
                case "bootstrap":
                    var h = null;
                    h = "inline" === d ? a.element : "html" === d ? a.content : a.url, DealerInspireModalNotification.show(a.title, h, "undefiend" != typeof a.data ? a.data : a);
                    break;
                case "fancybox":
                    if ("inline" === d) {
                        var i = a.element;
                        jQuery.isPlainObject(e) && !0 === e.hasOwnProperty("content") && (i = e), jQuery.fancybox(i, {
                            beforeShow: function() {
                                $(window).width() <= 1024 && $("html,body").css({
                                    overflow: "hidden",
                                    position: "relative",
                                    height: "100%"
                                })
                            },
                            afterShow: function() {
                                document.dispatchEvent(new CustomEvent("di_check_visible_forms"))
                            },
                            afterClose: function() {
                                $("html,body").css({
                                    "overflow-y": "visible",
                                    position: "static",
                                    height: "auto"
                                })
                            }
                        })
                    } else {
                        var j = {
                            centerOnScroll: !0,
                            width: 1e3,
                            type: d
                        };
                        "iframe" === d && (j.iframe = {
                            preload: !1
                        }), "html" === d ? j.content = a.content : j.href = a.url, a.title && (j.title = a.title), j.beforeLoad = function() {
                            jQuery("body").trigger("fancybox_beforeLoad", d)
                        }, j.afterLoad = function() {
                            jQuery("body").trigger("fancybox_afterLoad", d)
                        }, j.beforeShow = function() {
                            jQuery("body").trigger("fancybox_beforeShow", d)
                        }, j.afterShow = function() {
                            jQuery("body").trigger("fancybox_afterShow", d), document.dispatchEvent(new CustomEvent("di_check_visible_forms"))
                        }, jQuery.fancybox(j)
                    }
            }
            return !1
        } catch (a) {
            "undefined" != typeof console && console.log(a.stack)
        }
    },
    getContentType: function(a) {
        if (!1 === a || "string" == typeof a && "html" === a) return "html";
        if ("object" == typeof a) return "inline";
        if ("string" == typeof a) {
            if ("#" === a.charAt(0)) return "inline";
            if (!0 === this.isUrl(a)) return "iframe"
        }
        return !1
    },
    isUrl: function(a) {
        return "string" == typeof a && (a = jQuery.trim(a), null === /\r|\n|\s/.exec(a) && (a.indexOf("//") > -1 || "/" === a.charAt(0)))
    },
    getUrl: function(a) {
        return !1 !== this.isUrl(a) && ("//" !== a.substring(0, 2) && "/" === a.charAt(0) && (a = location.protocol + "//" + location.host + a), a)
    },
    getTarget: function(a) {
        if (jQuery.isPlainObject(a)) {
            if (!0 === DealerInspireBrowserDetection.isMobile.any() && void 0 !== a.mobileUrl && a.mobileUrl) return this.getTarget(a.mobileUrl);
            if ("string" == typeof a.url) return this.getTarget(a.url);
            if (void 0 !== a.content) return this.getTarget(a.content)
        } else {
            if ("string" == typeof a) {
                if ("#" === a.charAt(0)) {
                    var b = jQuery(a + ":first");
                    if (0 === b.length) throw "Target element not found: " + a;
                    return b
                }
                return !0 === this.isUrl(a) ? this.getUrl(a) : "html"
            }
            if ("object" == typeof a) return !0 === DealerInspireBrowserDetection.isMobile.any() && void 0 !== a.data("mobileUrl") && a.data("mobileUrl") ? this.getTarget(a.data("mobileUrl")) : void 0 !== a.attr("href") && a.attr("href") ? this.getTarget(a.attr("href")) : a
        }
        return !1
    }
};
DealerInspireLightbox.init();
var DealerInspireModalNotification = {
    modal_id: "vrp-notifications-modal-container",
    inline_placeholder: "di-modal-inline-placeholder",
    current_template: null,
    template_data: {},
    init: function() {
        var a = this;
        jQuery("body").on("click", "button[data-modal-template]", function() {
            var b = $(this).data("modal-template");
            if (!b) return !1;
            var c = $(this).data("modal-title") ? $(this).data("modal-title") : "",
                d = !!$(this).data("data") && $(this).data("data");
            a.show(c, "tpl://" + b, d)
        }), jQuery("body").on("hide.bs.modal", "#" + a.modal_id, function() {
            $inline_content = jQuery("#" + a.modal_id + " .modal-body").find(".has-" + a.inline_placeholder), $inline_content.length > 0 && ($inline_content.removeClass("has-" + a.inline_placeholder), $inline_content.hide().replaceAll($inline_content.data(a.inline_placeholder)).data(a.inline_placeholder, !1))
        })
    },
    alert: function(a, b, c, d) {
        if (a) {
            if (!0 !== d && !1 !== DealerInspireBrowserDetection.isMobile.any()) return alert(a), !1;
            var b = b || "Error";
            this.show(b, a, {
                footer: c
            })
        }
    },
    show: function(a, b, c) {
        try {
            var d = !1,
                e = this;
            if (0 === jQuery("#" + e.modal_id).length && jQuery("body").prepend("<div class='bootstrap-modal-contents' id='" + e.modal_id + "'></div>"), "object" != typeof b || jQuery.isPlainObject(b)) {
                if (!0 === DealerInspireLightbox.isUrl(b) && 0 === b.search("tpl://")) {
                    var f = b.replace("tpl://", "");
                    b = e.render(f, {
                        options: c
                    })
                } else !0 === DealerInspireLightbox.isUrl(b) && (d = !0, b = '<iframe id="di-modal-notification-iframe" src="' + b + '" width="100%" height="100%" frameborder="0"></iframe>');
                jQuery("#" + e.modal_id).html(e.render("front-end/modal", {
                    title: a,
                    content: b,
                    options: c
                }))
            } else jQuery("#" + e.modal_id).html(e.render("front-end/modal", {
                title: a,
                content: "",
                options: c
            })), b.data(e.inline_placeholder) || b.data(e.inline_placeholder, jQuery('<div class="' + e.inline_placeholder + '"></div>').insertAfter(b).hide()), b = b.show().detach(), b.appendTo("#" + e.modal_id + " .modal-body").addClass("has-" + e.inline_placeholder);
            jQuery("#" + e.modal_id + " .modal").modal({
                show: !0,
                keyboard: !1
            }), e.set_modal_size(c, d)
        } catch (a) {
            DealerInspireInventory.log(a.stack)
        }
    },
    render: function(a, b) {
        var c = this;
        c.tmpl_cache || (c.tmpl_cache = {});
        try {
            if (!c.tmpl_cache[a]) {
                var d = this.get_template_url(a),
                    e = null;
                if (jQuery.ajax({
                        url: d,
                        method: "GET",
                        async: !1,
                        success: function(a) {
                            e = a
                        },
                        error: function() {
                            e = "Failed to load template: " + d
                        }
                    }), null === e) return !1;
                c.tmpl_cache[a] = _.template(e)
            }
            return c.current_template = a, c.template_data[a] = void 0 !== b.options ? b.options : null, c.tmpl_cache[a](b)
        } catch (a) {
            return "undefined" != typeof console && console.log(a.stack), !1
        }
    },
    get_template_data: function(a) {
        return a = a || this.current_template, a && void 0 !== this.template_data[a] ? this.template_data[a] : null
    },
    get_template_url: function(a) {
        return "" === a.match(/(?:\.([^.]+))?$/)[0] && (a += ".tpl"), DealerInspireInventory.options.plugin_url + "/js/templates/" + a
    },
    set_modal_id: function(a) {
        this.modal_id = a
    },
    set_modal_size: function(a, b) {
        var c = this,
            d = {};
        if (void 0 === a) var a = {
            autoHeight: !0,
            autoWidth: !0
        };
        var e = !0 === b ? jQuery("#" + c.modal_id + " #di-modal-notification-iframe") : jQuery("#" + c.modal_id + " .modal-body");
        if (!0 === DealerInspireBrowserDetection.isMobile.phone() && (d.margin = "auto"), a.autoWidth && !0 !== a.autoWidth || a.lightboxWidth) {
            if (a.lightboxWidth) var f = Math.min(1200, a.lightboxWidth)
        } else var f = Math.min(Math.min(1200, jQuery(window).width() - .2 * jQuery(window).width(), e.actual("outerWidth", {
            includeMargin: !0,
            clone: !0
        })));
        if (void 0 !== f && (d.width = f), a.autoHeight && !0 !== a.autoHeight || a.lightboxHeight) {
            if (a.lightboxHeight) var g = Math.min(800, a.lightboxHeight)
        } else var g = Math.min(Math.min(800, jQuery(window).height() - .1 * jQuery(window).height(), e.actual("outerHeight", {
            includeMargin: !0,
            clone: !0
        })));
        void 0 !== g && (d.height = g), jQuery("#" + c.modal_id).find(".modal-body,.modal-dialog").css(d)
    }
};
DealerInspireModalNotification.init();
var DealerInspireSearchAnything = {
    selector: ".inventory-search-field,.alg-searc-class",
    instances: [],
    init: function() {
        var a = this;
        jQuery(function() {
            a.set_instances(), a.mobile_vrp_groupon_search_field.init(), jQuery("body").on("vrp-ajax-complete", function() {
                a.set_instances(), a.close_filters_mobile_tab()
            })
        })
    },
    mobile_vrp_groupon_search_field: {
        searchFieldId: "vrp-groupon-mobile-search-field",
        submitBtnId: "vrp-groupon-mobile-search-submit-btn",
        init: function() {
            var a = this;
            void 0 !== DealerInspireInventory.options.filters && !1 !== DealerInspireInventory.options.filters.show_search_anything_field_on_mobile_vrp && jQuery("body").on("focus blur keyup", "#" + a.searchFieldId, function(b) {
                switch (b.type) {
                    case "focusin":
                        jQuery(".total-found").css("visibility", "hidden"), jQuery(".groupon-sidebar-filters").addClass("hidden"), a.get_submit_button().css("z-index", 100);
                        break;
                    case "focusout":
                        jQuery(".groupon-sidebar-filters").removeClass("hidden"), jQuery(".total-found").css("visibility", "visible"), setTimeout(function() {
                            a.get_submit_button().css("z-index", 2)
                        }, 500);
                        break;
                    case "keyup":
                        if (13 === b.which) a.do_search();
                        else if (37 === b.which || 39 === b.which) return b.stopImmediatePropagation(), !1
                }
            }).on("click", "#" + a.submitBtnId, function() {
                a.do_search()
            }).on("vrp-ajax-complete", function() {
                jQuery(".groupon-mobile-filters-apply").css("float", "none")
            })
        },
        get_search_field: function() {
            return jQuery("#" + this.searchFieldId)
        },
        get_submit_button: function() {
            return jQuery("#" + this.submitBtnId)
        },
        do_search: function() {
            var a = this,
                b = a.get_search_string();
            b && (DealerInspireInventory.reset_and_search(b), jQuery(".groupon-mobile-filters-apply").click())
        },
        get_search_string: function() {
            return jQuery("#" + this.searchFieldId).val()
        }
    },
    close_filters_mobile_tab: function() {
        jQuery(".mobile-tab-content.open .mobile-tab-content-inside.filters-container").length > 0 && jQuery(".mobile-tab-content.open").removeClass("open")
    },
    set_instances: function() {
        var a = this;
        if (a.instances = [], 0 === jQuery(a.selector).length) return !1;
        jQuery(a.selector).each(function(b, c) {
            var d = jQuery(this).attr("placeholder") ? jQuery(this).attr("placeholder") : "Search...",
                e = jQuery(this).data("limit"),
                f = jQuery(this).data("popover-placement"),
                g = "enabled" === jQuery(this).data("redirect-to-vdp"),
                h = {
                    element: jQuery(c),
                    popover_placement: f,
                    filters: jQuery(this).data("filters"),
                    limit: e,
                    placeholder_text: d,
                    redirect_url: !1,
                    redirect_to_vdp: g
                };
            void 0 !== h.filters && (jQuery(c).parents(".filters-container").find("input[type=hidden][name='type[]']").length > 0 && (h.filters.type = jQuery(c).parents(".filters-container").find("input[type=hidden][name='type[]']").val()), "object" != typeof h.filters.type && h.filters.type && (h.filters.type = h.filters.type.split(","))), a.instances.push(h)
        }), a.instances.length > 0 && jQuery.each(a.instances, function(b, c) {
            a.init_instance(c)
        })
    },
    init_instance: function(a) {
        var b = this;
        try {
            if (a.element.hasClass("alg-searc-class")) return !1;
            if (a.element.hasClass("ui-autocomplete-input")) return;
            jQuery(a.element).bind("keyup blur focus paste", function(c) {
                b.autocomplete(a, c)
            }), jQuery(window).bind("pageshow", function(b) {
                b.originalEvent.persisted && jQuery(a.element).val("").prop("disabled", !1)
            })
        } catch (a) {
            return "undefined" != typeof console && console.log("Failed to initiate SearchAnything instance: " + a), !1
        }
    },
    autocomplete: function(a, b) {
        try {
            var c = a.element;
            if (jQuery("li.ui-menu-item[rel='popover']").popover("hide"), "focusout" === b.type && "" === c.val()) return c.val(a.placeholder_text), !1;
            if ("focusin" === b.type && c.val() === a.placeholder_text) return c.val(""), !1;
            var d = c.parent();
            c.autocomplete({
                source: function(b, c) {
                    jQuery.ajax({
                        url: inventory_localization.ajax_url,
                        dataType: "json",
                        type: "POST",
                        data: {
                            action: "im_ajax_call",
                            perform: "suggest",
                            isMobile: DealerInspireBrowserDetection.isMobile.any(),
                            filters: a.filters,
                            limit: a.limit,
                            search_term: b.term
                        },
                        beforeSend: function() {
                            void 0 === a._original_type ? a._original_type = a.type : a.type = a._original_type, a.redirect_url = !1
                        },
                        success: function(b) {
                            1 === b.length && (!0 === a.redirect_to_vdp ? void 0 !== b[0].redirect_to_vdp && !0 === b[0].redirect_to_vdp && (a.redirect_url = b[0].link) : a.type = b[0].type), c(b), jQuery(document).trigger("inventoryEndLoader")
                        }
                    })
                },
                focus: function(a, b) {
                    return c.val(b.item.search_term), !1
                },
                select: function(a, b) {
                    return c.val(b.item.search_term), b.item.link && (window.location.href = b.item.link, c.val("Loading...").prop("disabled", !0)), !1
                },
                minLength: 3,
                delay: DealerInspireInventory.options.search_anything.autocomplete_delay,
                appendTo: d,
                position: {
                    my: "left top",
                    at: "left bottom",
                    collision: "none"
                }
            }).data("ui-autocomplete")._renderItem = function(b, c) {
                return jQuery("<li rel='popover'></li>").data("item.autocomplete", c).data("html", !0).data("title", c.popover_title).data("content", c.details).data("placement", a.popover_placement).append("<a>" + c.label + "</a>").appendTo(b)
            }
        } catch (a) {
            return DealerInspireInventory.log("Search Anything Error: " + a, !1, !0), !1
        }
    },
    get_instance: function(a) {
        var b = this;
        if (0 === a.length || 0 === b.instances.length) return !1;
        var c = null;
        return jQuery.each(b.instances, function(b, d) {
            if (d.element.get(0) === a.get(0)) return c = d, !1
        }), c
    }
};
DealerInspireSearchAnything.init();
var DealerInspireURLShortener = {
        ajax_url: "/",
        translate: {},
        init: function(a, b) {
            this.ajax_url = a, b && (this.translate = b)
        },
        create_short_url: function(a) {
            var b = this;
            jQuery.ajax({
                url: this.ajax_url,
                type: "POST",
                data: {
                    action: "im_ajax_call",
                    perform: "share_vrp_results",
                    url: a
                },
                dataType: "json",
                success: function(a) {
                    "failed" === a.status ? DealerInspireModalNotification.alert(a.msg, "Please try again later!") : DealerInspireModalNotification.alert(b.translate.short_share_body + ": <b>" + a.tinyurl + "</b>", b.translate.short_share_title, a.sharing)
                }
            })
        }
    },
    DealerInspireInventory = {
        timers: {},
        options: null,
        url_params: null,
        ajax_in_progress: !1,
        current_page: 1,
        page_title: "",
        vrpFilterShowing: !1,
        mobilefilterselected: !1,
        init: function() {
            $ = jQuery;
            var a = this;
            try {
                if (this.register_global_events(), "undefined" != typeof inventory_localization) {
                    if (this.options = inventory_localization, void 0 === this.options.is_inventory_page || "vrp" !== this.options.is_inventory_page) return !1;
                    !0 === this.options.shortcode.status && document.getElementById("results-page") && (this.timers.disable_filters_timer = setInterval(function() {
                        a.disable_all_filters()
                    }, 100)), this.setVisitorIpAddress(), this.options.responsive = "desktop" === this.options.device, this.add_mobile_events(), this.event_listeners.init(), this.pagination.init(), this.quicklook.init(), this.infinite_scrolling(), this.filters_tags.init(), this.popovers.init(), this.view_toggle.init(), this.grid_view.init(), jQuery(function() {
                        jQuery("body").trigger("vrp-ready")
                    })
                }
            } catch (a) {
                "undefined" != typeof console && console.log("Failed to initialize DealerInspireInventory!" + a.stack)
            }
        },
        setVisitorIpAddress: function() {
            null === DealerInspireCookie.ReadCookie("im-visitor-ip") && jQuery.get("https://api.ipify.org/?format=json", function(a) {
                try {
                    DealerInspireCookie.CreateCookie("im-visitor-ip", a.ip, 1)
                } catch (a) {
                    console.log("Failed to determine visitor's IP")
                }
            })
        },
        payment_calculator: {
            register_events: function() {
                var a = this;
                jQuery(function() {
                    if ("vdp" === DealerInspireInventory.options.is_inventory_page) {
                        var b = jQuery(".payment-calculator:first"),
                            c = DealerInspireInventory.options.vehicle.type,
                            d = DealerInspireInventory.options.vehicle.our_price,
                            e = b.data("finance-rate"),
                            f = b.data("finance-down"),
                            g = b.data("finance-term_list"),
                            h = b.data("finance-length"),
                            i = b.data("finance-fees"),
                            j = jQuery(this).data("overrides") || {},
                            k = jQuery(this).data("finance-payment_frequency");
                        k && (j.payment_frequency = k.toString()), g && (j.term_list = g.toString()), h && (j.length = h.toString()), a.init(c, d, e, f, h, i, j)
                    }
                }), jQuery(document).on("click", ".payment-calculator", function() {
                    var b = jQuery(this).data("vehicle_type"),
                        c = jQuery(this).data("price"),
                        d = jQuery(this).data("finance-rate"),
                        e = jQuery(this).data("finance-down"),
                        f = jQuery(this).data("finance-term_list"),
                        g = jQuery(this).data("finance-length"),
                        h = jQuery(this).data("finance-fees"),
                        i = jQuery(this).data("overrides") || {},
                        j = jQuery(this).data("finance-payment_frequency");
                    j && (i.payment_frequency = j.toString()), f && (i.term_list = f.toString()), g && (i.length = g.toString()), a.init(b, c, d, e, g, h, i)
                })
            },
            init: function(a, b, c, d, e, f, g) {
                calculator.init(a, b, g), void 0 !== c && calculator.setRate(c, !1), void 0 !== d && calculator.setDownPayment(d, !1), "undefined" !== g.down && calculator.setDownPayment(g.down, !1), e && calculator.setLoanTerm(e, !1), f && calculator.setFees(f, !1), jQuery.isNumeric(b) && b && calculator.process()
            }
        },
        register_global_events: function() {
            this.payment_calculator.register_events()
        },
        event_listeners: {
            init: function() {
                var a = DealerInspireInventory;
                a.translate_page(), jQuery.ajaxPrefilter(function(b, c, d) {
                    if (void 0 !== b.data && b.data.search("im_ajax_call") > -1 && (-1 === b.data.search("_post_id") && (b.data += "&_post_id=" + a.options.page.ID), -1 === b.data.search("_referer") && (b.data += "&_referer=" + window.location.pathname), !0 === a.ajax_in_progress)) {
                        var e = "body";
                        window.vrp_nprogress_parent && (e = vrp_nprogress_parent()), NProgress.configure({
                            showSpinner: !1,
                            parent: e
                        }), NProgress.start()
                    }
                }), jQuery(document).ajaxStop(function() {
                    NProgress.done(!0)
                }), jQuery(document).on("click", ".gridtoggle,.listtoggle", function() {
                    jQuery(this).data("view") && a.view_toggle.set(jQuery(this).data("view"))
                }), jQuery(document).on("change", '.without-sidebar-filters select[name="_orderby"]', function() {
                    jQuery('input[type=hidden][name="orderby"]').val(jQuery(this).val()), jQuery('input[type=hidden][name="order"]').val(jQuery(this).find(":selected").data("order")), a.current_page = 1, a.query.set_param("order"), a.query.set_param("orderby"), a.query.update()
                }), jQuery(document).on("click", ".sortablePrice .sortable", function(b) {
                    jQuery('input[type=hidden][name="orderby"]').val(jQuery(this).data("sortby")), jQuery('input[type=hidden][name="order"]').val(jQuery(this).data("order")), a.current_page = 1, a.query.set_param("order"), a.query.set_param("orderby"), a.query.update(), b.preventDefault()
                }), null !== a.query.get_param("page") ? a.ajax_in_progress = !0 : jQuery("#results-page").css("visibility", "visible"), jQuery(window).bind("hashchange", function(b) {
                    var c = window.location.hash ? window.location.hash.replace("#", "") : "";
                    "undefined" != typeof clicky && c && clicky.log("/?#" + c), c ? a.load_ajax_results(c) : a.lastQuery && a.resetPressed()
                }), window.location.hash && window.location.hash.search("get_results") > -1 && (a.query.get_param("page") && (a.current_page = a.query.get_param("page")), a.query.update(), a.refreshed = !0, a.load_ajax_results(window.location.hash.replace(/#/, ""))), jQuery(document).on("click", "#reset_filters,.im-reset-filters", function() {
                    if ("" === window.location.hash) return !1;
                    a.resetPressed()
                }), jQuery("body").bind("vrp-ajax-error", function() {}), jQuery(window).resize(function() {
                    this.resizeTO && clearTimeout(this.resizeTO), this.resizeTO = setTimeout(function() {
                        jQuery(window).trigger("window-resize-end")
                    }, 500)
                }), "enabled" === a.options.lazy_load_images && jQuery("body").on("vrp-ready vrp-ajax-complete", function(a) {
                    jQuery("td.results .vehicle-image img").unveil(200), setTimeout(function() {
                        jQuery("td.results .vehicle-image img").length > 0 && jQuery("td.results .vehicle-image img:first").attr("src").search("loading") > -1 && (DealerInspireInventory.log("Lazy Load failed. Loading the first two images manually", !1, !0), jQuery("td.results .vehicle-image img").slice(0, 4).each(function(a, b) {
                            jQuery(this).attr("src", jQuery(this).data("src"))
                        }))
                    }, 100)
                })
            }
        },
        resetPressed: function() {
            this.url_params = {
                action: "im_ajax_call",
                perform: "get_results"
            }, this.current_page = 1, this.query.update(), jQuery("body").trigger("vrp-reset")
        },
        add_mobile_events: function() {
            var a = this;
            jQuery("#vrp-filter-menu .filters").on("click", "#mobile-reset-filters-container", function() {
                a.resetPressed()
            }), null !== a.query.get_param("page") ? a.ajax_in_progress = !0 : jQuery("#results-page").css("visibility", "visible"), jQuery(document).on("click", "a.vrp-incentives", function(b) {
                return jQuery.ajax({
                    url: a.options.ajax_url,
                    type: "POST",
                    data: {
                        action: "im_ajax_call",
                        perform: "incentives-mobile",
                        vin: jQuery(this).data("vin"),
                        id: jQuery(this).data("id")
                    },
                    async: !1,
                    success: function(a) {
                        window.open().document.write(a)
                    }
                }), !1
            }), jQuery("body").on("click", ".button-expand a", function(a) {
                a.preventDefault();
                var b = jQuery(this);
                b.hasClass("open") ? b.removeClass("open").addClass("closed") : b.removeClass("closed").addClass("open"), b.parents(".description-cta-form").animate({
                    maxHeight: b.hasClass("open") ? "3000px" : "30px"
                }, 400)
            })
        },
        load_ajax_results: function(a) {
            var b = this;
            if (!a || b.lastQuery === a || -1 === a.search("perform=get_results")) return !1;
            !0 === b.refreshed && (a += "&_refreshed=true"), DealerInspireInventory.options.language_code && (a += "&_language_code=" + DealerInspireInventory.options.language_code), this.ajax_in_progress = !0, b.query.to_obj(), b.current_page = parseInt(b.query.get_param("page")), jQuery("body").trigger("vrp-ajax-pre-send"), b.lastQuery = b.query.serialize(), jQuery.ajax({
                url: this.options.ajax_url,
                type: "POST",
                data: a + "&_nonce=" + b.options.ajax_nonce,
                dataType: "json",
                timeout: 15e3,
                success: function(a) {
                    if (void 0 === a.results) return b.ajax_in_progress = !1, jQuery("body").trigger("vrp-ajax-error", [{
                        error: {
                            code: 500,
                            status: "parsererror",
                            message: "Invalid response"
                        }
                    }]), !1;
                    if (jQuery("body").trigger("vrp-ajax-pre-render-results", a), b.is_vin = a.is_vin, b.is_stock = a.is_stock, b.num_rows = a.num_rows, b.suffix = a.title_suffix, b.displayAjaxResults(a), "1" === b.options.highlight_search_results && void 0 !== DealerInspireInventory.url_params.search && DealerInspireInventory.url_params.search) {
                        var c = DealerInspireInventory.url_params.search.split(" ").filter(function(a) {
                            return a.length >= 2
                        });
                        c.unshift(DealerInspireInventory.url_params.search), jQuery(".vehicle").highlight(c)
                    }
                    DealerInspireInventory.refreshed = !1, jQuery("body").trigger("vrp-ajax-complete"), jQuery(".vrp_loading_text").remove(), b.ajax_in_progress = !1, b.update_page_title(), DealerInspireCompare.mark_selected(), 1 === b.current_page && jQuery("body").trigger("vrp-updated"), jQuery(".results-table").css("visibility", "visible")
                },
                error: function(a, c, d) {
                    b.ajax_in_progress = !1;
                    try {
                        void 0 !== a.responseJSON && void 0 !== a.responseJSON.results && b.displayAjaxResults(a.responseJSON)
                    } catch (a) {
                        console.log(a)
                    }
                    jQuery("body").trigger("vrp-ajax-error", [{
                        error: {
                            code: a.status,
                            status: c,
                            message: d
                        }
                    }])
                }
            })
        },
        displayAjaxResults: function(a) {
            var b = "#results-page td.results .results_table";
            window.vrp_vehicles_container_selector && (b = window.vrp_vehicles_container_selector("#results-page td.results .results_table"));
            var c = ".grid-view-results-wrapper";
            if (window.vrp_vehicles_gridview_container_selector && (c = window.vrp_vehicles_gridview_container_selector(c)), "1" === this.options.infinite_scrolling) return null === a.page_count || this.current_page === a.page_count ? jQuery("#results-page td.results .infinite-scrolling-trigger").removeClass("load-more-results") : jQuery("#results-page td.results .infinite-scrolling-trigger").addClass("load-more-results"), void(this.current_page > 1 && !0 !== this.refreshed ? jQuery("#results-page td.results .load-more-results").length > 0 ? jQuery("#results-page td.results .load-more-results:last").after(a.results) : jQuery(c + "," + b).append(a.results) : (jQuery("#results-page").replaceWith(a.results), this.scrollToTop()));
            this.current_page > 1 && !0 !== this.refreshed ? (jQuery("td.results").removeClass("listview gridview").addClass(this.options.current_view), jQuery(c + "," + b).replaceWith(a.results), jQuery("ul.pagination").replaceWith(a.pagination)) : jQuery("#results-page").replaceWith(a.results), this.scrollToTop()
        },
        pagination: {
            selector: "ul.pagination",
            init: function() {
                var a = this;
                jQuery(document).on("click", this.selector + " a[data-page!='']", function(b) {
                    if (!1 === a.isEnabled()) return !1;
                    jQuery(this).data("page") && (DealerInspireInventory.current_page = jQuery(this).data("page"), DealerInspireInventory.query.update())
                }), jQuery("body").on("vrp-ajax-pre-send", function() {
                    a.disable()
                }), jQuery("body").on("vrp-ajax-complete", function() {
                    a.enable()
                })
            },
            set: function(a) {
                var b = jQuery(this.selector + " li a.current"),
                    c = jQuery(this.selector + " li a[data-page=" + a + "]");
                b.removeClass("current"), c.addClass("current")
            },
            enable: function() {
                jQuery(this.selector).removeClass("disabled")
            },
            disable: function() {
                jQuery(this.selector).addClass("disabled")
            },
            isEnabled: function() {
                return !1 === jQuery(this.selector).hasClass("disabled")
            }
        },
        reset_and_search: function(a) {
            if (!a) return !1;
            this.url_params = {
                action: "im_ajax_call",
                perform: "get_results"
            }, this.current_page = 1, this.query.set_param("search", a, !0), this.query.update()
        },
        filters_tags: {
            init: function() {
                if ("enabled" !== DealerInspireInventory.options.filters.filters_tags) return !1;
                jQuery("body").on("click", ".vrp-selected-filter-tag", function() {
                    try {
                        if (jQuery(this).hasClass("disabled")) return !1;
                        jQuery(".vrp-selected-filter-tag").addClass("disabled");
                        var a = jQuery(this).data("filter"),
                            b = jQuery(this).data("value");
                        if (jQuery(this).find(".label").html('Removing Filter <i class="fa fa-circle-o-notch fa-spin"></i>'), jQuery(this).find(".clear-btn").remove(), !1 === DealerInspireInventory.query.delete_param_value(a, b)) throw "Failed to delete url param by value!";
                        DealerInspireInventory.current_page = 1, DealerInspireInventory.query.update()
                    } catch (a) {
                        console.log(a)
                    }
                }).on("vrp-ajax-complete", function() {
                    !0 === DealerInspireBrowserDetection.isMobile.phone() && setTimeout(function() {
                        var a = jQuery(".vrp-selected-filters-tags-container[data-toggle='tooltip']");
                        a.tooltip("show"), setTimeout(function() {
                            a.tooltip("hide")
                        }, 4e3)
                    }, 500)
                })
            }
        },
        popovers: {
            init: function() {
                jQuery(function() {
                    var a = DealerInspireInventory;
                    a.popovers.set_options(), jQuery(document).on("mouseenter", "[rel='popover']", function() {
                        jQuery("[rel='popover']").not(this).popover("hide")
                    }), jQuery("body").on("vrp-ajax-complete", function() {
                        a.popovers.set_options()
                    })
                })
            },
            set_options: function() {
                jQuery("[rel='popover']").not(".li.ui-menu-item").each(function() {
                    jQuery(this).popover({
                        html: !0,
                        trigger: jQuery(this).data("trigger") || "hover",
                        container: jQuery(this).data("container") || jQuery(this).attr("id"),
                        placement: jQuery(this).data("placement") || "right",
                        content: function() {
                            jQueryreturn = '<div class="hover-hovercard"></div>'
                        }
                    })
                })
            }
        },
        view_toggle: {
            init: function() {
                var a = DealerInspireInventory;
                if (a.options.current_view = jQuery("#static-variables [name='vrp_view']").val(), !0 === a.options.responsive) {
                    if (window.autoSwitchVrpToListViewOnResize && !1 === autoSwitchVrpToListViewOnResize()) return;
                    jQuery(window).bind("window-resize-end", function() {
                        !0 === DealerInspireBrowserDetection.isMobile.phone() && "gridview" === jQuery("#static-variables [name='vrp_view']").val() && a.view_toggle.set("listview")
                    }), jQuery("body").on("vrp-ready vrp-ajax-complete", function() {
                        a.options.current_view = jQuery("#static-variables [name='vrp_view']").val()
                    })
                }
            },
            set: function(a) {
                var b = DealerInspireInventory;
                if (void 0 === b.options.current_view || a !== b.options.current_view) {
                    var c = window.location.hash.match(/page=(\d+?)/);
                    b.current_page = "1" !== b.options.infinite_scrolling && b.current_page ? b.current_page : c ? c[1] : 1, b.options.current_view = a, "gridview" === a ? (jQuery("#results-page .gridtoggle").addClass("dark-button"), jQuery("#results-page .listtoggle").removeClass("dark-button"), jQuery("#static-variables [name='vrp_view']").val("gridview")) : "listview" === a && (jQuery("#results-page .listtoggle").addClass("dark-button"), jQuery("#results-page .gridtoggle").removeClass("dark-button"), jQuery("#static-variables [name='vrp_view']").val("listview")), b.query.set_param("vrp_view"), b.query.update() && jQuery("#results-page td.results").addClass("gridview")
                }
            }
        },
        infinite_scrolling: function() {
            var a = this,
                b = "im_infinite_scrolling_target";
            if ("1" !== a.options.infinite_scrolling) return !1;
            var c = jQuery("#verticalnav").length > 0 && jQuery(".sitewrapper").length > 0 && "auto" === jQuery(".sitewrapper").css("overflow") ? jQuery(".sitewrapper") : jQuery(window),
                d = jQuery("#verticalnav").length > 0 && jQuery(".sitewrapper").length > 0;
            c.scroll(function() {
                var b = !1;
                if (!1 === a.ajax_in_progress && jQuery("#results-page .load-more-results").length > 0) {
                    if (!0 === d) jQuery(".contentcontainer").height() - c.scrollTop() < 1300 && (b = !0);
                    else {
                        var e = document.querySelector("#results-page"),
                            f = e.getBoundingClientRect();
                        1 == jQuery("#results-page .load-more-results").length ? b = !0 : f.top < window.innerHeight && f.bottom >= 0 && (jQuery("#results-page td.results").hasClass("gridview") ? jQuery("#results-page .load-more-results:last").prevAll(".load-more-results:first").offset().top - c.scrollTop() < 1300 && (b = !0) : jQuery("#results-page .load-more-results:last").prevAll(".load-more-results:first").offset().top - c.scrollTop() < 800 && (b = !0))
                    }!0 === b && !0 !== a.refreshed && !1 === a.ajax_in_progress && (a.ajax_in_progress = !0, a.current_page++, a.query.update())
                }
            }), jQuery("body").on("click", ".vehicle a", function() {
                try {
                    var a = ($(this).parents(".vehicle"), ".vehicle#" + $(this).parents(".vehicle").attr("id"));
                    DealerInspireCookie.CreateCookie(b, a, .2)
                } catch (a) {
                    return DealerInspireInventory.log("Infinite Scrolling Error: " + a, !1, !0), !0
                }
            }), !0 === DealerInspireInventory.refreshed && jQuery("body").on("vrp-ajax-complete", function() {
                try {
                    var c = DealerInspireCookie.ReadCookie(b);
                    if (c) {
                        if (!0 === DealerInspireBrowserDetection.isMobile.phone()) var d = jQuery(c).parents("tr.visible-xs"),
                            e = d.index("tr.visible-xs"),
                            f = jQuery("tr.visible-xs").outerHeight();
                        else var d = jQuery(c).parents("tr:first"),
                            e = d.index("tr.hidden-xs"),
                            f = jQuery("tr.hidden-xs").outerHeight();
                        if (DealerInspireCookie.EraseCookie(b), !(d.length > 0)) throw c + " not found!";
                        var g = e * f + jQuery("tr.spacer").height() * e;
                        DealerInspireInventory.log("Infinite Scrolling: scrolling to " + c + " at offset: " + g, !1, !0), a.scrollToTop(g)
                    }
                } catch (a) {
                    return DealerInspireInventory.log("Infinite Scrolling Error: " + a, !1, !0), !1
                }
            })
        },
        update_page_title: function(a) {
            var b = this;
            if (1 == b.current_page) {
                if (!0 === DealerInspireBrowserDetection.isIE.eightOrLess()) return !1;
                try {
                    var c = jQuery(".entry-title"),
                        d = !0,
                        e = JSON.parse(JSON.stringify(b.url_params)),
                        f = "",
                        g = ["type[]", "search", "ext_color[]", "ext_color_generic[]", "year[]", "make[]", "model[]", "trim[]", "chrome_trim[]"];
                    if (jQuery.each(e, function(a, b) {
                            if (jQuery.inArray(a, g) > -1) return void(d = !1)
                        }), !0 === d) return c.html(b.options.page.post_title), jQuery("body").trigger("vrp-page-title-updated"), !1;
                    void 0 === e["type[]"] && jQuery("select[name='type[]']").length > 0 && b.top_filters.get_value("type[]") && (e["type[]"] = b.top_filters.get_value("type[]")), jQuery.each(g, function(a, c) {
                        void 0 === e[c] && void 0 !== b.options.shortcode[c.replace("[]", "")] && (void 0 !== e.search && e.search && "type[]" !== c || (e[c] = b.options.shortcode[c.replace("[]", "")]))
                    }), void 0 !== e.search && e.search.search(/new |used |certified /i) > -1 && (e.search = e.search.replace(/new |used |certified /gi, "")), window.vrp_search_page_title_params && vrp_search_page_title_params(e), jQuery.each(g, function(a, c) {
                        if (void 0 !== e[c]) {
                            if ("object" == typeof e[c]) {
                                if ("trim[]" === c) {
                                    if (void 0 !== e["make[]"] && e["make[]"].length > 1) return;
                                    if (void 0 !== e["model[]"] && e["model[]"].length > 1) return
                                }
                                var d = "",
                                    g = [];
                                if (jQuery.each(e[c], function(a, b) {
                                        "" !== b && g.push(b)
                                    }), void 0 !== g && g.length > 0) switch (g.length) {
                                    case 1:
                                        d = b.imTypeTranslate(g[0]);
                                        break;
                                    case 2:
                                        d = b.imTypeTranslate(g.join(" and "));
                                        break;
                                    default:
                                        var h = g.pop();
                                        d = b.imTypeTranslate(g.join(", ") + " and " + h)
                                }
                            } else if ("string" == typeof e[c]) {
                                if ("search" === c && -1 === e[c].search(" ")) {
                                    if (!0 === b.is_vin) return f = "VIN: " + e[c], !1;
                                    if (!0 === b.is_stock) return f = "Stock: " + e[c], !1
                                }
                                d = e[c]
                            }
                            "" !== d && (f = "" === f ? d : f + " " + d)
                        }
                    }), "" !== b.suffix && (f = f + " " + b.suffix), "" === f && (f = b.options.page.post_title), window.vrp_search_page_title && (f = vrp_search_page_title(f, e)), c.text(f), jQuery("body").trigger("vrp-page-title-updated")
                } catch (a) {
                    DealerInspireInventory.log(a)
                }
            }
        },
        imTypeTranslate: function(a) {
            return jQuery("body").hasClass("lang-french") && (a = a.replace(/and/gi, "et"), a = a.replace(/certified used/gi, "Vhicules doccasion certifis"), a = a.replace(/used/gi, "Vhicules doccasion"), a = a.replace(/new/gi, "Vhicules neufs")), jQuery("body").hasClass("lang-spanish") && (a = a.replace(/and/gi, "y"), a = "Vehculos " + a, a = a.replace(/^certified used/gi, "Usados Certificado"), a = a.replace(/^used/gi, "Usados"), a = a.replace(/^new/gi, "Nuevos")), a
        },
        quicklook: {
            init: function() {
                var a = DealerInspireInventory;
                jQuery(document).on("click", "a.quicklook", function() {
                    var b = jQuery(this).data("vin");
                    return b ? a.quicklook.show(b) : a.alert("VIN is not defined!", "Quicklook Error!"), !1
                })
            },
            show: function(a) {
                var b = DealerInspireInventory;
                jQuery.ajax({
                    url: b.options.ajax_url,
                    data: {
                        action: "im_ajax_call",
                        perform: "quicklook",
                        vin: a
                    },
                    type: "POST",
                    dataType: "json",
                    success: function(a) {
                        DealerInspireLightbox.open({
                            content: a.html,
                            height: 580,
                            width: 660
                        })
                    }
                })
            }
        },
        grid_view: {
            init: function() {
                var a = DealerInspireInventory;
                jQuery("body").on("click", ".vehicle-menu-toggle", function(a) {
                    $(this).parent("div.vehicle").toggleClass("menu-open")
                }), !1 === DealerInspireBrowserDetection.isMobile.any() || !0 === a.options.responsive ? (!1 === DealerInspireBrowserDetection.isIE.eightOrLess() && jQuery("#results-page .vehiclebox").on({
                    mouseenter: function() {
                        if (jQuery(this).has(".compare-vehicle").length) {
                            var a = jQuery(this).parent().find(".vehiclebox").height() - jQuery(this).parent().find(".button-bar").height() - 35;
                            jQuery(this).parent().find(".vehicleoverlay").stop().animate({
                                height: a
                            })
                        }
                    },
                    mouseleave: function() {
                        jQuery(this).has(".compare-vehicle").length && jQuery(this).parent().find(".vehicleoverlay").stop().animate({
                            height: "0px"
                        })
                    }
                }), jQuery(".shopping-box .more-actions li").on({
                    mouseenter: function() {
                        var a = jQuery(this).find("a").data("shoppingtitle");
                        jQuery(this).closest(".more-actions").find(".currentShoppingToolTitle").text(a)
                    },
                    mouseleave: function() {
                        jQuery(this).closest(".more-actions").find(".currentShoppingToolTitle").text("")
                    }
                })) : (jQuery(".expandbutton").removeClass("compare-vehicle").text("Quick Info"), jQuery(document).on("click", ".expandbutton", function() {
                    var a = jQuery(this).parent().height() - jQuery(this).parent().find(".button-bar").height() - 35;
                    jQuery(this).hasClass("expanded") ? (jQuery(this).parent().find(".vehicleoverlay").stop().animate({
                        height: "0px",
                        opacity: 0
                    }, 200), jQuery(this).css("background-image", "url(/wp-content/themes/DealerInspireCommonTheme/images/quickinfoplus.png)")) : (jQuery(this).parent().find(".vehicleoverlay").stop().show().animate({
                        height: a,
                        opacity: 1
                    }, 200), jQuery(this).css("background-image", "url(/wp-content/themes/DealerInspireCommonTheme/images/quickinfominus.png)")), jQuery(this).toggleClass("expanded")
                })), jQuery(document).on("click", ".vehicleoverlay :not(.shopping-box)", function() {
                    return !1 !== DealerInspireBrowserDetection.isMobile.any() || jQuery(this).is("a") || (window.location.href = jQuery(this).parents("div.vehicle").data("link")), !1
                }), a.grid_view.update_vehicle_grids(), jQuery("body").on("vrp-ajax-complete", function() {
                    a.grid_view.update_vehicle_grids()
                })
            },
            update_vehicle_grids: function() {
                if (0 !== jQuery(".vehicle.grid-view .vehiclebox").length) {
                    var a = 0;
                    jQuery(".vehicle.grid-view .vehiclebox .vehicle-quickstats").each(function(b, c) {
                        var d = jQuery(this).innerHeight();
                        a = a < d ? d : a
                    }), jQuery(".vehicle.grid-view .vehiclebox .vehicle-quickstats").height(a), jQuery(".vehicle.grid-view .vehiclebox .bottom.button-bar").css({
                        position: "absolute",
                        bottom: 0
                    })
                }
            }
        },
        query: {
            to_obj: function(a, b) {
                b = b || !1;
                var a = a || window.location.hash.replace("#", "");
                if (!a) return DealerInspireInventory.url_params = {
                    action: "im_ajax_call",
                    perform: "get_results"
                }, DealerInspireInventory.url_params;
                for (var c, d, e = decodeURI(a), f = e.split("&"), g = {}, h = 0, i = f.length; h < i; h++) c = f[h].split("="), c.length < 2 || (d = c[0], d.replace(/[^0-9A-Za-z_\[\]]/gi, "").length === d.length && (c[1] = c[1].replace(/\+/g, " "), void 0 === g[d] ? -1 !== d.search(/\[/) ? (g[d] = [], g[d].push(unescape(decodeURIComponent(c[1])))) : g[d] = unescape(c[1]) : ("string" == typeof g[d] && (g[d] = [g[d]]), g[d].push(unescape(c[1])))));
                return !0 === b ? g : (DealerInspireInventory.url_params = g, g)
            },
            serialize: function() {
                var a = null === DealerInspireInventory.url_params ? DealerInspireInventory.query.to_obj() : DealerInspireInventory.url_params;
                return jQuery.param(a)
            },
            set_param: function(a, b, c) {
                var d = DealerInspireInventory,
                    c = c || !1,
                    e = null === d.url_params ? d.query.to_obj() : d.url_params,
                    f = [];
                if (!0 === c && b) return e[a] = b, DealerInspireInventory.url_params = e, e;
                if (jQuery(":input[name='" + a + "']").each(function(a, b) {
                        if (!(jQuery(b).parents("div.filters-container").length > 0)) {
                            if (!0 === DealerInspireBrowserDetection.isMobile.phone() && "classic" === d.options.filters.mobile) {
                                if (!1 === jQuery(b).hasClass("mobile-filter") || "" === jQuery(b).val()) return
                            } else if (!0 === jQuery(b).hasClass("mobile-filter")) return;
                            if ("checkbox" === b.type && !0 === jQuery(b).is(":checked") && -1 === jQuery.inArray(jQuery(b).val(), f)) f.push(decodeURIComponent(jQuery(b).val()));
                            else if ("select-one" === b.type && -1 === jQuery.inArray(jQuery(b).val(), f)) f.push(decodeURIComponent(jQuery(b).val()));
                            else if ("select-multiple" === b.type)
                                for (var c in jQuery(b).val()) - 1 === jQuery.inArray(jQuery(b).val()[c], f) && f.push(decodeURIComponent(jQuery(b).val()[c]));
                            else "hidden" !== b.type && "text" !== b.type || f.push(jQuery(b).val())
                        }
                    }), 0 === f.length) return void delete DealerInspireInventory.url_params[a];
                if (1 == f.length && -1 === a.search(/\[/)) return void(DealerInspireInventory.url_params[a] = f[0]);
                e[a] = [];
                for (var g in f) {
                    var h = f[g];
                    !0 === DealerInspireBrowserDetection.isFireFox() && h.search("&") > -1 && (h = h.replace("&", "_AND_")), -1 === jQuery.inArray(h, e[a]) && e[a].push(h)
                }
                return DealerInspireInventory.url_params = e, e
            },
            set_page_num: function(a) {
                return null === DealerInspireInventory.url_params && DealerInspireInventory.query.to_obj(), DealerInspireInventory.url_params.page = a, a
            },
            get_param: function(a) {
                return null === DealerInspireInventory.url_params && DealerInspireInventory.query.to_obj(), DealerInspireInventory.url_params[a] ? DealerInspireInventory.url_params[a] : null
            },
            delete_param: function(a) {
                DealerInspireInventory.query.to_obj(), delete DealerInspireInventory.url_params[a]
            },
            delete_param_value: function(a, b) {
                return null !== this.get_param(a) && ("string" == typeof DealerInspireInventory.url_params[a] ? (this.delete_param(a), !0) : (DealerInspireInventory.url_params[a] = jQuery.grep(DealerInspireInventory.url_params[a], function(a, c) {
                    return a != b
                }), DealerInspireInventory.url_params[a] || this.delete_param(a), !0))
            },
            update: function() {
                var a = DealerInspireInventory;
                a.query.set_page_num(DealerInspireInventory.current_page), void 0 === DealerInspireInventory.url_params.action && a.query.set_param("action", "im_ajax_call", !0), void 0 === DealerInspireInventory.url_params.perform && a.query.set_param("perform", "get_results", !0);
                var b = a.query.serialize();
                if (void 0 !== DealerInspireInventory.url_params.search && null === DealerInspireInventory.query.get_param("_no_ga")) {
                    var c = location.protocol + "//" + location.host + location.pathname,
                        d = DealerInspireInventory.url_params.search;
                    "object" == typeof dataLayer ? dataLayer.push({
                        event: "inventorySearch",
                        search: d
                    }) : "undefined" != typeof _gaq ? _gaq.push(["_trackPageview", c + "?search=" + d]) : "undefined" != typeof ga && ga("send", "pageview", c + "?search=" + d)
                }
                window.location.hash = b
            }
        },
        scrollToTop: function(a) {
            try {
                if (!0 === DealerInspireInventory.refreshed) return;
                var b = ["html,body", "#whitewrap", ".sitewrapper", ".contentcontainer", ".page"],
                    c = null;
                if (window.vrp_scroll_target) c = vrp_scroll_target();
                else
                    do {
                        if (0 == b.length) return;
                        var d = b.pop();
                        jQuery(d).scrollTop() > 0 && (c = jQuery(d))
                    } while (null == c);
                c.animate({
                    scrollTop: a || jQuery(".page").offset().top
                }, 500)
            } catch (a) {
                DealerInspireInventory.log(a)
            }
        },
        create_short_url: function(a) {
            DealerInspireURLShortener.init(this.options.ajax_url, this.options.translate), DealerInspireURLShortener.create_short_url(a)
        },
        alert: function(a, b, c) {
            DealerInspireModalNotification.alert(a, b, c)
        },
        translate_page: function() {
            if (0 === jQuery("#google_translate_element").length) return !1;
            var a = window.location.hash ? window.location.hash.replace("#", "") : "",
                b = null;
            a && null !== (b = a.match(/language=(.*?)(?=&|$)/i)) && b[1] && (window.location.hash = a.replace("language=" + b[1], ""), jQuery(window).load(function() {
                jQuery(".goog-te-menu-frame").contents().find('.goog-te-menu2-item span.text:contains("' + b[1] + '")').click()
            }))
        },
        disable_all_filters: function() {
            var a, b = document.getElementById("results-page"),
                c = ["input", "select"];
            if (null !== typeof b)
                for (var d in c)
                    if ("string" == typeof c[d]) {
                        var e = (c[d].indexOf("\\."), b.getElementsByTagName(c[d]));
                        for (a = 0; a < e.length; a++) e[a].disabled = !0
                    }
            "undefined" != typeof jQuery && (clearInterval(this.timers.disable_filters_timer), delete this.timers.disable_filters_timer, jQuery("#results-page :input").removeAttr("disabled"))
        },
        isIE: {
            any: function() {
                return DealerInspireBrowserDetection.isIE.any()
            },
            eightOrLess: function() {
                return DealerInspireBrowserDetection.isIE.eightOrLess()
            },
            nineOrLess: function() {
                return DealerInspireBrowserDetection.isIE.nineOrLess()
            }
        },
        isMobile: {
            Android: function() {
                return DealerInspireBrowserDetection.isMobile.Android()
            },
            BlackBerry: function() {
                return DealerInspireBrowserDetection.isMobile.BlackBerry()
            },
            iOS: function() {
                return DealerInspireBrowserDetection.isMobile.iOS()
            },
            Windows: function() {
                return DealerInspireBrowserDetection.isMobile.Windows()
            },
            any: function() {
                return DealerInspireBrowserDetection.isMobile.any()
            },
            tablet: function() {
                return DealerInspireBrowserDetection.isMobile.tablet()
            },
            phone: function() {
                return DealerInspireBrowserDetection.isMobile.phone()
            }
        },
        log: function(a, b, c) {
            if ("undefined" != typeof console) {
                if (c = void 0 !== c && c, b = void 0 === b || b, !0 === c && "1" !== DealerInspireInventory.options.is_user_logged_in) return !1;
                if (b) {
                    var d = new Date,
                        e = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds() + " ";
                    console.log(e + a)
                } else console.log(a)
            }
        },
        format: {
            number: function(a) {
                return a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,")
            },
            currency: function(a) {
                return "$" + this.number(a)
            },
            escape: function(a) {
                return a.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")
            }
        },
        CreateCookie: function(a, b, c) {
            DealerInspireCookie.CreateCookie(a, b, c)
        },
        ReadCookie: function(a) {
            return DealerInspireCookie.ReadCookie(a)
        },
        EraseCookie: function(a) {
            DealerInspireCookie.EraseCookie(a)
        },
        DebugBackTrace: function() {
            console.log((new Error).stack)
        }
    };
DealerInspireInventory.init(), DealerInspireInventory.mobile_filters = {
    init: function() {
        var a = DealerInspireInventory;
        if (void 0 === a.options.filters) return !1;
        if ("classic" === a.options.filters.mobile) a.mobile_filters.classic(), jQuery("body").on("vrp-ajax-complete vrp-updated", function(b) {
            a.mobile_filters.classic()
        }), jQuery("#vrp-filter-menu .vrp-filter-menu-button,#vrp-filter-menu .hideShowFilters").click(function(b) {
            var c = jQuery(this).parent(),
                d = jQuery("#vrp-filter-menu").outerHeight() < 200 ? 200 : jQuery("#vrp-filter-menu").outerHeight();
            d = jQuery("#vrp-filter-menu .advanced-filters").outerHeight() < d ? d : jQuery("#vrp-filter-menu .advanced-filters").outerHeight(), !1 === a.vrpFilterShowing ? (jQuery("#vrp-filter-menu").animate({
                bottom: "+=" + d
            }, 600, "easeInOutBack", function() {
                jQuery(c).find(".filter-icon").removeClass("closed").addClass("open"), jQuery(c).find(".filter-title").html("hide filters")
            }), a.vrpFilterShowing = !0) : (jQuery("#vrp-filter-menu").animate({
                bottom: "-=" + d
            }, 600, "easeInOutBack", function() {
                jQuery(this).find(".filter-icon").removeClass("open").addClass("closed"), jQuery(this).find(".filter-title").html("show filters")
            }), a.vrpFilterShowing = !1)
        }), jQuery(".mobile-filters-vrp").length, jQuery("body").on("vrp-updated", function() {
            jQuery(".filters").click(function(a) {
                a.stopPropagation()
            })
        }), jQuery(document).on("change", "#vrp-filter-menu select", function() {
            var b = jQuery(this).attr("name");
            a.current_page = 1, jQuery(":input[name='" + b + "']").not(this).val(""), a.query.set_param(b), a.query.update()
        });
        else if ("groupon" === a.options.filters.mobile) {
            var b = !0,
                c = jQuery("#groupon-mobile-sidr");
            1 === jQuery(".mobile-tab-content-inside.groupon-mobile-filters").length && (c = jQuery(".mobile-tab-content-inside.groupon-mobile-filters"), b = !1), jQuery("body").on("accordioncreate", ".groupon-sidebar div.groupon-sidebar-filters", function() {
                !0 === DealerInspireBrowserDetection.isMobile.phone() && (a.mobile_filters.groupon(),
                    b && (c = jQuery("#groupon-mobile-sidr")))
            }), jQuery(document).on("mouseup tab", function(a) {
                c.is(a.target) || 0 !== c.has(a.target).length || !0 !== b || jQuery.sidr("close", "groupon-mobile-sidr")
            }), !0 === a.options.responsive ? jQuery(window).bind("window-resize-end", function() {
                !0 !== DealerInspireBrowserDetection.isMobile.phone() && c.find("div.groupon-sidebar-filters").length > 0 ? (!0 === b && jQuery.sidr("close", "groupon-mobile-sidr"), c.children().appendTo(".filter-results.groupon-sidebar")) : !0 === DealerInspireBrowserDetection.isMobile.phone() && 0 === c.find("div.groupon-sidebar-filters").length && a.mobile_filters.groupon()
            }) : (jQuery(document).on("change click", "#groupon-mobile-sidr .groupon-sidebar-filters :input, .im-mobile-reset-filters", function(b) {
                if (jQuery(this).hasClass("im-mobile-reset-filters")) var d = "action=im_ajax_call&get_results=true&perform=update-mobile-filters";
                else var d = c.find(".groupon-sidebar-filters :input").serialize() + "&action=im_ajax_call&get_results=true&perform=update-mobile-filters";
                return data = a.query.to_obj(d), jQuery.ajax({
                    url: a.options.ajax_url,
                    data: data,
                    type: "POST",
                    dataType: "json",
                    success: function(b) {
                        c.html(b.filters), a.sidebar.groupon()
                    }
                }), b.stopImmediatePropagation(), !1
            }), jQuery("body").on("vrp-ajax-complete vrp-updated", function(d) {
                a.sidebar.groupon(), !0 === b && c.unbind("mouseup swipe").html("")
            })), jQuery(document).on("click", ".groupon-mobile-filters-apply", function(d) {
                if (!0 === b) {
                    jQuery.sidr("close", "groupon-mobile-sidr");
                    var e = c.find(".groupon-sidebar-filters :input").serialize() + "&action=im_ajax_call&perform=get_results";
                    data = a.query.to_obj(e), a.current_page = 1, a.query.update()
                } else c.parents(".mobile-tab-content").find(".mobile-tab-title-bar .mobile-tab-close").click()
            }), jQuery(document).on("click", ".groupon-mobile-filters-apply", function(b) {
                a.mobilefilterselected = !1, jQuery(this).css("opacity", "0")
            }), jQuery(document).on("click", ".groupon-mobile-filters-toggle", function(a) {
                !0 === b ? jQuery("body").hasClass("groupon-mobile-sidr-open") ? jQuery.sidr("close", "groupon-mobile-sidr") : jQuery.sidr("open", "groupon-mobile-sidr") : c.parents(".mobile-tab-content").find(".mobile-tab-title-bar .mobile-tab-close").click()
            }), !0 === b && jQuery("#groupon-mobile-filter").sidr({
                name: "groupon-mobile-sidr",
                side: "right"
            }), jQuery(document).on("click", ".mobile-sort-by", function(a) {
                jQuery("[name='_orderby']").trigger("click")
            })
        }
    },
    classic: function() {
        if (jQuery(".mobile-filters-container").length > 0) {
            var a = jQuery(".mobile-filters-container .mobile-filters-vrp").clone(!0, !0);
            jQuery(".mobile-filters-container").remove(), jQuery("#vrp-filter-menu .filters").html(a)
        } else jQuery(".vrp-listing tr td.search-results > div").appendTo("#vrp-filter-menu .filters"), jQuery(".vrp-listing tr td.search-results > div").remove()
    },
    groupon: function() {
        var a = jQuery("#groupon-mobile-sidr");
        1 === jQuery(".mobile-tab-content-inside.groupon-mobile-filters").length && (a = jQuery(".mobile-tab-content-inside.groupon-mobile-filters"), a.empty()), !0 === DealerInspireInventory.options.responsive && a.empty(), setTimeout(function() {
            jQuery(".filter-results.groupon-sidebar").children().appendTo(a), DealerInspireInventory.mobilefilterselected && jQuery(".groupon-mobile-filters-apply").css("opacity", "1")
        }, 200)
    }
}, DealerInspireInventory.mobile_filters.init(), DealerInspireInventory.sidebar = {
    init: function() {
        var a = DealerInspireInventory;
        if (void 0 === a.options.filters) return !1;
        "groupon" === a.options.filters.sidebar && (a.sidebar.groupon(), a.sidebar.groupon_live_search(), jQuery(document).on("click", "#start_search", function() {
            a.current_page = 1;
            var b = jQuery("input[name='search']#search").val();
            b === jQuery("input[name='search']#search").attr("placeholder") || "" == b ? a.alert("Please type in something to search for.") : a.reset_and_search(b)
        }), jQuery(document).on("change", ".groupon-sidebar-filters :input:not(.groupon-filter-live-search-field)", function(b) {
            var c = jQuery(this).attr("name");
            jQuery(this).hasClass("select-all") && (jQuery(this).parents(".groupon-filter-container").find(":checkbox").attr("checked", "checked"), jQuery(this).removeAttr("checked")), jQuery(":input[name='" + c + "']").not(":checkbox").val(""), a.mobilefilterselected = !0, a.current_page = 1, a.query.set_param(c), a.query.update()
        }), jQuery("body").on("click", ".groupon-sidebar-filters .reset-filter", function() {
            var a = jQuery(this).parents(".groupon-filter-container").find(":checkbox");
            a.removeAttr("checked"), a.last().trigger("change")
        }), jQuery("body").on("click", ".groupon-sidebar-filters .filter-checkbox a", function(a) {
            var b = jQuery(this).parent(".filter-checkbox").find("input");
            if (b.is(":disabled")) return a.preventDefault(), !1;
            b.is(":checked") ? b.removeAttr("checked") : b.attr("checked", "checked"), b.trigger("change"), a.preventDefault()
        }), jQuery(document).on("click", ".im-share-vrp", function() {
            a.create_short_url(window.location.href)
        }), this.smart_filters.init(), jQuery("body").on("vrp-ajax-complete", function() {
            a.sidebar.groupon()
        }), jQuery("body").on("vrp-ajax-pre-send", function() {
            if (1 === DealerInspireInventory.current_page) {
                var a = jQuery("div.groupon-sidebar-filters");
                a.hide(), a.accordion("destroy"), jQuery(".groupon-vrp-filters-loader").show()
            }
        }))
    },
    groupon: function() {
        if (!(void 0 !== jQuery("div.groupon-sidebar-filters").accordion("instance") && DealerInspireInventory.current_page > 1)) {
            var a = DealerInspireInventory;
            jQuery("div.groupon-sidebar-filters").accordion({
                header: ".filter-heading",
                heightStyle: "content",
                collapsible: !0,
                active: !1,
                beforeActivate: function(b, c) {
                    if (c.newHeader[0]) var d = c.newHeader,
                        e = d.next(".ui-accordion-content");
                    else var d = c.oldHeader,
                        e = d.next(".ui-accordion-content");
                    var f = "true" == d.attr("aria-selected");
                    return d.toggleClass("ui-corner-all", f).toggleClass("accordion-header-active ui-state-active ui-corner-top", !f).attr("aria-selected", (!f).toString()), d.children(".ui-icon").toggleClass("ui-icon-triangle-1-e", f).toggleClass("ui-icon-triangle-1-s", !f), e.toggleClass("accordion-content-active", !f), f ? e.slideUp() : e.slideDown(), a.sidebar.groupon_user_settings(!0), b.preventDefault(), !1
                }
            }).css("visibility", "visible"), jQuery(".groupon-vrp-filters-loader").hide(), this.groupon_user_settings()
        }
    },
    smart_filters: {
        init: function() {
            var a = DealerInspireInventory;
            if (void 0 === a.options.filters.smart_filters || "disabled" === a.options.filters.smart_filters.state) return !1;
            jQuery("body").on("accordioncreate", ".groupon-sidebar div.groupon-sidebar-filters", function() {
                try {
                    a.options.filters.smart_filters.ignore_user_settings = !1;
                    var b = ["type[]", "model[]", "trim[]"],
                        c = [],
                        d = [],
                        e = [],
                        f = JSON.parse(JSON.stringify(a.url_params));
                    jQuery("div.groupon-sidebar-filters .filter-heading").each(function(a, b) {
                        var d = jQuery(this).data("panel-filter"); - 1 === jQuery.inArray(d, c) && c.push(d)
                    }), jQuery.each(b, function(b, c) {
                        void 0 === f[c] && void 0 !== a.options.shortcode[c.replace("[]", "")] && (void 0 !== f.search && f.search && "type[]" !== c || (f[c] = a.options.shortcode[c.replace("[]", "")]))
                    });
                    var g = a.sidebar.smart_filters.get_order_logic(f, c);
                    if (jQuery.each(g, function(b, g) {
                            void 0 !== g.conditions && g.conditions && !0 === a.sidebar.smart_filters.is_valid(g, f) && (d = jQuery.unique(jQuery.merge(g.order, d.length > 0 ? d : c)), void 0 !== g.open_panels && jQuery.each(g.open_panels, function(a, b) {
                                "!" === b.charAt(0) ? jQuery.inArray(b.substring(1), e) > -1 && e.splice(jQuery.inArray(b.substring(1), e), 1) : -1 === jQuery.inArray(b, e) && e.push(b)
                            }))
                        }), 0 === d.length) return !1;
                    jQuery.each(d, function(a, b) {
                        jQuery("div.groupon-sidebar-filters").append(jQuery("div.groupon-sidebar-filters .filter-heading[data-panel-filter='" + b + "']").parent())
                    }), e && e.length > 0 && (a.options.filters.smart_filters.ignore_user_settings = !0, jQuery("div.groupon-sidebar-filters .filter-heading").each(function(a, b) {
                        jQuery.inArray(jQuery(this).data("panel-filter"), e) > -1 && !jQuery(this).hasClass("ui-state-active") && jQuery(this).trigger("click")
                    }))
                } catch (a) {
                    DealerInspireInventory.log(a)
                }
            })
        },
        get_order_logic: function(a, b) {
            var c = [{
                conditions: [{
                    key: "type[]",
                    value: "New",
                    compare: "="
                }, {
                    key: "model[]|models[]",
                    compare: "!EMPTY"
                }, {
                    key: "year[]|years[]",
                    compare: "!EMPTY"
                }],
                order: ["trim", "chrome_trim", "ext_color_generic", "ext_color", "features", "packages", "lease_payment", "monthly_payment", "price"],
                open_panels: ["trim", "chrome_trim", "ext_color_generic", "ext_color", "features", "packages", "lease_payment", "monthly_payment"]
            }, {
                conditions: [{
                    key: "type[]",
                    value: "New",
                    compare: "="
                }, {
                    key: "model[]|models[]",
                    compare: "EMPTY"
                }, {
                    key: "year[]|years[]",
                    compare: "!EMPTY"
                }],
                order: ["model", "trim", "chrome_trim", "ext_color_generic", "ext_color", "features", "packages", "lease_payment", "monthly_payment", "price"],
                open_panels: ["model", "trim", "chrome_trim", "ext_color_generic", "ext_color", "features", "packages", "lease_payment", "monthly_payment"]
            }, {
                conditions: [{
                    key: "type[]",
                    value: "Used",
                    compare: "LIKE"
                }, {
                    key: "model[]|models[]",
                    compare: "!EMPTY"
                }, {
                    key: "year[]|years[]",
                    compare: "!EMPTY"
                }],
                order: ["monthly_payment", "trim", "chrome_trim", "bodytype", "body", "ext_color_generic", "ext_color", "packages", "price"],
                open_panels: ["trim", "chrome_trim", "ext_color_generic", "ext_color", "packages", "monthly_payment"]
            }, {
                conditions: [{
                    key: "type[]",
                    value: "Used",
                    compare: "LIKE"
                }, {
                    key: "model[]|models[]",
                    compare: "EMPTY"
                }, {
                    key: "make[]|makes[]",
                    compare: "!EMPTY"
                }, {
                    key: "year[]|years[]",
                    compare: "!EMPTY"
                }],
                order: ["monthly_payment", "bodytype", "body", "model", "trim", "chrome_trim", "ext_color_generic", "ext_color", "packages", "price"],
                open_panels: ["monthly_payment", "trim", "chrome_trim", "ext_color_generic", "ext_color", "packages"]
            }];
            return window.vrp_groupon_smart_filters_order_logic_array && vrp_groupon_smart_filters_order_logic_array(c, a, b), c
        },
        is_valid: function(a, b) {
            var c = !0;
            return jQuery.each(b, function(a, c) {
                "object" == typeof c && (b[a] = c.filter(function(a) {
                    return "" != a && void 0 != a
                }))
            }), jQuery.each(a.conditions, function(a, d) {
                var e = d.key;
                if (e.search("|") > -1) {
                    var f = e.split("|");
                    $.each(f, function(a, c) {
                        if (void 0 !== b[c]) return e = c, !0
                    })
                }
                switch (d.compare) {
                    case "!=":
                    case "=":
                        (void 0 === b[e] || "string" == typeof b[e] && b[e] !== d.value || "object" == typeof b[e] && (b[e].length > 1 || -1 === jQuery.inArray(d.value, b[e]))) && (c = !1);
                        break;
                    case "!LIKE":
                    case "LIKE":
                        var g = new RegExp(d.value, "i");
                        (void 0 === b[e] || "string" == typeof b[e] && -1 === b[e].search(g) || "object" == typeof b[e] && -1 === b[e].join("").search(g)) && (c = !1);
                        break;
                    case "!EMPTY":
                    case "EMPTY":
                        void 0 !== b[e] && (c = !1)
                }
                if ("!" === d.compare.charAt(0) && (c = !1 === c), !1 === c) return !1
            }), !0 === c && (DealerInspireInventory.log("Applying Smart Filters:", !1, !0), DealerInspireInventory.log(a, !1, !0)), c
        }
    },
    groupon_live_search: function() {
        jQuery("body").on("click", ".groupon-sidebar-filters .filter-heading", function(a) {
            "object" == typeof a.originalEvent && 0 !== jQuery(this).parent("div").find(".groupon-filter-live-search-field").length && (jQuery(this).hasClass("ui-state-active") ? !1 === DealerInspireBrowserDetection.isMobile.any() && jQuery(this).parent("div").find(".groupon-filter-live-search-field").focus() : jQuery(this).parent("div").find(".groupon-filter-live-search-field").val("").trigger("keyup"))
        }), jQuery("body").on("keyup", ".groupon-filter-live-search-field", function(a) {
            var b = jQuery(this).val(),
                c = jQuery(this).parents(".groupon-filter-container");
            if (c.find(".no-results-message").remove(), !b) return c.find(".filter-option").show(), !1;
            var d = new RegExp(b, "i");
            c.find(".filter-option").each(function() {
                !1 === d.test(jQuery(this).find("a").text()) ? jQuery(this).hide() : jQuery(this).show()
            }), 0 === c.find(".filter-option:visible").length && 0 === c.find(".no-results-message").length && jQuery('<div class="no-results-message well">No results matched "' + b + '"</div>').insertAfter(jQuery(this))
        })
    },
    groupon_user_settings: function(a) {
        var b = DealerInspireInventory;
        try {
            if (void 0 !== b.options.filters.smart_filters && !0 === b.options.filters.smart_filters.ignore_user_settings) return !1;
            var c = jQuery.inArray("New", b.options.shortcode.type) > -1 ? "new" : "used",
                d = b.ReadCookie("im_sidebar_user_settings_" + c),
                e = [],
                f = [];
            if (a) a && (jQuery("div.groupon-sidebar-filters .filter-heading").each(function(a, b) {
                jQuery(this).hasClass("ui-state-active") && f.push(jQuery(this).data("panel-filter"))
            }), b.CreateCookie("im_sidebar_user_settings_" + c, f.join(","), .1));
            else {
                if (e.push(jQuery("div.groupon-sidebar-filters .filter-heading:first").data("panel-filter")), void 0 !== b.options.shortcode.type && null !== b.options.filters.settings.sidebar_groupon_open_panels) {
                    var c = jQuery.inArray("New", b.options.shortcode.type) > -1 ? "new" : "used";
                    if (void 0 !== b.options.filters.settings.sidebar_groupon_open_panels[c]) {
                        var g = b.options.filters.settings.sidebar_groupon_open_panels[c];
                        "none" === g ? e = [] : "" !== g && (e = g.split(","))
                    }
                }
                f = null === d || !window.location.hash && 0 === e.length ? e : d.split(","), f && jQuery.each(f, function(a, c) {
                    b.sidebar.open_panel(c)
                })
            }
        } catch (a) {
            DealerInspireInventory.log(a)
        }
    },
    collapse_all_panels: function() {
        if ("groupon" === DealerInspireInventory.options.filters.sidebar) {
            var a = jQuery("div.groupon-sidebar-filters");
            a.find(".filter-heading.ui-state-active").removeClass("ui-state-active"), a.accordion("option", {
                collapsible: !0,
                active: !1
            }), a.accordion("refresh")
        }
    },
    collapse_panel: function(a) {
        "groupon" === DealerInspireInventory.options.filters.sidebar && jQuery("div.groupon-sidebar-filters .filter-heading.ui-state-active[data-panel-filter='" + a + "']").trigger("click")
    },
    open_panel: function(a) {
        "groupon" === DealerInspireInventory.options.filters.sidebar && jQuery("div.groupon-sidebar-filters .filter-heading[data-panel-filter='" + a + "']").not(".ui-state-active").trigger("click")
    }
}, DealerInspireInventory.sidebar.init(), DealerInspireInventory.top_filters = {
    init: function() {
        var a = DealerInspireInventory;
        if (void 0 === a.options.filters) return !1;
        "fluid" === a.options.filters.top && (a.top_filters.fluid(), jQuery(document).on("change", "div#top-filters.bootstrap-select :input:not('[role=textbox]'),.advanced-filters.desktop-filters :input:not('[role=textbox]')", function(b) {
            var c = jQuery(this).attr("name"),
                d = jQuery(this).val();
            if ("search" !== c) {
                if ("added_recent_week" === c ? (a.query.delete_param("added_recent_month"), jQuery('input[name="added_recent_month"]').removeAttr("checked")) : "added_recent_month" === c && (a.query.delete_param("added_recent_week"), jQuery('input[name="added_recent_week"]').removeAttr("checked")), null === d || "show_all" === d[0]) {
                    a.query.delete_param(c);
                    var e = window.location.pathname.split("/");
                    if ("model[]" == c && e.length > 2 && ~e[1].indexOf("new")) {
                        var f = "#action=im_ajax_call&perform=get_results";
                        for (var g in a.url_params)
                            if (jQuery.isArray(a.url_params[g]))
                                for (var h = 0; h < a.url_params[g].length; h++) f += "&" + encodeURIComponent(g) + "=" + encodeURIComponent(a.url_params[g][h]);
                        return window.location.href = window.location.protocol + "//" + window.location.host + "/" + e[1] + "/" + f, !1
                    }
                    return a.current_page = 1, a.query.update(), !1
                }
                jQuery("input[name='" + c + "']").not(this).each(function(a, b) {
                    "checkbox" === b.type ? jQuery(b).removeAttr("checked") : jQuery(b).val("")
                }), a.current_page = 1, a.query.set_param(c), a.query.update()
            }
        }), jQuery(document).on("click", "#start_search", function() {
            a.current_page = 1, a.reset_and_search(jQuery("input[name='search']#search").val()), jQuery("#vrp-notifications-modal-container .modal-header .modal-title").text(a.options.translate.error), jQuery("#vrp-notifications-modal-container .modal-body").text(a.options.translate.type_something), jQuery("#vrp-notifications-modal-container .modal-footer button").text(a.options.translate.close)
        }), jQuery(document).on("keyup", '#results-page.without-sidebar-filters input[name="search"]', function(b) {
            if (13 === b.which) {
                var c = jQuery(this).val();
                c === jQuery(this).attr("placeholder") || "" == c ? a.alert("Please type in something to search for.") : a.reset_and_search(c)
            } else jQuery('#results-page.without-sidebar-filters input[name="search"]').not(this).val(jQuery(this).val());
            return !1
        }), jQuery(document).on("click", "#results-page.without-sidebar-filters #toggle-filters", function() {
            jQuery(this).hasClass("expanded") ? (jQuery(".advanced-filters").hide("fast"), jQuery(this).removeClass("expanded dark-button").html($(this).data("open-text")), jQuery("input[name='show_all_filters']").val("false")) : (jQuery(".advanced-filters").show("fast"), jQuery(this).addClass("expanded dark-button").html($(this).data("close-text")), jQuery("input[name='show_all_filters']").val("true"))
        }), jQuery("body").on("vrp-ajax-pre-send", function() {
            1 === DealerInspireInventory.current_page && (jQuery("#top-filters .top-filter").remove(), jQuery(".fluid-filters .vrp-filters-loader").show())
        }), jQuery("body").on("vrp-ajax-complete", function() {
            a.top_filters.fluid()
        }))
    },
    fluid: function() {
        if (0 === jQuery(".bootstrap-select").length) return !1;
        if (1 === jQuery(".bootstrap-select .top-filter .btn-group.bootstrap-select:first").length && DealerInspireInventory.current_page > 1) return !1;
        jQuery(".bootstrap-select .top-filter select").selectpicker({
            dropupAuto: !1
        });
        var a = Math.floor(10 / jQuery("#top-filters.bootstrap-select .top-filter").length);
        a = 1 === a ? 2 : a;
        var b = "span" + a;
        jQuery("#top-filters.bootstrap-select .top-filter .bootstrap-select").addClass(b), jQuery("#top-filters .top-filter").css("visibility", "visible"), jQuery(".fluid-filters .vrp-filters-loader").hide()
    },
    get_value: function(a) {
        var b = jQuery(".top-filter select[name='" + a + "']"),
            c = b.val();
        return 0 !== b.length && null !== c && (jQuery.each(c, function(a, b) {
            c[a] = decodeURIComponent(b)
        }), c)
    }
}, DealerInspireInventory.top_filters.init();