var TPReferral = {
    ajaxURL: !1,
    cookie_name: "tp_referral",
    isConsoleLogEmitting: !1,
    init: function(a) {
        this.ajaxURL = a.ajaxURL, this.console_log("start init()"), "undefined" == typeof this.readCookie(this.cookie_name) || null === this.readCookie(this.cookie_name) ? this.sendReferrer() : this.console_log("no need to resubmit the AJAX request because the cookie is already set."), this.console_log("complete init()")
    },
    getCurrentHTTPReferrer: function() {
        return document.referrer
    },
    sendReferrer: function() {
        this.console_log("start sendReferrer()");
        var a = function() {
            jQuery.ajax({
                type: "POST",
                url: TPReferral.ajaxURL,
                dataType: "script",
                data: {
                    action: "tp_referral_post",
                    original_referrer: TPReferral.getCurrentHTTPReferrer(),
                    window_location_href: window.location.href
                },
                beforeSend: function() {
                    TPReferral.console_log("transmitting Referrer as " + TPReferral.getCurrentHTTPReferrer())
                },
                complete: function(a) {
                    TPReferral.console_log("successfully sent in Referrer."), TPReferral.console_log("cookie information..." + TPReferral.readCookie(TPReferral.cookie_name));
                    var b = jQuery("input:hidden"),
                        c = b.filter(".tp_referral_input_id");
                    c.each(function() {
                        0 === jQuery(this).attr("value").length && (jQuery(this).attr("value", TPReferral.readCookie(TPReferral.cookie_name)), TPReferral.console_log("TPReferral - updated a form elements referral tracker id."))
                    })
                }
            })
        };
        "complete" === document.readyState ? a() : jQuery(window).on("load", a), this.console_log("end sendReferrer()")
    },
    createCookie: function(a, b, c) {
        if (c) {
            var d = new Date;
            d.setTime(d.getTime() + 60 * c * 1e3);
            var e = "; expires=" + d.toGMTString()
        } else var e = "";
        document.cookie = a + "=" + b + e + "; path=/"
    },
    readCookie: function(a) {
        for (var b = a + "=", c = document.cookie.split(";"), d = 0; d < c.length; d++) {
            for (var e = c[d];
                " " == e.charAt(0);) e = e.substring(1, e.length);
            if (0 == e.indexOf(b)) return e.substring(b.length, e.length)
        }
        return null
    },
    eraseCookie: function(a) {
        this.createCookie(a, "", -1)
    },
    console_log: function(a) {
        if ("undefined" == typeof this.isConsoleLogEmitting || 0 == this.isConsoleLogEmitting) return !1;
        var b = !0;
        "undefined" != typeof console && "undefined" != typeof console.log || (console = {}, b ? console.log = function(a) {
            alert(a)
        } : console.log = function() {}), console.log(a)
    }
};
jQuery(document).ready(function() {
    try {
        TPReferral.init(TPReferralInitializationOptions)
    } catch (a) {
        TPReferral.console_log("TPPReferral exception: " + a)
    }
});